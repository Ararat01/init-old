"use strict";var XZ=Object.defineProperty,e4=Object.defineProperties,t4=Object.getOwnPropertyDescriptors,iR=Object.getOwnPropertySymbols,n4=Object.prototype.hasOwnProperty,r4=Object.prototype.propertyIsEnumerable,sR=(ze,we,R)=>we in ze?XZ(ze,we,{enumerable:!0,configurable:!0,writable:!0,value:R}):ze[we]=R,oR=(ze,we)=>{for(var R in we||(we={}))n4.call(we,R)&&sR(ze,R,we[R]);if(iR)for(var R of iR(we))r4.call(we,R)&&sR(ze,R,we[R]);return ze},aR=(ze,we)=>e4(ze,t4(we));(self.webpackChunkinit=self.webpackChunkinit||[]).push([[179],{2011:(ze,we,R)=>{R.d(we,{hO:()=>qe,xv:()=>he,Dh:()=>ae,GT:()=>_e,cc:()=>Ie,on:()=>j,pX:()=>se});var a=R(5e3),ee=R(127),F=R(5813);ze=R.hmd(ze);const oe=["ngOnDestroy"],se=(pe,Oe,Ze,Fe={})=>new Proxy(pe,{get:(Ke,De)=>Ze.runOutsideAngular(()=>{var Je;if(pe[De])return(null===(Je=null==Fe?void 0:Fe.spy)||void 0===Je?void 0:Je.get)&&Fe.spy.get(De,pe[De]),pe[De];if(oe.indexOf(De)>-1)return()=>{};const We=Oe.toPromise().then(Ce=>{const H=Ce&&Ce[De];return"function"==typeof H?H.bind(Ce):H&&H.then?H.then(ne=>Ze.run(()=>ne)):Ze.run(()=>H)});return new Proxy(()=>{},{get:(Ce,H)=>We[H],apply:(Ce,H,ne)=>We.then(ce=>{var ge;const Me=ce&&ce(...ne);return(null===(ge=null==Fe?void 0:Fe.spy)||void 0===ge?void 0:ge.apply)&&Fe.spy.apply(De,ne,Me),Me})})})}),_e=(pe,Oe)=>{Oe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Fe=>{Object.defineProperty(pe.prototype,Fe,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Fe))})})};class ue{constructor(Oe){return Oe}}const ae=new a.OlP("angularfire2.app.options"),he=new a.OlP("angularfire2.app.name");function j(pe,Oe,Ze){const Ke="object"==typeof Ze&&Ze||{};Ke.name=Ke.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Je=ee.Z.apps.filter(We=>We&&We.name===Ke.name)[0]||Oe.runOutsideAngular(()=>ee.Z.initializeApp(pe,Ke));try{JSON.stringify(pe)!==JSON.stringify(Je.options)&&G("error",`${Je.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(We){}return new ue(Je)}const G=(pe,...Oe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[pe](...Oe)},re={provide:ue,useFactory:j,deps:[ae,a.R0b,[new a.FiY,he]]};let qe=(()=>{class pe{constructor(Ze){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",a.q4F.full,Ze.toString())}static initializeApp(Ze,Fe){return{ngModule:pe,providers:[{provide:ae,useValue:Ze},{provide:he,useValue:Fe}]}}}return pe.\u0275fac=function(Ze){return new(Ze||pe)(a.LFG(a.Lbi))},pe.\u0275mod=a.oAB({type:pe}),pe.\u0275inj=a.cJS({providers:[re]}),pe})();function Ie(pe,Oe,Ze,Fe,Ke){const[,De,Je]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===pe)||[];if(De)return function Ne(pe,Oe){try{return pe.toString()===Oe.toString()}catch(Ze){return pe===Oe}}(Ke,Je)||(fe("error",`${Oe} was already initialized on the ${Ze} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:Ke,was:Je})),De;{const We=Fe();return globalThis.\u0275AngularfireInstanceCache.push([pe,We,Ke]),We}}const Be=!!ze.hot,fe=(pe,...Oe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[pe](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ze,we,R)=>{R.d(we,{q4:()=>Jd,iC:()=>iu,HU:()=>tl,vb:()=>Kf,JM:()=>zf});var a=R(5e3),ee=R(5867),F=R(5861),oe=R(9681),se=R(2090),_e=R(4859),ue=R(1877),ae=R(8766);const he="@firebase/installations",j="0.5.9",re=`w:${j}`,qe="FIS_v2",Oe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function Fe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ke(I){return{token:I.token,requestStatus:2,expiresIn:ce(I.expiresIn),creationTime:Date.now()}}function De(I,D){return Je.apply(this,arguments)}function Je(){return(Je=(0,F.Z)(function*(I,D){const U=(yield D.json()).error;return Oe.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function We({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ce(I,{refreshToken:D}){const P=We(I);return P.append("Authorization",function ge(I){return`${qe} ${I}`}(D)),P}function H(I){return ne.apply(this,arguments)}function ne(){return(ne=(0,F.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function ce(I){return Number(I.replace("s","000"))}function Me(I,D){return ie.apply(this,arguments)}function ie(){return(ie=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:P}){const U=Fe(I),Y=We(I),Q=D.getImmediate({optional:!0});if(Q){const bt=yield Q.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ye={method:"POST",headers:Y,body:JSON.stringify({fid:P,authVersion:qe,appId:I.appId,sdkVersion:re})},lt=yield H(()=>fetch(U,Ye));if(lt.ok){const bt=yield lt.json();return{fid:bt.fid||P,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Ke(bt.authToken)}}throw yield De("Create Installation",lt)})).apply(this,arguments)}function mt(I){return new Promise(D=>{setTimeout(D,I)})}const Cn=/^[cdef][\w-]{21}$/;function Et(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const P=function Sn(I){return function Nt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Cn.test(P)?P:""}catch(I){return""}}function Xt(I){return`${I.appName}!${I.appId}`}const ar=new Map;function rn(I,D){const P=Xt(I);Qn(P,D),function us(I,D){const P=function Kt(){return!Ur&&"BroadcastChannel"in self&&(Ur=new BroadcastChannel("[Firebase] FID Change"),Ur.onmessage=I=>{Qn(I.data.key,I.data.fid)}),Ur}();P&&P.postMessage({key:I,fid:D}),function xn(){0===ar.size&&Ur&&(Ur.close(),Ur=null)}()}(P,D)}function Qn(I,D){const P=ar.get(I);if(P)for(const U of P)U(D)}let Ur=null;const Mr="firebase-installations-store";let Pe=null;function ut(){return Pe||(Pe=(0,ae.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Mr)}})),Pe}function Ln(I,D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,F.Z)(function*(I,D){const P=Xt(I),Y=(yield ut()).transaction(Mr,"readwrite"),Q=Y.objectStore(Mr),ke=yield Q.get(P);return yield Q.put(D,P),yield Y.done,(!ke||ke.fid!==D.fid)&&rn(I,D.fid),D})).apply(this,arguments)}function Yt(I){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,F.Z)(function*(I){const D=Xt(I),U=(yield ut()).transaction(Mr,"readwrite");yield U.objectStore(Mr).delete(D),yield U.done})).apply(this,arguments)}function Ai(I,D){return ur.apply(this,arguments)}function ur(){return(ur=(0,F.Z)(function*(I,D){const P=Xt(I),Y=(yield ut()).transaction(Mr,"readwrite"),Q=Y.objectStore(Mr),ke=yield Q.get(P),Ye=D(ke);return void 0===Ye?yield Q.delete(P):yield Q.put(Ye,P),yield Y.done,Ye&&(!ke||ke.fid!==Ye.fid)&&rn(I,Ye.fid),Ye})).apply(this,arguments)}function bn(I){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,F.Z)(function*(I){let D;const P=yield Ai(I.appConfig,U=>{const Y=Ua(U),Q=Wt(I,Y);return D=Q.registrationPromise,Q.installationEntry});return""===P.fid?{installationEntry:yield D}:{installationEntry:P,registrationPromise:D}})).apply(this,arguments)}function Ua(I){return gn(I||{fid:Et(),registrationStatus:0})}function Wt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Oe.create("app-offline"))};const P={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function at(I,D){return pt.apply(this,arguments)}(I,P);return{installationEntry:P,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ls(I)}:{installationEntry:D}}function pt(){return(pt=(0,F.Z)(function*(I,D){try{const P=yield Me(I,D);return Ln(I.appConfig,P)}catch(P){throw Ze(P)&&409===P.customData.serverCode?yield Yt(I.appConfig):yield Ln(I.appConfig,{fid:D.fid,registrationStatus:0}),P}})).apply(this,arguments)}function Ls(I){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,F.Z)(function*(I){let D=yield Lt(I.appConfig);for(;1===D.registrationStatus;)yield mt(100),D=yield Lt(I.appConfig);if(0===D.registrationStatus){const{installationEntry:P,registrationPromise:U}=yield bn(I);return U||P}return D})).apply(this,arguments)}function Lt(I){return Ai(I,D=>{if(!D)throw Oe.create("installation-not-found");return gn(D)})}function gn(I){return function zt(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Yr(I,D){return Z.apply(this,arguments)}function Z(){return(Z=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},P){const U=W(I,P),Y=Ce(I,P),Q=D.getImmediate({optional:!0});if(Q){const bt=yield Q.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Ye={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:re,appId:I.appId}})},lt=yield H(()=>fetch(U,Ye));if(lt.ok)return Ke(yield lt.json());throw yield De("Generate Auth Token",lt)})).apply(this,arguments)}function W(I,{fid:D}){return`${Fe(I)}/${D}/authTokens:generate`}function z(I){return be.apply(this,arguments)}function be(){return(be=(0,F.Z)(function*(I,D=!1){let P;const U=yield Ai(I.appConfig,Q=>{if(!Ot(Q))throw Oe.create("not-registered");const ke=Q.authToken;if(!D&&sn(ke))return Q;if(1===ke.requestStatus)return P=$(I,D),Q;{if(!navigator.onLine)throw Oe.create("app-offline");const Ye=Vr(Q);return P=et(I,Ye),Ye}});return P?yield P:U.authToken})).apply(this,arguments)}function $(I,D){return X.apply(this,arguments)}function X(){return(X=(0,F.Z)(function*(I,D){let P=yield Ae(I.appConfig);for(;1===P.authToken.requestStatus;)yield mt(100),P=yield Ae(I.appConfig);const U=P.authToken;return 0===U.requestStatus?z(I,D):U})).apply(this,arguments)}function Ae(I){return Ai(I,D=>{if(!Ot(D))throw Oe.create("not-registered");return function Qr(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function et(I,D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,F.Z)(function*(I,D){try{const P=yield Yr(I,D),U=Object.assign(Object.assign({},D),{authToken:P});return yield Ln(I.appConfig,U),P}catch(P){if(!Ze(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ln(I.appConfig,U)}else yield Yt(I.appConfig);throw P}})).apply(this,arguments)}function Ot(I){return void 0!==I&&2===I.registrationStatus}function sn(I){return 2===I.requestStatus&&!function At(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Vr(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function ku(){return(ku=(0,F.Z)(function*(I){const D=I,{installationEntry:P,registrationPromise:U}=yield bn(D);return U?U.catch(console.error):z(D).catch(console.error),P.fid})).apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(I,D=!1){const P=I;return yield Un(P),(yield z(P,D)).token})).apply(this,arguments)}function Un(I){return ji.apply(this,arguments)}function ji(){return(ji=(0,F.Z)(function*(I){const{registrationPromise:D}=yield bn(I);D&&(yield D)})).apply(this,arguments)}function yo(I){return Oe.create("missing-app-config-values",{valueName:I})}const Jr="installations",Pt=I=>{const D=I.getProvider("app").getImmediate(),P=function yr(I){if(!I||!I.options)throw yo("App Configuration");if(!I.name)throw yo("App Name");const D=["projectId","apiKey","appId"];for(const P of D)if(!I.options[P])throw yo(P);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:P,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},en=I=>{const D=I.getProvider("app").getImmediate(),P=(0,oe._getProvider)(D,Jr).getImmediate();return{getId:()=>function Ed(I){return ku.apply(this,arguments)}(P),getToken:Y=>function Nu(I){return Qo.apply(this,arguments)}(P,Y)}};(function lr(){(0,oe._registerComponent)(new _e.wA(Jr,Pt,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("installations-internal",en,"PRIVATE"))})(),(0,oe.registerVersion)(he,j),(0,oe.registerVersion)(he,j,"esm2017");const vr="@firebase/remote-config",yn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fg{constructor(D,P,U,Y){this.client=D,this.storage=P,this.storageCache=U,this.logger=Y}isCachedDataFresh(D,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-P,Y=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var P=this;return(0,F.Z)(function*(){const[U,Y]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(Y&&P.isCachedDataFresh(D.cacheMaxAgeMillis,U))return Y;D.eTag=Y&&Y.eTag;const Q=yield P.client.fetch(D),ke=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&ke.push(P.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(ke),Q})()}}function Rf(I=navigator){return I.languages&&I.languages[0]||I.language}class Si{constructor(D,P,U,Y,Q,ke){this.firebaseInstallations=D,this.sdkVersion=P,this.namespace=U,this.projectId=Y,this.apiKey=Q,this.appId=ke}fetch(D){var P=this;return(0,F.Z)(function*(){const[U,Y]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},lt={sdk_version:P.sdkVersion,app_instance_id:U,app_instance_id_token:Y,app_id:P.appId,language_code:Rf()},bt={method:"POST",headers:Ye,body:JSON.stringify(lt)},Vt=fetch(ke,bt),Tt=new Promise((Qi,_i)=>{D.signal.addEventListener(()=>{const to=new Error("The operation was aborted.");to.name="AbortError",_i(to)})});let Ir;try{yield Promise.race([Vt,Tt]),Ir=yield Vt}catch(Qi){let _i="fetch-client-network";throw"AbortError"===Qi.name&&(_i="fetch-timeout"),yn.create(_i,{originalErrorMessage:Qi.message})}let nn=Ir.status;const bs=Ir.headers.get("ETag")||void 0;let ki,eo;if(200===Ir.status){let Qi;try{Qi=yield Ir.json()}catch(_i){throw yn.create("fetch-client-parse",{originalErrorMessage:_i.message})}ki=Qi.entries,eo=Qi.state}if("INSTANCE_STATE_UNSPECIFIED"===eo?nn=500:"NO_CHANGE"===eo?nn=304:("NO_TEMPLATE"===eo||"EMPTY_CONFIG"===eo)&&(ki={}),304!==nn&&200!==nn)throw yn.create("fetch-status",{httpStatus:nn});return{status:nn,eTag:bs,config:ki}})()}}class Za{constructor(D,P){this.client=D,this.storage=P}fetch(D){var P=this;return(0,F.Z)(function*(){const U=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:P,backoffCount:U}){var Y=this;return(0,F.Z)(function*(){yield function Ff(I,D){return new Promise((P,U)=>{const Y=Math.max(D-Date.now(),0),Q=setTimeout(P,Y);I.addEventListener(()=>{clearTimeout(Q),U(yn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,P);try{const Q=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function Lg(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Q))throw Q;const ke={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield Y.storage.setThrottleMetadata(ke),Y.attemptFetch(D,ke)}})()}}class Uf{constructor(D,P,U,Y,Q){this.app=D,this._client=P,this._storageCache=U,this._storage=Y,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ja(I,D){const P=I.target.error||void 0;return yn.create(D,{originalErrorMessage:P&&P.message})}const ta="app_namespace_store";class Jl{constructor(D,P,U,Y=function Md(){return new Promise((I,D)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=U=>{D(ja(U,"storage-open"))},P.onsuccess=U=>{I(U.target.result)},P.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(ta,{keyPath:"compositeKey"})}}catch(P){D(yn.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=D,this.appName=P,this.namespace=U,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var P=this;return(0,F.Z)(function*(){const U=yield P.openDbPromise;return new Promise((Y,Q)=>{const Ye=U.transaction([ta],"readonly").objectStore(ta),lt=P.createCompositeKey(D);try{const bt=Ye.get(lt);bt.onerror=Vt=>{Q(ja(Vt,"storage-get"))},bt.onsuccess=Vt=>{const Tt=Vt.target.result;Y(Tt?Tt.value:void 0)}}catch(bt){Q(yn.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(D,P){var U=this;return(0,F.Z)(function*(){const Y=yield U.openDbPromise;return new Promise((Q,ke)=>{const lt=Y.transaction([ta],"readwrite").objectStore(ta),bt=U.createCompositeKey(D);try{const Vt=lt.put({compositeKey:bt,value:P});Vt.onerror=Tt=>{ke(ja(Tt,"storage-set"))},Vt.onsuccess=()=>{Q()}}catch(Vt){ke(yn.create("storage-set",{originalErrorMessage:Vt&&Vt.message}))}})})()}delete(D){var P=this;return(0,F.Z)(function*(){const U=yield P.openDbPromise;return new Promise((Y,Q)=>{const Ye=U.transaction([ta],"readwrite").objectStore(ta),lt=P.createCompositeKey(D);try{const bt=Ye.delete(lt);bt.onerror=Vt=>{Q(ja(Vt,"storage-delete"))},bt.onsuccess=()=>{Y()}}catch(bt){Q(yn.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Od{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const P=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),Q=yield P;Q&&(D.lastFetchStatus=Q);const ke=yield U;ke&&(D.lastSuccessfulFetchTimestampMillis=ke);const Ye=yield Y;Ye&&(D.activeConfig=Ye)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Pd(){return ec.apply(this,arguments)}function ec(){return(ec=(0,F.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Vg(){(0,oe._registerComponent)(new _e.wA("remote-config",function I(D,{instanceIdentifier:P}){const U=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw yn.create("registration-window");if(!(0,se.hl)())throw yn.create("indexed-db-unavailable");const{projectId:Q,apiKey:ke,appId:Ye}=U.options;if(!Q)throw yn.create("registration-project-id");if(!ke)throw yn.create("registration-api-key");if(!Ye)throw yn.create("registration-app-id");const lt=new Jl(Ye,U.name,P=P||"firebase"),bt=new Od(lt),Vt=new ue.Yd(vr);Vt.logLevel=ue.in.ERROR;const Tt=new Si(Y,oe.SDK_VERSION,P,Q,ke,Ye),Ir=new Za(Tt,lt),nn=new Fg(Ir,lt,bt,Vt),bs=new Uf(U,nn,bt,lt,Vt);return function dn(I){const D=(0,se.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(bs),bs},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(vr,"0.3.8"),(0,oe.registerVersion)(vr,"0.3.8","esm2017")}();const kd="/firebase-messaging-sw.js",wo="/firebase-cloud-messaging-push-scope",Ru="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Co="google.c.a.c_id",Vf="google.c.a.c_l",Nd="google.c.a.ts",na="google.c.a.e";var qs=(()=>{return(I=qs||(qs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",qs;var I})();function xi(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $i(I){const P=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(P),Y=new Uint8Array(U.length);for(let Q=0;Q<U.length;++Q)Y[Q]=U.charCodeAt(Q);return Y}const Xr="fcm_token_details_db",Rd="fcm_token_object_Store";function Fu(I){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Xr))return null;let D=null;return(yield(0,ae.X3)(Xr,5,{upgrade:(U=(0,F.Z)(function*(Y,Q,ke,Ye){var lt;if(Q<2||!Y.objectStoreNames.contains(Rd))return;const bt=Ye.objectStore(Rd),Vt=yield bt.index("fcmSenderId").get(I);if(yield bt.clear(),Vt)if(2===Q){const Tt=Vt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;D={token:Tt.fcmToken,createTime:null!==(lt=Tt.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:xi(Tt.vapidKey)}}}else if(3===Q){const Tt=Vt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:xi(Tt.auth),p256dh:xi(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:xi(Tt.vapidKey)}}}else if(4===Q){const Tt=Vt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:xi(Tt.auth),p256dh:xi(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:xi(Tt.vapidKey)}}}}),function(Q,ke,Ye,lt){return U.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Xr),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Ga(D)?D:null;var U}),Fd.apply(this,arguments)}function Ga(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Gi="firebase-messaging-store";let Hs=null;function In(){return Hs||(Hs=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Gi)}})),Hs}function Ld(I){return $s.apply(this,arguments)}function $s(){return($s=(0,F.Z)(function*(I){const D=Br(I),U=yield(yield In()).transaction(Gi).objectStore(Gi).get(D);if(U)return U;{const Y=yield Fu(I.appConfig.senderId);if(Y)return yield hs(I,Y),Y}})).apply(this,arguments)}function hs(I,D){return wr.apply(this,arguments)}function wr(){return(wr=(0,F.Z)(function*(I,D){const P=Br(I),Y=(yield In()).transaction(Gi,"readwrite");return yield Y.objectStore(Gi).put(D,P),yield Y.done,D})).apply(this,arguments)}function pi(I){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,F.Z)(function*(I){const D=Br(I),U=(yield In()).transaction(Gi,"readwrite");yield U.objectStore(Gi).delete(D),yield U.done})).apply(this,arguments)}function Br({appConfig:I}){return I.appId}const Gn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ra(I,D){return tc.apply(this,arguments)}function tc(){return(tc=(0,F.Z)(function*(I,D){const P=yield ia(I),U=Wa(D),Y={method:"POST",headers:P,body:JSON.stringify(U)};let Q;try{Q=yield(yield fetch(Eo(I.appConfig),Y)).json()}catch(ke){throw Gn.create("token-subscribe-failed",{errorInfo:ke})}if(Q.error)throw Gn.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw Gn.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function Cr(I,D){return bo.apply(this,arguments)}function bo(){return(bo=(0,F.Z)(function*(I,D){const P=yield ia(I),U=Wa(D.subscriptionOptions),Y={method:"PATCH",headers:P,body:JSON.stringify(U)};let Q;try{Q=yield(yield fetch(`${Eo(I.appConfig)}/${D.token}`,Y)).json()}catch(ke){throw Gn.create("token-update-failed",{errorInfo:ke})}if(Q.error)throw Gn.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw Gn.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Gs(I,D){return gt.apply(this,arguments)}function gt(){return(gt=(0,F.Z)(function*(I,D){const U={method:"DELETE",headers:yield ia(I)};try{const Q=yield(yield fetch(`${Eo(I.appConfig)}/${D}`,U)).json();if(Q.error)throw Gn.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(Y){throw Gn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Eo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ia(I){return br.apply(this,arguments)}function br(){return(br=(0,F.Z)(function*({appConfig:I,installations:D}){const P=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Wa({p256dh:I,auth:D,endpoint:P,vapidKey:U}){const Y={web:{endpoint:P,auth:D,p256dh:I}};return U!==Ru&&(Y.web.applicationPubKey=U),Y}const nc=6048e5;function Lu(I){return sa.apply(this,arguments)}function sa(){return(sa=(0,F.Z)(function*(I){const D=yield Or(I.swRegistration,I.vapidKey),P={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:xi(D.getKey("auth")),p256dh:xi(D.getKey("p256dh"))},U=yield Ld(I.firebaseDependencies);if(U){if(Uu(U.subscriptionOptions,P))return Date.now()>=U.createTime+nc?Ud(I,{token:U.token,createTime:Date.now(),subscriptionOptions:P}):U.token;try{yield Gs(I.firebaseDependencies,U.token)}catch(Y){console.warn(Y)}return oa(I.firebaseDependencies,P)}return oa(I.firebaseDependencies,P)})).apply(this,arguments)}function Te(I){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,F.Z)(function*(I){const D=yield Ld(I.firebaseDependencies);D&&(yield Gs(I.firebaseDependencies,D.token),yield pi(I.firebaseDependencies));const P=yield I.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Ud(I,D){return hn.apply(this,arguments)}function hn(){return(hn=(0,F.Z)(function*(I,D){try{const P=yield Cr(I.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:P,createTime:Date.now()});return yield hs(I.firebaseDependencies,U),P}catch(P){throw yield Te(I),P}})).apply(this,arguments)}function oa(I,D){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,F.Z)(function*(I,D){const U={token:yield ra(I,D),createTime:Date.now(),subscriptionOptions:D};return yield hs(I,U),U.token})).apply(this,arguments)}function Or(I,D){return fs.apply(this,arguments)}function fs(){return(fs=(0,F.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$i(D)})})).apply(this,arguments)}function Uu(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Vu(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Vd(I,D){if(!D.notification)return;I.notification={};const P=D.notification.title;P&&(I.notification.title=P);const U=D.notification.body;U&&(I.notification.body=U);const Y=D.notification.image;Y&&(I.notification.image=Y)}(D,I),function aa(I,D){!D.data||(I.data=D.data)}(D,I),function Io(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const P=D.fcmOptions.link;P&&(I.fcmOptions.link=P);const U=D.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(D,I),D}function Jn(I){return"object"==typeof I&&!!I&&Co in I}function Mi(I,D){const P=[];for(let U=0;U<I.length;U++)P.push(I.charAt(U)),U<D.length&&P.push(D.charAt(U));return P.join("")}function zi(I){return Gn.create("missing-app-config-values",{valueName:I})}Mi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Mi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Oi{constructor(D,P,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Bu(I){if(!I||!I.options)throw zi("App Configuration Object");if(!I.name)throw zi("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:P}=I;for(const U of D)if(!P[U])throw zi(U);return{appName:I.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:P,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Bd(I){return ua.apply(this,arguments)}function ua(){return(ua=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(kd,{scope:wo}),I.swRegistration.update().catch(()=>{})}catch(D){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Bf(I,D){return za.apply(this,arguments)}function za(){return(za=(0,F.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield Bd(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function la(I,D){return To.apply(this,arguments)}function To(){return(To=(0,F.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Ru)})).apply(this,arguments)}function Ka(){return(Ka=(0,F.Z)(function*(I,D){if(!navigator)throw Gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gn.create("permission-blocked");return yield la(I,null==D?void 0:D.vapidKey),yield Bf(I,null==D?void 0:D.serviceWorkerRegistration),Lu(I)})).apply(this,arguments)}function rc(I,D,P){return ic.apply(this,arguments)}function ic(){return(ic=(0,F.Z)(function*(I,D,P){const U=da(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:P[Co],message_name:P[Vf],message_time:P[Nd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function da(I){switch(I){case qs.NOTIFICATION_CLICKED:return"notification_open";case qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ya(){return(Ya=(0,F.Z)(function*(I,D){const P=D.data;if(!P.isFirebaseMessaging)return;I.onMessageHandler&&P.messageType===qs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Vu(P)):I.onMessageHandler.next(Vu(P)));const U=P.data;Jn(U)&&"1"===U[na]&&(yield rc(I,P.messageType,U))})).apply(this,arguments)}const Zu="@firebase/messaging",ju=I=>{const D=new Oi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function Zf(I,D){return Ya.apply(this,arguments)}(D,P)),D},Zd=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:U=>function ca(I,D){return Ka.apply(this,arguments)}(D,U)}};function Wn(){return cr.apply(this,arguments)}function cr(){return(cr=(0,F.Z)(function*(){try{yield(0,se.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Zg(){(0,oe._registerComponent)(new _e.wA("messaging",ju,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("messaging-internal",Zd,"PRIVATE")),(0,oe.registerVersion)(Zu,"0.9.13"),(0,oe.registerVersion)(Zu,"0.9.13","esm2017")}();const zs="analytics",qu="firebase_id",Hd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ps="https://www.googletagmanager.com/gtag/js",Pn=new ue.Yd("@firebase/analytics");function $f(I){return Promise.all(I.map(D=>D.catch(P=>P)))}function $d(I,D){const P=document.createElement("script");P.src=`${ps}?l=${I}&id=${D}`,P.async=!0,document.head.appendChild(P)}function Gd(I,D,P,U,Y,Q){return ac.apply(this,arguments)}function ac(){return(ac=(0,F.Z)(function*(I,D,P,U,Y,Q){const ke=U[Y];try{if(ke)yield D[ke];else{const lt=(yield $f(P)).find(bt=>bt.measurementId===Y);lt&&(yield D[lt.appId])}}catch(Ye){Pn.error(Ye)}I("config",Y,Q)})).apply(this,arguments)}function Wd(I,D,P,U,Y){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,F.Z)(function*(I,D,P,U,Y){try{let Q=[];if(Y&&Y.send_to){let ke=Y.send_to;Array.isArray(ke)||(ke=[ke]);const Ye=yield $f(P);for(const lt of ke){const bt=Ye.find(Tt=>Tt.measurementId===lt),Vt=bt&&D[bt.appId];if(!Vt){Q=[];break}Q.push(Vt)}}0===Q.length&&(Q=Object.values(D)),yield Promise.all(Q),I("event",U,Y||{})}catch(Q){Pn.error(Q)}})).apply(this,arguments)}function Tn(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(ps))return D;return null}const Xe=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wf=new class Xn{constructor(D={},P=1e3){this.throttleMetadata=D,this.intervalMillis=P}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,P){this.throttleMetadata[D]=P}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Xa(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function zd(I){return eu.apply(this,arguments)}function eu(){return(eu=(0,F.Z)(function*(I){var D;const{appId:P,apiKey:U}=I,Y={method:"GET",headers:Xa(U)},Q=Hd.replace("{app-id}",P),ke=yield fetch(Q,Y);if(200!==ke.status&&304!==ke.status){let Ye="";try{const lt=yield ke.json();(null===(D=lt.error)||void 0===D?void 0:D.message)&&(Ye=lt.error.message)}catch(lt){}throw Xe.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Ye})}return ke.json()})).apply(this,arguments)}function jg(I){return uc.apply(this,arguments)}function uc(){return(uc=(0,F.Z)(function*(I,D=Wf,P){const{appId:U,apiKey:Y,measurementId:Q}=I.options;if(!U)throw Xe.create("no-app-id");if(!Y){if(Q)return{measurementId:Q,appId:U};throw Xe.create("no-api-key")}const ke=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Wu;return setTimeout((0,F.Z)(function*(){Ye.abort()}),void 0!==P?P:6e4),Do({appId:U,apiKey:Y,measurementId:Q},ke,Ye,D)})).apply(this,arguments)}function Do(I,D,P){return dt.apply(this,arguments)}function dt(){return(dt=(0,F.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:P},U,Y=Wf){const{appId:Q,measurementId:ke}=I;try{yield Ao(U,D)}catch(Ye){if(ke)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:Q,measurementId:ke};throw Ye}try{const Ye=yield zd(I);return Y.deleteThrottleMetadata(Q),Ye}catch(Ye){if(!So(Ye)){if(Y.deleteThrottleMetadata(Q),ke)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:Q,measurementId:ke};throw Ye}const lt=503===Number(Ye.customData.httpStatus)?(0,se.$s)(P,Y.intervalMillis,30):(0,se.$s)(P,Y.intervalMillis),bt={throttleEndTimeMillis:Date.now()+lt,backoffCount:P+1};return Y.setThrottleMetadata(Q,bt),Pn.debug(`Calling attemptFetch again in ${lt} millis`),Do(I,bt,U,Y)}})).apply(this,arguments)}function Ao(I,D){return new Promise((P,U)=>{const Y=Math.max(D-Date.now(),0),Q=setTimeout(P,Y);I.addEventListener(()=>{clearTimeout(Q),U(Xe.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function So(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Wu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function zu(){return kn.apply(this,arguments)}function kn(){return(kn=(0,F.Z)(function*(){if(!(0,se.hl)())return Pn.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(I){return Pn.warn(Xe.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function tu(){return(tu=(0,F.Z)(function*(I,D,P,U,Y,Q,ke){var Ye;const lt=jg(I);lt.then(nn=>{P[nn.measurementId]=nn.appId,I.options.measurementId&&nn.measurementId!==I.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nn=>Pn.error(nn)),D.push(lt);const bt=zu().then(nn=>{if(nn)return U.getId()}),[Vt,Tt]=yield Promise.all([lt,bt]);Tn()||$d(Q,Vt.measurementId),Y("js",new Date);const Ir=null!==(Ye=null==ke?void 0:ke.config)&&void 0!==Ye?Ye:{};return Ir.origin="firebase",Ir.update=!0,null!=Tt&&(Ir[qu]=Tt),Y("config",Vt.measurementId,Ir),Vt.measurementId})).apply(this,arguments)}class Yu{constructor(D){this.app=D}_delete(){return delete Pi[this.app.options.appId],Promise.resolve()}}let Pi={},fa=[];const xo={};let Oo,mi,Mo="dataLayer",Po=!1;function Vn(I,D,P){!function Ki(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((U,Y)=>`(${Y+1}) ${U}`).join(" "),P=Xe.create("invalid-analytics-context",{errorInfo:D});Pn.warn(P.message)}}();const U=I.options.appId;if(!U)throw Xe.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Xe.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pi[U])throw Xe.create("already-exists",{id:U});if(!Po){!function $u(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Mo);const{wrappedGtag:Q,gtagCore:ke}=function Gu(I,D,P,U,Y){let Q=function(...ke){window[U].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(Q=window[Y]),window[Y]=function Ja(I,D,P,U){function Q(){return(Q=(0,F.Z)(function*(ke,Ye,lt){try{"event"===ke?yield Wd(I,D,P,Ye,lt):"config"===ke?yield Gd(I,D,P,U,Ye,lt):I("set",Ye)}catch(bt){Pn.error(bt)}})).apply(this,arguments)}return function Y(ke,Ye,lt){return Q.apply(this,arguments)}}(Q,I,D,P),{gtagCore:Q,wrappedGtag:window[Y]}}(Pi,fa,xo,Mo,"gtag");mi=Q,Oo=ke,Po=!0}return Pi[U]=function Ku(I,D,P,U,Y,Q,ke){return tu.apply(this,arguments)}(I,fa,xo,D,Oo,Mo,P),new Yu(I)}function _s(){return(_s=(0,F.Z)(function*(I,D,P,U,Y){if(Y&&Y.global)I("event",P,U);else{const Q=yield D;I("event",P,Object.assign(Object.assign({},U),{send_to:Q}))}})).apply(this,arguments)}function pa(){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,F.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(I){return!1}})).apply(this,arguments)}const Ys="@firebase/analytics";!function Dn(){(0,oe._registerComponent)(new _e.wA(zs,(D,{options:P})=>Vn(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,oe._registerComponent)(new _e.wA("analytics-internal",function I(D){try{const P=D.getProvider(zs).getImmediate();return{logEvent:(U,Y,Q)=>function ti(I,D,P,U){I=(0,se.m9)(I),function lc(I,D,P,U,Y){return _s.apply(this,arguments)}(mi,Pi[I.app.options.appId],D,P,U).catch(Y=>Pn.error(Y))}(P,U,Y,Q)}}catch(P){throw Xe.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,oe.registerVersion)(Ys,"0.7.9"),(0,oe.registerVersion)(Ys,"0.7.9","esm2017")}();var Qs=R(4408),qg=R(7565);const hr=new class Hg extends qg.v{}(class ga extends Qs.o{constructor(D,P){super(D,P),this.scheduler=D,this.work=P}schedule(D,P=0){return P>0?super.schedule(D,P):(this.delay=P,this.state=D,this.scheduler.flush(this),this)}execute(D,P){return P>0||this.closed?super.execute(D,P):this._execute(D,P)}requestAsyncId(D,P,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,P,U):D.flush(this)}});var Qd=R(4986),Ju=R(8505),Js=R(9468),hc=R(5363);const Jd=new a.GfV("7.3.0"),Xu="__angularfire_symbol__analyticsIsSupportedValue",Xd="__angularfire_symbol__analyticsIsSupported",eh="__angularfire_symbol__remoteConfigIsSupportedValue",Xs="__angularfire_symbol__remoteConfigIsSupported",ht="__angularfire_symbol__messagingIsSupportedValue",ru="__angularfire_symbol__messagingIsSupported";function zf(I,D,P){if(D){if(1===D.length)return D[0];const Q=D.filter(ke=>ke.app===P);if(1===Q.length)return Q[0]}return P.container.getProvider(I).getImmediate({optional:!0})}globalThis[Xd]||(globalThis[Xd]=pa().then(I=>globalThis[Xu]=I).catch(()=>globalThis[Xu]=!1)),globalThis[ru]||(globalThis[ru]=Wn().then(I=>globalThis[ht]=I).catch(()=>globalThis[ht]=!1)),globalThis[Xs]||(globalThis[Xs]=Pd().then(I=>globalThis[eh]=I).catch(()=>globalThis[eh]=!1));const Kf=(I,D)=>{const P=D?[D]:(0,ee.C6)(),U=[];return P.forEach(Y=>{Y.container.getProvider(I).instances.forEach(ke=>{U.includes(ke)||U.push(ke)})}),U};function Pr(){}class el{constructor(D,P=hr){this.zone=D,this.delegate=P}now(){return this.delegate.now()}schedule(D,P,U){const Y=this.zone;return this.delegate.schedule(function(ke){Y.runGuarded(()=>{D.apply(this,[ke])})},P,U)}}class pc{constructor(D){this.zone=D,this.task=null}call(D,P){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pr,{},Pr,Pr)),P.pipe((0,Ju.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tl=(()=>{class I{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new el(Zone.current)),this.insideAngular=P.run(()=>new el(Zone.current,Qd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(P){return new(P||I)(a.LFG(a.R0b))},I.\u0275prov=a.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Cs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function iu(I){return Cs(),function nh(I){return function(P){return(P=P.lift(new pc(I.ngZone))).pipe((0,Js.R)(I.outsideAngular),(0,hc.Q)(I.insideAngular))}}(Cs())(I)}},2090:(ze,we,R)=>{R.d(we,{BH:()=>qe,LL:()=>ie,ZR:()=>Me,gQ:()=>Mr,zI:()=>ne,hu:()=>ee,g5:()=>F,US:()=>_e,tV:()=>he,h$:()=>ue,L:()=>ae,$s:()=>Lt,r3:()=>ci,Sg:()=>Ie,ne:()=>Pe,p$:()=>j,vZ:()=>Ur,ZB:()=>G,gK:()=>Ai,pd:()=>di,m9:()=>Yr,z$:()=>Ne,GJ:()=>rn,jU:()=>pe,ru:()=>Oe,d:()=>Fe,xb:()=>Qn,w1:()=>Ke,hl:()=>Ce,uI:()=>Be,UG:()=>fe,Yr:()=>Je,b$:()=>Ze,G6:()=>We,Mn:()=>De,w9:()=>ar,cI:()=>Cn,UI:()=>us,xO:()=>xn,zd:()=>ls,DV:()=>zr,ug:()=>Wt,dS:()=>Ua,Pz:()=>nt,Dv:()=>Fs,Wj:()=>bn,lb:()=>Kr,eu:()=>H});const ee=function(Z,W){if(!Z)throw F(W)},F=function(Z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Z)},oe=function(Z){const W=[];let z=0;for(let be=0;be<Z.length;be++){let $=Z.charCodeAt(be);$<128?W[z++]=$:$<2048?(W[z++]=$>>6|192,W[z++]=63&$|128):55296==(64512&$)&&be+1<Z.length&&56320==(64512&Z.charCodeAt(be+1))?($=65536+((1023&$)<<10)+(1023&Z.charCodeAt(++be)),W[z++]=$>>18|240,W[z++]=$>>12&63|128,W[z++]=$>>6&63|128,W[z++]=63&$|128):(W[z++]=$>>12|224,W[z++]=$>>6&63|128,W[z++]=63&$|128)}return W},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,W){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let $=0;$<Z.length;$+=3){const X=Z[$],Ae=$+1<Z.length,et=Ae?Z[$+1]:0,Ct=$+2<Z.length,Ot=Ct?Z[$+2]:0;let Vr=(15&et)<<2|Ot>>6,Qr=63&Ot;Ct||(Qr=64,Ae||(Vr=64)),be.push(z[X>>2],z[(3&X)<<4|et>>4],z[Vr],z[Qr])}return be.join("")},encodeString(Z,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(Z):this.encodeByteArray(oe(Z),W)},decodeString(Z,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(Z):function(Z){const W=[];let z=0,be=0;for(;z<Z.length;){const $=Z[z++];if($<128)W[be++]=String.fromCharCode($);else if($>191&&$<224){const X=Z[z++];W[be++]=String.fromCharCode((31&$)<<6|63&X)}else if($>239&&$<365){const Ct=((7&$)<<18|(63&Z[z++])<<12|(63&Z[z++])<<6|63&Z[z++])-65536;W[be++]=String.fromCharCode(55296+(Ct>>10)),W[be++]=String.fromCharCode(56320+(1023&Ct))}else{const X=Z[z++],Ae=Z[z++];W[be++]=String.fromCharCode((15&$)<<12|(63&X)<<6|63&Ae)}}return W.join("")}(this.decodeStringToByteArray(Z,W))},decodeStringToByteArray(Z,W){this.init_();const z=W?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let $=0;$<Z.length;){const X=z[Z.charAt($++)],et=$<Z.length?z[Z.charAt($)]:0;++$;const Ot=$<Z.length?z[Z.charAt($)]:64;++$;const At=$<Z.length?z[Z.charAt($)]:64;if(++$,null==X||null==et||null==Ot||null==At)throw Error();be.push(X<<2|et>>4),64!==Ot&&(be.push(et<<4&240|Ot>>2),64!==At&&be.push(Ot<<6&192|At))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},ue=function(Z){const W=oe(Z);return _e.encodeByteArray(W,!0)},ae=function(Z){return ue(Z).replace(/\./g,"")},he=function(Z){try{return _e.decodeString(Z,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function j(Z){return G(void 0,Z)}function G(Z,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return W}for(const z in W)!W.hasOwnProperty(z)||!re(z)||(Z[z]=G(Z[z],W[z]));return Z}function re(Z){return"__proto__"!==Z}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,z)=>{this.resolve=W,this.reject=z})}wrapCallback(W){return(z,be)=>{z?this.reject(z):this.resolve(be),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(z):W(z,be))}}}function Ie(Z,W){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=W||"demo-project",$=Z.iat||0,X=Z.sub||Z.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ae=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:$,exp:$+3600,auth_time:$,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ae)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Z){return!1}}function pe(){return"object"==typeof self&&self.self===self}function Oe(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Ne().indexOf("Electron/")>=0}function Ke(){const Z=Ne();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function De(){return Ne().indexOf("MSAppHost/")>=0}function Je(){return!1}function We(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ce(){return"object"==typeof indexedDB}function H(){return new Promise((Z,W)=>{try{let z=!0;const be="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(be);$.onsuccess=()=>{$.result.close(),z||self.indexedDB.deleteDatabase(be),Z(!0)},$.onupgradeneeded=()=>{z=!1},$.onerror=()=>{var X;W((null===(X=$.error)||void 0===X?void 0:X.message)||"")}}catch(z){W(z)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Me extends Error{constructor(W,z,be){super(z),this.code=W,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,Me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ie.prototype.create)}}class ie{constructor(W,z,be){this.service=W,this.serviceName=z,this.errors=be}create(W,...z){const be=z[0]||{},$=`${this.service}/${W}`,X=this.errors[W],Ae=X?function mt(Z,W){return Z.replace(Nt,(z,be)=>{const $=W[be];return null!=$?String($):`<${be}?>`})}(X,be):"Error";return new Me($,`${this.serviceName}: ${Ae} (${$}).`,be)}}const Nt=/\{\$([^}]+)}/g;function Cn(Z){return JSON.parse(Z)}function nt(Z){return JSON.stringify(Z)}const Et=function(Z){let W={},z={},be={},$="";try{const X=Z.split(".");W=Cn(he(X[0])||""),z=Cn(he(X[1])||""),$=X[2],be=z.d||{},delete z.d}catch(X){}return{header:W,claims:z,data:be,signature:$}},ar=function(Z){const z=Et(Z).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},rn=function(Z){const W=Et(Z).claims;return"object"==typeof W&&!0===W.admin};function ci(Z,W){return Object.prototype.hasOwnProperty.call(Z,W)}function zr(Z,W){if(Object.prototype.hasOwnProperty.call(Z,W))return Z[W]}function Qn(Z){for(const W in Z)if(Object.prototype.hasOwnProperty.call(Z,W))return!1;return!0}function us(Z,W,z){const be={};for(const $ in Z)Object.prototype.hasOwnProperty.call(Z,$)&&(be[$]=W.call(z,Z[$],$,Z));return be}function Ur(Z,W){if(Z===W)return!0;const z=Object.keys(Z),be=Object.keys(W);for(const $ of z){if(!be.includes($))return!1;const X=Z[$],Ae=W[$];if(Kt(X)&&Kt(Ae)){if(!Ur(X,Ae))return!1}else if(X!==Ae)return!1}for(const $ of be)if(!z.includes($))return!1;return!0}function Kt(Z){return null!==Z&&"object"==typeof Z}function xn(Z){const W=[];for(const[z,be]of Object.entries(Z))Array.isArray(be)?be.forEach($=>{W.push(encodeURIComponent(z)+"="+encodeURIComponent($))}):W.push(encodeURIComponent(z)+"="+encodeURIComponent(be));return W.length?"&"+W.join("&"):""}function ls(Z){const W={};return Z.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[$,X]=be.split("=");W[decodeURIComponent($)]=decodeURIComponent(X)}}),W}function di(Z){const W=Z.indexOf("?");if(!W)return"";const z=Z.indexOf("#",W);return Z.substring(W,z>0?z:void 0)}class Mr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,z){z||(z=0);const be=this.W_;if("string"==typeof W)for(let At=0;At<16;At++)be[At]=W.charCodeAt(z)<<24|W.charCodeAt(z+1)<<16|W.charCodeAt(z+2)<<8|W.charCodeAt(z+3),z+=4;else for(let At=0;At<16;At++)be[At]=W[z]<<24|W[z+1]<<16|W[z+2]<<8|W[z+3],z+=4;for(let At=16;At<80;At++){const Vr=be[At-3]^be[At-8]^be[At-14]^be[At-16];be[At]=4294967295&(Vr<<1|Vr>>>31)}let Ot,sn,$=this.chain_[0],X=this.chain_[1],Ae=this.chain_[2],et=this.chain_[3],Ct=this.chain_[4];for(let At=0;At<80;At++){At<40?At<20?(Ot=et^X&(Ae^et),sn=1518500249):(Ot=X^Ae^et,sn=1859775393):At<60?(Ot=X&Ae|et&(X|Ae),sn=2400959708):(Ot=X^Ae^et,sn=3395469782);const Vr=($<<5|$>>>27)+Ot+Ct+sn+be[At]&4294967295;Ct=et,et=Ae,Ae=4294967295&(X<<30|X>>>2),X=$,$=Vr}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+X&4294967295,this.chain_[2]=this.chain_[2]+Ae&4294967295,this.chain_[3]=this.chain_[3]+et&4294967295,this.chain_[4]=this.chain_[4]+Ct&4294967295}update(W,z){if(null==W)return;void 0===z&&(z=W.length);const be=z-this.blockSize;let $=0;const X=this.buf_;let Ae=this.inbuf_;for(;$<z;){if(0===Ae)for(;$<=be;)this.compress_(W,$),$+=this.blockSize;if("string"==typeof W){for(;$<z;)if(X[Ae]=W.charCodeAt($),++Ae,++$,Ae===this.blockSize){this.compress_(X),Ae=0;break}}else for(;$<z;)if(X[Ae]=W[$],++Ae,++$,Ae===this.blockSize){this.compress_(X),Ae=0;break}}this.inbuf_=Ae,this.total_+=z}digest(){const W=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&z,z/=256;this.compress_(this.buf_);let be=0;for(let $=0;$<5;$++)for(let X=24;X>=0;X-=8)W[be]=this.chain_[$]>>X&255,++be;return W}}function Pe(Z,W){const z=new ut(Z,W);return z.subscribe.bind(z)}class ut{constructor(W,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{W(this)}).catch(be=>{this.error(be)})}next(W){this.forEachObserver(z=>{z.next(W)})}error(W){this.forEachObserver(z=>{z.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,z,be){let $;if(void 0===W&&void 0===z&&void 0===be)throw new Error("Missing Observer.");$=function Mn(Z,W){if("object"!=typeof Z||null===Z)return!1;for(const z of W)if(z in Z&&"function"==typeof Z[z])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:z,complete:be},void 0===$.next&&($.next=Yt),void 0===$.error&&($.error=Yt),void 0===$.complete&&($.complete=Yt);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Ae){}}),this.observers.push($),X}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,W)}sendOne(W,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{z(this.observers[W])}catch(be){"undefined"!=typeof console&&console.error&&console.error(be)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yt(){}const Fs=function(Z,W,z,be){let $;if(be<W?$="at least "+W:be>z&&($=0===z?"none":"no more than "+z),$)throw new Error(Z+" failed: Was called with "+be+(1===be?" argument.":" arguments.")+" Expects "+$+".")};function Ai(Z,W){return`${Z} failed: ${W} argument `}function bn(Z,W,z,be){if((!be||z)&&"function"!=typeof z)throw new Error(Ai(Z,W)+"must be a valid function.")}function Kr(Z,W,z,be){if((!be||z)&&("object"!=typeof z||null===z))throw new Error(Ai(Z,W)+"must be a valid context object.")}const Ua=function(Z){const W=[];let z=0;for(let be=0;be<Z.length;be++){let $=Z.charCodeAt(be);if($>=55296&&$<=56319){const X=$-55296;be++,ee(be<Z.length,"Surrogate pair missing trail surrogate."),$=65536+(X<<10)+(Z.charCodeAt(be)-56320)}$<128?W[z++]=$:$<2048?(W[z++]=$>>6|192,W[z++]=63&$|128):$<65536?(W[z++]=$>>12|224,W[z++]=$>>6&63|128,W[z++]=63&$|128):(W[z++]=$>>18|240,W[z++]=$>>12&63|128,W[z++]=$>>6&63|128,W[z++]=63&$|128)}return W},Wt=function(Z){let W=0;for(let z=0;z<Z.length;z++){const be=Z.charCodeAt(z);be<128?W++:be<2048?W+=2:be>=55296&&be<=56319?(W+=4,z++):W+=3}return W};function Lt(Z,W=1e3,z=2){const be=W*Math.pow(z,Z),$=Math.round(.5*be*(Math.random()-.5)*2);return Math.min(144e5,be+$)}function Yr(Z){return Z&&Z._delegate?Z._delegate:Z}},174:(ze,we,R)=>{var a=R(5e3);let ee=null;function F(){return ee}const ue=new a.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function he(){return(0,a.LFG)(G)}()},providedIn:"platform"}),n})();const j=new a.OlP("Location Initialized");let G=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){re()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){re()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ue))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function qe(){return new G((0,a.LFG)(ue))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Ie(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function pe(n){const e=(0,a.LFG)(ue).location;return new Ze((0,a.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const Oe=new a.OlP("appBaseHref");let Ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ie(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Be(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Be(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ae),a.LFG(Oe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ie(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ae),a.LFG(Oe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Ke=(()=>{class n{constructor(t,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(We(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function Je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Ie,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(a.LFG(fe),a.LFG(ae))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function De(){return new Ke((0,a.LFG)(fe),(0,a.LFG)(ae))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Zero=0]="Zero",ne[ne.One=1]="One",ne[ne.Two=2]="Two",ne[ne.Few=3]="Few",ne[ne.Many=4]="Many",ne[ne.Other=5]="Other",ne))();const di=a.kL8;class Qt{}let yn=(()=>{class n extends Qt{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(di(r||this.locale)(t)){case ne.Zero:return"zero";case ne.One:return"one";case ne.Two:return"two";case ne.Few:return"few";case ne.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Jo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class vo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let on=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new vo(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),Xo(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Xo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Xo(n,e){n.context.$implicit=e.item}let cn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Td("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Td("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dn{constructor(){this.$implicit=null,this.ngIf=null}}function Td(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(e)}'.`)}let na=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:Qt,useClass:yn}]}),n})();function $a(n){return"server"===n}let Ga=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new Bg((0,a.LFG)(ue),window)}),n})();class Bg{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Gi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=En(this.window.history)||En(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function En(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class In{}class $s extends class Ld extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){ee||(ee=n)}(new $s)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wr(){return hs=hs||document.querySelector("base"),hs?hs.getAttribute("href"):null}();return null==t?null:function Wi(n){pi=pi||document.createElement("a"),pi.setAttribute("href",n);const e=pi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Jo(document.cookie,e)}}let pi,hs=null;const Br=new a.OlP("TRANSITION_ID"),Gn=[{provide:a.ip1,useFactory:function Zr(n,e,t){return()=>{t.get(a.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Br,ue,a.zs3],multi:!0}];class ra{static init(){(0,a.VLi)(new ra)}addToWindow(e){a.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},a.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let tc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Cr=new a.OlP("EventManagerPlugins");let bo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Cr),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Gs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let gt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Eo=(()=>{class n extends gt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ia),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ia))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ue))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function ia(n){F().remove(n)}const br={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wa=/%COMP%/g;function hn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?hn(n,i,t):(i=i.replace(Wa,n),t.push(i))}return t}function oa(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Or=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Vd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case a.ifc.ShadowDom:return new aa(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=hn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(bo),a.LFG(Eo),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class fs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(br[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=br[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=br[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(a.JOm.DashCase|a.JOm.Important)?e.style.setProperty(t,r,i&a.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&a.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,oa(r)):this.eventManager.addEventListener(e,t,oa(r))}}class Vd extends fs{constructor(e,t,r,i){super(e),this.component=r;const u=hn(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Rt(n){return"_ngcontent-%COMP%".replace(Wa,n)}(i+"-"+r.id),this.hostAttr=function Ud(n){return"_nghost-%COMP%".replace(Wa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class aa extends fs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=hn(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Io=(()=>{class n extends Gs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ue))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Jn=["alt","control","meta","shift"],Bu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Oi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Bd=(()=>{class n extends Gs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Jn.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function ua(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&zi.hasOwnProperty(e)&&(e=zi[e]))}return Bu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Jn.forEach(u=>{u!=i&&Oi[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ue))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const ca=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function Bf(){$s.makeCurrent(),ra.init()},multi:!0},{provide:ue,useFactory:function la(){return(0,a.RDi)(document),document},deps:[]}]),Ka=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function za(){return new a.qLn},deps:[]},{provide:Cr,useClass:Io,multi:!0,deps:[ue,a.R0b,a.Lbi]},{provide:Cr,useClass:Bd,multi:!0,deps:[ue]},{provide:Or,useClass:Or,deps:[bo,Eo,a.AFp]},{provide:a.FYo,useExisting:Or},{provide:gt,useExisting:Eo},{provide:Eo,useClass:Eo,deps:[ue]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:bo,useClass:bo,deps:[Cr,a.R0b]},{provide:In,useClass:tc,deps:[]}];let rc=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:a.AFp,useValue:t.appId},{provide:Br,useExisting:a.AFp},Gn]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:Ka,imports:[na,a.hGG]}),n})();"undefined"!=typeof window&&window;var Tn=R(8996),gs=R(7669);function Xe(...n){const e=(0,gs.yG)(n);return(0,Tn.D)(n,e)}var ms=R(7579);class gi extends ms.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Xn=R(8306);const{isArray:Wf}=Array,{getPrototypeOf:Xa,prototype:zd,keys:eu}=Object;function jg(n){if(1===n.length){const e=n[0];if(Wf(e))return{args:e,keys:null};if(function uc(n){return n&&"object"==typeof n&&Xa(n)===zd}(e)){const t=eu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Do=R(4671),dt=R(4004);const{isArray:Ao}=Array;function Wu(n){return(0,dt.U)(e=>function So(n,e){return Ao(e)?n(...e):n(e)}(n,e))}function zu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var kn=R(5403),Ku=R(9672);function Pi(n,e,t){n?(0,Ku.f)(t,n,e):e()}const xo=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Mo=R(8189);function Oo(...n){return function Kd(){return(0,Mo.J)(1)}()((0,Tn.D)(n,(0,gs.yG)(n)))}var mi=R(8421);function Po(n){return new Xn.y(e=>{(0,mi.Xf)(n()).subscribe(e)})}var nu=R(515),Ki=R(727),Vn=R(4482);function lc(){return(0,Vn.e)((n,e)=>{let t=null;n._refCount++;const r=new kn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class _s extends Xn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ki.w0;const t=this.getSubject();e.add(this.source.subscribe(new kn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ki.w0.EMPTY)}return e}refCount(){return lc()(this)}}function er(n,e){return(0,Vn.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe(new kn.Q(r,y=>{null==i||i.unsubscribe();let C=0;const A=u++;(0,mi.Xf)(n(y,A)).subscribe(i=new kn.Q(r,S=>r.next(e?e(y,S,A,C++):S),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var tn=R(5698);function ys(...n){const e=(0,gs.yG)(n);return(0,Vn.e)((t,r)=>{(e?Oo(n,t,e):Oo(n,t)).subscribe(r)})}function Yi(n,e,t,r,i){return(u,c)=>{let p=t,y=e,C=0;u.subscribe(new kn.Q(c,A=>{const S=C++;y=p?n(y,A,S):(p=!0,A),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function Ks(n,e){return(0,Vn.e)(Yi(n,e,arguments.length>=2,!0))}function Er(n,e){return(0,Vn.e)((t,r)=>{let i=0;t.subscribe(new kn.Q(r,u=>n.call(e,u,i++)&&r.next(u)))})}function ei(n){return(0,Vn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe(new kn.Q(t,void 0,void 0,c=>{u=(0,mi.Xf)(n(c,ei(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var dr=R(5577),Yd=R(576);function un(n,e){return(0,Yd.m)(e)?(0,dr.z)(n,e,1):(0,dr.z)(n,1)}function pa(n){return n<=0?()=>nu.E:(0,Vn.e)((e,t)=>{let r=[];e.subscribe(new kn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qu(n=cc){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cc(){return new xo}function dc(n){return(0,Vn.e)((e,t)=>{let r=!1;e.subscribe(new kn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ko(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((i,u)=>n(i,u,r)):Do.y,(0,tn.q)(1),t?dc(e):Qu(()=>new xo))}var ti=R(8505);class vs{constructor(e,t){this.id=e,this.url=t}}class Dn extends vs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qs extends vs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ga extends vs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qg extends vs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hg extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hr extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ws extends vs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qd extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ju extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Js{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hc{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jd{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eh{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xs{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ht="primary";class ru{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ni(n){return new ru(n)}const th="ngNavigationCancelingError";function fc(n){const e=Error("NavigationCancelingError: "+n);return e[th]=!0,e}function zf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Pr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!el(n[i],e[i]))return!1;return!0}function el(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function pc(n){return Array.prototype.concat.apply([],n)}function tl(n){return n.length>0?n[n.length-1]:null}function tr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Bn(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):Xe(n)}const gc={exact:function su(n,e,t){if(!lt(n.segments,e.segments)||!U(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!su(n.children[r],e.children[r],t))return!1;return!0},subset:D},iu={exact:function mc(n,e){return Pr(n,e)},subset:function I(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>el(n[t],e[t]))},ignored:()=>!0};function nh(n,e,t){return gc[t.paths](n.root,e.root,t.matrixParams)&&iu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function D(n,e,t){return P(n,e,e.segments,t)}function P(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!lt(i,t)||e.hasChildren()||!U(i,t,r))}if(n.segments.length===t.length){if(!lt(n.segments,t)||!U(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!D(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(lt(n.segments,i)&&U(n.segments,i,r)&&n.children[ht])&&P(n.children[ht],e,u,r)}}function U(n,e,t){return e.every((r,i)=>iu[t](n[i].parameters,r.parameters))}class Y{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ni(this.queryParams)),this._queryParamMap}toString(){return Ir.serialize(this)}}class Q{constructor(e,t){this.segments=e,this.children=t,this.parent=null,tr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nn(this)}}class ke{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ni(this.parameters)),this._parameterMap}toString(){return Gg(this)}}function lt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Vt{}class Tt{parse(e){const t=new Ny(e);return new Y(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${bs(e.root,!0)}`,r=function ma(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${eo(t)}=${eo(i)}`).join("&"):`${eo(t)}=${eo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Qi(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ir=new Tt;function nn(n){return n.segments.map(e=>Gg(e)).join("/")}function bs(n,e){if(!n.hasChildren())return nn(n);if(e){const t=n.children[ht]?bs(n.children[ht],!1):"",r=[];return tr(n.children,(i,u)=>{u!==ht&&r.push(`${u}:${bs(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bt(n,e){let t=[];return tr(n.children,(r,i)=>{i===ht&&(t=t.concat(e(r,i)))}),tr(n.children,(r,i)=>{i!==ht&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ht?[bs(n.children[ht],!1)]:[`${i}:${bs(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ht]?`${nn(n)}/${t[0]}`:`${nn(n)}/(${t.join("//")})`}}function ki(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eo(n){return ki(n).replace(/%3B/gi,";")}function _i(n){return ki(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function to(n){return decodeURIComponent(n)}function ou(n){return to(n.replace(/\+/g,"%20"))}function Gg(n){return`${_i(n.path)}${function Py(n){return Object.keys(n).map(e=>`;${_i(e)}=${_i(n[e])}`).join("")}(n.parameters)}`}const au=/^[^\/()?;=#]+/;function rl(n){const e=n.match(au);return e?e[0]:""}const sC=/^[^=?&#]+/,Wg=/^[^&#]+/;class Ny{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ht]=new Q(e,t)),r}parseSegment(){const e=rl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ke(to(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rl(this.remaining);i&&(r=i,this.capture(r))}e[to(t)]=to(r)}parseQueryParam(e){const t=function rh(n){const e=n.match(sC);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function ky(n){const e=n.match(Wg);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=ou(t),u=ou(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=ht);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[ht]:new Q([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class zg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_c(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_c(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=il(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return il(e,this._root).map(t=>t.value)}}function _c(n,e){if(n===e.value)return e;for(const t of e.children){const r=_c(n,t);if(r)return r}return null}function il(n,e){if(n===e.value)return[e];for(const t of e.children){const r=il(n,t);if(r.length)return r.unshift(e),r}return[]}class Es{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ni(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Kg extends zg{constructor(e,t){super(e),this.snapshot=t,ol(this,e)}toString(){return this.snapshot.toString()}}function Yg(n,e){const t=function Qg(n,e){const c=new uu([],{},{},"",{},ht,e,null,n.root,-1,{});return new ih("",new Es(c,[]))}(n,e),r=new gi([new ke("",{})]),i=new gi({}),u=new gi({}),c=new gi({}),p=new gi(""),y=new No(r,i,c,p,u,ht,e,t.root);return y.snapshot=t.root,new Kg(new Es(y,[]),t)}class No{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>ni(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>ni(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function yc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uu{constructor(e,t,r,i,u,c,p,y,C,A,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=C,this._lastPathIndex=A,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ni(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ni(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ih extends zg{constructor(e,t){super(t),this.url=e,ol(this,t)}toString(){return Jg(this._root)}}function ol(n,e){e.value._routerState=n,e.children.forEach(t=>ol(n,t))}function Jg(n){const e=n.children.length>0?` { ${n.children.map(Jg).join(", ")} } `:"";return`${n.value}${e}`}function sh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Pr(e.params,t.params)||n.params.next(t.params),function Kf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Pr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function oh(n,e){const t=Pr(n.params,e.params)&&function Ye(n,e){return lt(n,e)&&n.every((t,r)=>Pr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||oh(n.parent,e.parent))}function vc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ro(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vc(n,r,i);return vc(n,r)})}(n,e,t);return new Es(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>vc(n,p)),c}}const r=function lu(n){return new No(new gi(n.url),new gi(n.params),new gi(n.queryParams),new gi(n.fragment),new gi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>vc(n,u));return new Es(r,i)}}function Yf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ah(n){return"object"==typeof n&&null!=n&&n.outlets}function uh(n,e,t,r,i){let u={};return r&&tr(r,(c,p)=>{u[p]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),new Y(t.root===n?e:Fy(t.root,n,e),u,i)}function Fy(n,e,t){const r={};return tr(n.children,(i,u)=>{r[u]=i===e?t:Fy(i,e,t)}),new Q(n.segments,r)}class Ly{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yf(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ah);if(i&&i!==tl(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function By(n,e,t){if(n||(n=new Q([],{})),0===n.segments.length&&n.hasChildren())return ch(n,e,t);const r=function dh(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(ah(p))break;const y=`${p}`,C=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&C&&"object"==typeof C&&void 0===C.outlets){if(!wc(y,C,c))return u;r+=2}else{if(!wc(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Q(n.segments.slice(0,r.pathIndex),{});return u.children[ht]=new Q(n.segments.slice(r.pathIndex),n.children),ch(u,0,i)}return r.match&&0===i.length?new Q(n.segments,{}):r.match&&!n.hasChildren()?hh(n,e,t):r.match?ch(n,0,i):hh(n,e,t)}function ch(n,e,t){if(0===t.length)return new Q(n.segments,{});{const r=function Vy(n){return ah(n[0])?n[0].outlets:{[ht]:n}}(t),i={};return tr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=By(n.children[c],e,u))}),tr(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Q(n.segments,i)}}function hh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(ah(u)){const y=no(u.outlets);return new Q(r,y)}if(0===i&&Yf(t[0])){r.push(new ke(n.segments[e].path,al(t[0]))),i++;continue}const c=ah(u)?u.outlets[ht]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&Yf(p)?(r.push(new ke(c,al(p))),i+=2):(r.push(new ke(c,{})),i++)}return new Q(r,{})}function no(n){const e={};return tr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=hh(new Q([],{}),0,t))}),e}function al(n){const e={};return tr(n,(t,r)=>e[r]=`${t}`),e}function wc(n,e,t){return n==t.path&&Pr(e,t.parameters)}class tm{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ni(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),tr(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ni(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ni(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ni(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new eh(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Xu(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(sh(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),sh(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function oC(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class nm{constructor(e,t){this.routes=e,this.module=t}}function cu(n){return"function"==typeof n}function Fo(n){return n instanceof Y}const Cc=Symbol("INITIAL_VALUE");function du(){return er(n=>function tu(...n){const e=(0,gs.yG)(n),t=(0,gs.jO)(n),{args:r,keys:i}=jg(n);if(0===r.length)return(0,Tn.D)([],e);const u=new Xn.y(function Yu(n,e,t=Do.y){return r=>{Pi(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)Pi(e,()=>{const C=(0,Tn.D)(n[y],e);let A=!1;C.subscribe(new kn.Q(r,S=>{u[y]=S,A||(A=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>zu(i,c):Do.y));return t?u.pipe(Wu(t)):u}(n.map(e=>e.pipe((0,tn.q)(1),ys(Cc)))).pipe(Ks((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Cc?i:(u===Cc&&(r=!0),r||!1!==u&&c!==t.length-1&&!Fo(u)?i:u),e)},Cc),Er(e=>e!==Cc),(0,dt.U)(e=>Fo(e)?e:!0===e),(0,tn.q)(1)))}class Zy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ul,this.attachRef=null}}class ul{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Zy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let gh=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=u||ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new ll(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(ul),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ll{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===No?this.route:e===ul?this.childContexts:this.parent.get(e,t)}}let rm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&a._UZ(0,"router-outlet")},directives:[gh],encapsulation:2}),n})();function bc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];im(r,nr(e,r))}}function im(n,e){n.children&&bc(n.children,e)}function nr(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ep(n){const e=n.children&&n.children.map(ep),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ht&&(t.component=rm),t}function Ji(n){return n.outlet||ht}function tp(n,e){const t=n.filter(r=>Ji(r)===e);return t.push(...n.filter(r=>Ji(r)!==e)),t}const Lo={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function mh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Lo):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||zf)(t,n,e);if(!u)return Object.assign({},Lo);const c={};tr(u.posParams,(y,C)=>{c[C]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function _h(n,e,t,r,i="corrected"){if(t.length>0&&function rp(n,e,t){return t.some(r=>ip(n,e,r)&&Ji(r)!==ht)}(n,t,r)){const c=new Q(e,function jy(n,e,t,r){const i={};i[ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ji(u)!==ht){const c=new Q([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ji(u)]=c}return i}(n,e,r,new Q(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function lC(n,e,t){return t.some(r=>ip(n,e,r))}(n,t,r)){const c=new Q(n.segments,function np(n,e,t,r,i,u){const c={};for(const p of r)if(ip(n,t,p)&&!i[Ji(p)]){const y=new Q([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Ji(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Q(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ip(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function _a(n,e,t,r){return!!(Ji(n)===r||r!==ht&&ip(e,t,n))&&("**"===n.path||mh(e,n,t).matched)}function jr(n,e,t){return 0===e.length&&!n.children[t]}class hu{constructor(e){this.segmentGroup=e||null}}class Ec{constructor(e){this.urlTree=e}}function Ic(n){return new Xn.y(e=>e.error(new hu(n)))}function kr(n){return new Xn.y(e=>e.error(new Ec(n)))}function Tc(n){return new Xn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class sm{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(a.h0i)}apply(){const e=_h(this.urlTree.root,[],[],this.config).segmentGroup,t=new Q(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ht).pipe((0,dt.U)(u=>this.createUrlTree(op(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ei(u=>{if(u instanceof Ec)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof hu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ht).pipe((0,dt.U)(i=>this.createUrlTree(op(i),e.queryParams,e.fragment))).pipe(ei(i=>{throw i instanceof hu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Q([],{[ht]:e}):e;return new Y(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(u=>new Q([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Tn.D)(i).pipe(un(u=>{const c=r.children[u],p=tp(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,dt.U)(y=>({segment:y,outlet:u})))}),Ks((u,c)=>(u[c.outlet]=c.segment,u),{}),function Oy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((i,u)=>n(i,u,r)):Do.y,pa(1),t?dc(e):Qu(()=>new xo))}())}expandSegment(e,t,r,i,u,c){return(0,Tn.D)(r).pipe(un(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(ei(C=>{if(C instanceof hu)return Xe(null);throw C}))),ko(p=>!!p),ei((p,y)=>{if(p instanceof xo||"EmptyError"===p.name){if(jr(t,i,u))return Xe(new Q([],{}));throw new hu(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return _a(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Ic(t):Ic(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?kr(u):this.lineralizeSegments(r,u).pipe((0,dr.z)(c=>{const p=new Q(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,lastChild:C,positionalParamSegments:A}=mh(t,i,u);if(!p)return Ic(t);const S=this.applyRedirectCommands(y,i.redirectTo,A);return i.redirectTo.startsWith("/")?kr(S):this.lineralizeSegments(i,S).pipe((0,dr.z)(k=>this.expandSegment(e,t,r,k.concat(u.slice(C)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,dt.U)(k=>(r._loadedConfig=k,new Q(i,{})))):Xe(new Q(i,{}));const{matched:c,consumedSegments:p,lastChild:y}=mh(t,r,i);if(!c)return Ic(t);const C=i.slice(y);return this.getChildConfig(e,r,i).pipe((0,dr.z)(S=>{const k=S.module,V=S.routes,{segmentGroup:K,slicedSegments:ve}=_h(t,p,C,V),Ue=new Q(K.segments,K.children);if(0===ve.length&&Ue.hasChildren())return this.expandChildren(k,V,Ue).pipe((0,dt.U)(wt=>new Q(p,wt)));if(0===V.length&&0===ve.length)return Xe(new Q(p,{}));const st=Ji(r)===u;return this.expandSegment(k,Ue,V,ve,st?ht:u,!0).pipe((0,dt.U)(vt=>new Q(p.concat(vt.segments),vt.children)))}))}getChildConfig(e,t,r){return t.children?Xe(new nm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,dr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,dt.U)(u=>(t._loadedConfig=u,u))):function sp(n){return new Xn.y(e=>e.error(fc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Xe(new nm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Xe(i.map(c=>{const p=e.get(c);let y;if(function Xf(n){return n&&cu(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!cu(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return Bn(y)})).pipe(du(),(0,ti.b)(c=>{if(!Fo(c))return;const p=fc(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,dt.U)(c=>!0===c)):Xe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[ht])return Tc(e.redirectTo);i=i.children[ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Y(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return tr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return tr(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new Q(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function op(n){const e={};for(const r of Object.keys(n.children)){const u=op(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function yh(n){if(1===n.numberOfChildren&&n.children[ht]){const e=n.children[ht];return new Q(n.segments.concat(e.segments),e.children)}return n}(new Q(n.segments,e))}class vh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fu{constructor(e,t){this.component=e,this.route=t}}function Hy(n,e,t){const r=n._root;return Dc(r,e?e._root:null,t,[r.value])}function Uo(n,e,t){const r=function Gy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Dc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ni(e);return n.children.forEach(c=>{(function ap(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function am(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lt(n.url,e.url)||!Pr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oh(n,e)||!Pr(n.queryParams,e.queryParams);default:return!oh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new vh(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Dc(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new fu(p.outlet.component,c))}else c&&Ac(e,p,i),i.canActivateChecks.push(new vh(r)),Dc(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),tr(u,(c,p)=>Ac(c,t.getContext(p),i)),i}function Ac(n,e,t){const r=Ni(n),i=n.value;tr(r,(u,c)=>{Ac(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new fu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Qy{}function cm(n){return new Xn.y(e=>e.error(n))}class wh{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=_h(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ht);if(null===t)return null;const r=new uu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ht,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Es(r,t),u=new ih(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=sl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=tp(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const i=Vo(r);return function up(n){n.sort((e,t)=>e.value.outlet===ht?-1:t.value.outlet===ht?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return jr(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!_a(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const V=r.length>0?tl(r).parameters:{};u=new uu(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ch(e),Ji(e),e.component,e,Ri(t),Mc(t)+r.length,Xy(e))}else{const V=mh(t,e,r);if(!V.matched)return null;c=V.consumedSegments,p=r.slice(V.lastChild),u=new uu(c,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ch(e),Ji(e),e.component,e,Ri(t),Mc(t)+c.length,Xy(e))}const y=function hm(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:A}=_h(t,c,p,y.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===A.length&&C.hasChildren()){const V=this.processChildren(y,C);return null===V?null:[new Es(u,V)]}if(0===y.length&&0===A.length)return[new Es(u,[])];const S=Ji(e)===i,k=this.processSegment(y,C,A,S?ht:i);return null===k?null:[new Es(u,k)]}}function Jy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Vo(n){const e=[],t=new Set;for(const r of n){if(!Jy(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Vo(r.children);e.push(new Es(r.value,i))}return e.filter(r=>!t.has(r))}function Ri(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Mc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Ch(n){return n.data||{}}function Xy(n){return n.resolve||{}}function yi(n){return er(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,dt.U)(()=>e)):Xe(e)})}class dp extends class gm{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Pc=new a.OlP("ROUTES");class bh{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,dt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new nm(pc(c.injector.get(Pc,void 0,a.XFs.Self|a.XFs.Optional)).map(ep),c)}),ei(u=>{throw t._loader$=void 0,u}));return t._loader$=new _s(i,()=>new ms.x).pipe(lc()),t._loader$}loadModuleFactory(e){return Bn(e()).pipe((0,dr.z)(t=>t instanceof a.YKP?Xe(t):(0,Tn.D)(this.compiler.compileModuleAsync(t))))}}class ya{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kc(n){throw n}function mm(n,e,t){return e.parse("/")}function ro(n,e){return Xe(null)}const pu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_m={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vi=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ms.x,this.errorHandler=kc,this.malformedUriErrorHandler=mm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ro,afterPreactivation:ro},this.urlHandlingStrategy=new ya,this.routeReuseStrategy=new dp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(a.h0i),this.console=c.get(a.c2e);const S=c.get(a.R0b);this.isNgZoneEnabled=S instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function nl(){return new Y(new Q([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bh(c,p,k=>this.triggerEvent(new Js(k)),k=>this.triggerEvent(new hc(k))),this.routerState=Yg(this.currentUrlTree,this.rootComponentType),this.transitions=new gi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Er(i=>0!==i.id),(0,dt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),er(i=>{let u=!1,c=!1;return Xe(i).pipe((0,ti.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),er(p=>{const y=this.browserUrlTree.toString(),C=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return cl(p.source)&&(this.browserUrlTree=p.extractedUrl),Xe(p).pipe(er(S=>{const k=this.transitions.getValue();return r.next(new Dn(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?nu.E:Promise.resolve(S)}),function om(n,e,t,r){return er(i=>function qy(n,e,t,r,i){return new sm(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,dt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ti.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function Xi(n,e,t,r,i){return(0,dr.z)(u=>function dm(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new wh(n,e,t,r,i,u).recognize();return null===c?cm(new Qy):Xe(c)}catch(c){return cm(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,dt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ti.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new Hg(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:V,source:K,restoredState:ve,extras:Ue}=p,st=new Dn(k,this.serializeUrl(V),K,ve);r.next(st);const It=Yg(V,this.rootComponentType).snapshot;return Xe(Object.assign(Object.assign({},p),{targetSnapshot:It,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),nu.E}),yi(p=>{const{targetSnapshot:y,id:C,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:V}}=p;return this.hooks.beforePreactivation(y,{navigationId:C,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!V})}),(0,ti.b)(p=>{const y=new hr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,dt.U)(p=>Object.assign(Object.assign({},p),{guards:Hy(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Sc(n,e){return(0,dr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Xe(Object.assign(Object.assign({},t),{guardsResult:!0})):function Wy(n,e,t,r){return(0,Tn.D)(n).pipe((0,dr.z)(i=>function Yy(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Xe(u.map(p=>{const y=Uo(p,e,i);let C;if(function ph(n){return n&&cu(n.canDeactivate)}(y))C=Bn(y.canDeactivate(n,e,t,r));else{if(!cu(y))throw new Error("Invalid CanDeactivate guard");C=Bn(y(n,e,t,r))}return C.pipe(ko())})).pipe(du()):Xe(!0)}(i.component,i.route,t,e,r)),ko(i=>!0!==i,!0))}(c,r,i,n).pipe((0,dr.z)(p=>p&&function fh(n){return"boolean"==typeof n}(p)?function zy(n,e,t,r){return(0,Tn.D)(e).pipe(un(i=>Oo(function Ky(n,e){return null!==n&&e&&e(new Jd(n)),Xe(!0)}(i.route.parent,r),function xc(n,e){return null!==n&&e&&e(new Xd(n)),Xe(!0)}(i.route,r),function lm(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function $y(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Po(()=>Xe(c.guards.map(y=>{const C=Uo(y,c.node,t);let A;if(function uC(n){return n&&cu(n.canActivateChild)}(C))A=Bn(C.canActivateChild(r,n));else{if(!cu(C))throw new Error("Invalid CanActivateChild guard");A=Bn(C(r,n))}return A.pipe(ko())})).pipe(du())));return Xe(u).pipe(du())}(n,i.path,t),function um(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(u=>Po(()=>{const c=Uo(u,e,t);let p;if(function aC(n){return n&&cu(n.canActivate)}(c))p=Bn(c.canActivate(e,n));else{if(!cu(c))throw new Error("Invalid CanActivate guard");p=Bn(c(e,n))}return p.pipe(ko())}));return Xe(i).pipe(du())}(n,i.route,t))),ko(i=>!0!==i,!0))}(r,u,n,e):Xe(p)),(0,dt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,ti.b)(p=>{if(Fo(p.guardsResult)){const C=fc(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw C.url=p.guardsResult,C}const y=new ws(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Er(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),yi(p=>{if(p.guards.canActivateChecks.length)return Xe(p).pipe((0,ti.b)(y=>{const C=new Qd(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}),er(y=>{let C=!1;return Xe(y).pipe(function Oc(n,e){return(0,dr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);let u=0;return(0,Tn.D)(i).pipe(un(c=>function lp(n,e,t,r){return function fm(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Xe({});const u={};return(0,Tn.D)(i).pipe((0,dr.z)(c=>function pm(n,e,t,r){const i=Uo(n,e,r);return Bn(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,ti.b)(p=>{u[c]=p}))),pa(1),(0,dr.z)(()=>Object.keys(u).length===i.length?Xe(u):nu.E))}(n._resolve,n,e,r).pipe((0,dt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),sl(n,t).resolve),null)))}(c.route,r,n,e)),(0,ti.b)(()=>u++),pa(1),(0,dr.z)(c=>u===i.length?Xe(t):nu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ti.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ti.b)(y=>{const C=new Ju(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}))}),yi(p=>{const{targetSnapshot:y,id:C,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:V}}=p;return this.hooks.afterPreactivation(y,{navigationId:C,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!V})}),(0,dt.U)(p=>{const y=function Xg(n,e,t){const r=vc(n,e._root,t?t._root:void 0);return new Kg(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,ti.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new tm(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,ti.b)({next(){u=!0},complete(){u=!0}}),function Ys(n){return(0,Vn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),ei(p=>{if(c=!0,function $g(n){return n&&n[th]}(p)){const y=Fo(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const C=new ga(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(C),y?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cl(i.source)};this.scheduleNavigation(A,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new qg(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(C){i.reject(C)}}return nu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bc(t),this.config=t.map(ep),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,C=i||this.routerState.root,A=y?this.currentUrlTree.fragment:c;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function Ry(n,e,t,r,i){if(0===t.length)return uh(e.root,e.root,e,r,i);const u=function Qf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ly(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return tr(u.outlets,(y,C)=>{p[C]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Ly(t,e,r)}(t);if(u.toRoot())return uh(e.root,new Q([],{}),e,r,i);const c=function lh(n,e,t){if(n.isAbsolute)return new Jf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Jf(u,u===e.root,0)}const r=Yf(n.commands[0])?0:1;return function Uy(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Jf(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?ch(c.segmentGroup,c.index,u.commands):By(c.segmentGroup,c.index,u.commands);return uh(c.segmentGroup,p,e,r,i)}(C,this.currentUrlTree,t,S,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ev(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},pu):!1===r?Object.assign({},_m):r,Fo(t))return nh(this.currentUrlTree,t,i);const u=this.parseUrl(t);return nh(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Qs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,y,C;if(this.disposed)return Promise.resolve(!1);const A=this.transitions.value,S=cl(r)&&A&&!cl(A.source),k=A.rawUrl.toString()===t.toString(),V=A.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(S&&k&&V)return Promise.resolve(!0);let ve,Ue,st;c?(ve=c.resolve,Ue=c.reject,st=c.promise):st=new Promise((wt,Zt)=>{ve=wt,Ue=Zt});const It=++this.navigationId;let vt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),vt=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):vt=0,this.setTransition({id:It,targetPageId:vt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:ve,reject:Ue,promise:st,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),st.catch(wt=>Promise.reject(wt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new ga(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function cl(n){return"imperative"!==n}let Nc=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new ms.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:gu(this.skipLocationChange),replaceUrl:gu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(vi),a.Y36(No),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&a.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),n})(),hp=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ms.x,this.subscription=t.events.subscribe(u=>{u instanceof Qs&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:gu(this.skipLocationChange),replaceUrl:gu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(vi),a.Y36(No),a.Y36(fe))},n.\u0275dir=a.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&a.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&a.uIk("target",r.target)("href",r.href,a.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),n})();function gu(n){return""===n||!!n}let Eh=(()=>{class n{constructor(t,r,i,u,c,p){this.router=t,this.element=r,this.renderer=i,this.cdr=u,this.link=c,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new a.vpe,this.routerEventsSubscription=t.events.subscribe(y=>{y instanceof Qs&&this.update()})}ngAfterContentInit(){Xe(this.links.changes,this.linksWithHrefs.changes,Xe(null)).pipe((0,Mo.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Tn.D)(r).pipe((0,Mo.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function _(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(vi),a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(Nc,8),a.Y36(hp,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(a.Suo(i,Nc,5),a.Suo(i,hp,5)),2&t){let u;a.iGM(u=a.CRH())&&(r.links=u),a.iGM(u=a.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[a.TTD]}),n})();class f{}class w{preload(e,t){return Xe(null)}}let T=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new bh(i,r,y=>t.triggerEvent(new Js(y)),y=>t.triggerEvent(new hc(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Er(t=>t instanceof Qs),un(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(a.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Tn.D)(i).pipe((0,Mo.J)(),(0,dt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,dr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(vi),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(f))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),M=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Xs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const te=new a.OlP("ROUTER_CONFIGURATION"),Re=new a.OlP("ROUTER_FORROOT_GUARD"),Se=[Ke,{provide:Vt,useClass:Tt},{provide:vi,useFactory:function Ih(n,e,t,r,i,u,c={},p,y){const C=new vi(null,n,e,t,r,i,pc(u));return p&&(C.urlHandlingStrategy=p),y&&(C.routeReuseStrategy=y),function Rc(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,C),c.enableTracing&&C.events.subscribe(A=>{var S,k;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(k=console.groupEnd)||void 0===k||k.call(console)}),C},deps:[Vt,ul,Ke,a.zs3,a.Sil,Pc,te,[class Fi{},new a.FiY],[class cp{},new a.FiY]]},ul,{provide:No,useFactory:function Fc(n){return n.routerState.root},deps:[vi]},T,w,class g{preload(e,t){return t().pipe(ei(()=>Xe(null)))}},{provide:te,useValue:{enableTracing:!1}}];function Qe(){return new a.PXZ("Router",vi)}let it=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Se,mu(t),{provide:Re,useFactory:Zo,deps:[[vi,new a.FiY,new a.tp0]]},{provide:te,useValue:r||{}},{provide:fe,useFactory:fr,deps:[ae,[new a.tBr(Oe),new a.FiY],te]},{provide:M,useFactory:Ut,deps:[vi,Ga,te]},{provide:f,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:w},{provide:a.PXZ,multi:!0,useFactory:Qe},[dl,{provide:a.ip1,multi:!0,useFactory:Th,deps:[dl]},{provide:hl,useFactory:fp,deps:[dl]},{provide:a.tb,multi:!0,useExisting:hl}]]}}static forChild(t){return{ngModule:n,providers:[mu(t)]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Re,8),a.LFG(vi,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function Ut(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new M(n,e,t)}function fr(n,e,t={}){return t.useHash?new Fe(n,e):new Ze(n,e)}function Zo(n){return"guarded"}function mu(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:Pc,multi:!0,useValue:n}]}let dl=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ms.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(vi),c=this.injector.get(te);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(te),i=this.injector.get(T),u=this.injector.get(M),c=this.injector.get(vi),p=this.injector.get(a.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Th(n){return n.appInitializer.bind(n)}function fp(n){return n.bootstrapListener.bind(n)}const hl=new a.OlP("Router Initializer");let ym=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),Lc=(()=>{class n extends ym{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const jo=new a.OlP("NgValueAccessor"),W1={provide:jo,useExisting:(0,a.Gpc)(()=>pl),multi:!0},UT=new a.OlP("CompositionEventMode");let pl=(()=>{class n extends ym{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dC(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(UT,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&a.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[a._Bn([W1]),a.qOj]}),n})();function gl(n){return null==n||0===n.length}function hC(n){return null!=n&&"number"==typeof n.length}const Nn=new a.OlP("NgValidators"),ml=new a.OlP("NgAsyncValidators"),fC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ct{static min(e){return function pC(n){return e=>{if(gl(e.value)||gl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function gC(n){return e=>{if(gl(e.value)||gl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function mC(n){return gl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function rv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function _C(n){return gl(n.value)||fC.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function yC(n){return e=>gl(e.value)||!hC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function vC(n){return e=>hC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Mt(n){if(!n)return Ah;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(gl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return vm(e)}static composeAsync(e){return wm(e)}}function Ah(n){return null}function iv(n){return null!=n}function sv(n){const e=(0,a.QGY)(n)?(0,Tn.D)(n):n;return(0,a.CqO)(e),e}function pp(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function io(n,e){return e.map(t=>t(n))}function CC(n){return n.map(e=>function wC(n){return!n.validate}(e)?e:t=>e.validate(t))}function vm(n){if(!n)return null;const e=n.filter(iv);return 0==e.length?null:function(t){return pp(io(t,e))}}function qo(n){return null!=n?vm(CC(n)):null}function wm(n){if(!n)return null;const e=n.filter(iv);return 0==e.length?null:function(t){return function Dh(...n){const e=(0,gs.jO)(n),{args:t,keys:r}=jg(n),i=new Xn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,C=c;for(let A=0;A<c;A++){let S=!1;(0,mi.Xf)(t[A]).subscribe(new kn.Q(u,k=>{S||(S=!0,C--),p[A]=k},()=>y--,void 0,()=>{(!y||!S)&&(C||u.next(r?zu(r,p):p),u.complete())}))}});return e?i.pipe(Wu(e)):i}(io(t,e).map(sv)).pipe((0,dt.U)(pp))}}function Cm(n){return null!=n?wm(CC(n)):null}function bm(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VT(n){return n._rawValidators}function ov(n){return n._rawAsyncValidators}function bC(n){return n?Array.isArray(n)?n:[n]:[]}function Uc(n,e){return Array.isArray(n)?n.includes(e):n===e}function gp(n,e){const t=bC(e);return bC(n).forEach(i=>{Uc(t,i)||t.push(i)}),t}function Em(n,e){return bC(e).filter(t=>!Uc(n,t))}class Im{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qo(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class va extends Im{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class es extends Im{get formDirective(){return null}get path(){return null}}class EC{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let mp=(()=>{class n extends EC{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(va,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[a.qOj]}),n})(),Sh=(()=>{class n extends EC{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(es,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[a.qOj]}),n})();function so(n,e){_p(n,e),e.valueAccessor.writeValue(n.value),function uv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_u(n,e)})}(n,e),function SC(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ZT(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_u(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function AC(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xh(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),yp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Am(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _p(n,e){const t=VT(n);null!==e.validator?n.setValidators(bm(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ov(n);null!==e.asyncValidator?n.setAsyncValidators(bm(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Am(e._rawValidators,i),Am(e._rawAsyncValidators,i)}function yp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=VT(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=ov(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Am(e._rawValidators,r),Am(e._rawAsyncValidators,r),t}function _u(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Oh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const wa="VALID",Sm="INVALID",Bc="PENDING",Ph="DISABLED";function wp(n){return(xm(n)?n.validators:n)||null}function hv(n){return Array.isArray(n)?qo(n):n||null}function kh(n,e){return(xm(e)?e.asyncValidators:n)||null}function OC(n){return Array.isArray(n)?Cm(n):n||null}function xm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const PC=n=>n instanceof Li,Cp=n=>n instanceof Mm,fv=n=>n instanceof RC;function kC(n){return PC(n)?n.value:n.getRawValue()}function pv(n,e){const t=Cp(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new a.vHH(1e3,"");if(!r[e])throw new a.vHH(1001,"")}function NC(n,e){Cp(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new a.vHH(1002,"")})}class gv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=hv(this._rawValidators),this._composedAsyncValidatorFn=OC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===wa}get invalid(){return this.status===Sm}get pending(){return this.status==Bc}get disabled(){return this.status===Ph}get enabled(){return this.status!==Ph}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=hv(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=OC(e)}addValidators(e){this.setValidators(gp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Em(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Em(e,this._rawAsyncValidators))}hasValidator(e){return Uc(this._rawValidators,e)}hasAsyncValidator(e){return Uc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ph,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wa,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wa||this.status===Bc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ph:wa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bc,this._hasOwnPendingAsyncValidator=!0;const t=sv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function dv(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Cp(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:fv(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?Ph:this.errors?Sm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bc)?Bc:this._anyControlsHaveStatus(Sm)?Sm:wa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Li extends gv{constructor(e=null,t,r){super(wp(t),kh(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Oh(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Oh(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Mm extends gv{constructor(e,t,r){super(wp(t),kh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NC(this,e),Object.keys(e).forEach(r=>{pv(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=kC(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class RC extends gv{constructor(e,t,r){super(wp(t),kh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){NC(this,e),e.forEach((r,i)=>{pv(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>kC(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let bp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const BC={provide:jo,useExisting:(0,a.Gpc)(()=>vv),multi:!0};let Ho=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),yv=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:Ho}),n})(),vv=(()=>{class n extends Lc{constructor(t,r,i,u){super(t,r),this._registry=i,this._injector=u,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(va),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(yv),a.Y36(a.zs3))},n.\u0275dir=a.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&a.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[a._Bn([BC]),a.qOj]}),n})();const km=new a.OlP("NgModelWithFormControlWarning"),YT={provide:es,useExisting:(0,a.Gpc)(()=>yu)};let yu=(()=>{class n extends es{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new a.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return so(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){xh(t.control||null,t,!1),Oh(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Mh(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(xh(r||null,t),PC(i)&&(so(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function xC(n,e){_p(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function lv(n,e){return yp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_p(this.form,this),this._oldForm&&yp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Nn,10),a.Y36(ml,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&a.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([YT]),a.qOj,a.TTD]}),n})();const Cv={provide:va,useExisting:(0,a.Gpc)(()=>yl)};let yl=(()=>{class n extends va{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new a.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _l(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===pl?t=u:function jT(n){return Object.getPrototypeOf(n.constructor)===Lc}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function cv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function av(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(a.Y36(es,13),a.Y36(Nn,10),a.Y36(ml,10),a.Y36(jo,10),a.Y36(km,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[a._Bn([Cv]),a.qOj,a.TTD]}),n})();const qC={provide:jo,useExisting:(0,a.Gpc)(()=>Nh),multi:!0};function HC(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Nh=(()=>{class n extends Lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const i=HC(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function JT(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&a.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([qC]),a.qOj]}),n})(),XT=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(HC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(Nh,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const eD={provide:jo,useExisting:(0,a.Gpc)(()=>Rm),multi:!0};function bv(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Rm=(()=>{class n extends Lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let p=0;p<c.length;p++){const C=this._getOptionValue(c[p].value);i.push(C)}}else{const c=r.options;for(let p=0;p<c.length;p++){const y=c[p];if(y.selected){const C=this._getOptionValue(y.value);i.push(C)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function $C(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&a.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([eD]),a.qOj]}),n})(),Ev=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(bv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(bv(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(Rm,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),oD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[Ho]]}),n})(),YC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:km,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[oD]}),n})(),Lm=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function aD(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new Mm(i,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,i){return new Li(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new RC(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return PC(t)||Cp(t)||fv(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:YC}),n})();class Is{}class Um{}class ba{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ba?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ba;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ba?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===u.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class QC{encodeKey(e){return eb(e)}encodeValue(e){return eb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const XC=/%(\d[a-f0-9])/gi,uD={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function eb(n){return encodeURIComponent(n).replace(XC,(e,t)=>{var r;return null!==(r=uD[t])&&void 0!==r?r:e})}function tb(n){return`${n}`}class vl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new QC,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function JC(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],y=t.get(c)||[];y.push(p),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new vl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(tb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(tb(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class lM{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function rb(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function ib(n){return"undefined"!=typeof Blob&&n instanceof Blob}function cD(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Zc{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function nb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new ba),this.context||(this.context=new lM),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new vl,this.urlWithParams=t}serializeBody(){return null===this.body?null:rb(this.body)||ib(this.body)||cD(this.body)||function cM(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof vl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cD(this.body)?null:ib(this.body)?this.body.type||null:rb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,u=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let C=e.headers||this.headers,A=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(C=Object.keys(e.setHeaders).reduce((k,V)=>k.set(V,e.setHeaders[V]),C)),e.setParams&&(A=Object.keys(e.setParams).reduce((k,V)=>k.set(V,e.setParams[V]),A)),new Zc(r,i,c,{params:A,headers:C,context:S,reportProgress:y,responseType:u,withCredentials:p})}}var Tr=(()=>((Tr=Tr||{})[Tr.Sent=0]="Sent",Tr[Tr.UploadProgress=1]="UploadProgress",Tr[Tr.ResponseHeader=2]="ResponseHeader",Tr[Tr.DownloadProgress=3]="DownloadProgress",Tr[Tr.Response=4]="Response",Tr[Tr.User=5]="User",Tr))();class Vm{constructor(e,t=200,r="OK"){this.headers=e.headers||new ba,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Bm extends Vm{constructor(e={}){super(e),this.type=Tr.ResponseHeader}clone(e={}){return new Bm({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ov extends Vm{constructor(e={}){super(e),this.type=Tr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ov({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class oo extends Vm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function sb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let xp=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof Zc)u=t;else{let y,C;y=i.headers instanceof ba?i.headers:new ba(i.headers),i.params&&(C=i.params instanceof vl?i.params:new vl({fromObject:i.params})),u=new Zc(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:C,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Xe(u).pipe(un(y=>this.handler.handle(y)));if(t instanceof Zc||"events"===i.observe)return c;const p=c.pipe(Er(y=>y instanceof Ov));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,dt.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,dt.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,dt.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe((0,dt.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new vl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,sb(i,r))}post(t,r,i={}){return this.request("POST",t,sb(i,r))}put(t,r,i={}){return this.request("PUT",t,sb(i,r))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Is))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Pv{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const kv=new a.OlP("HTTP_INTERCEPTORS");let ob=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const hD=/^\)\]\}',?\n/;let lb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Xn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,K)=>i.setRequestHeader(V,K.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const u=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const V=1223===i.status?204:i.status,K=i.statusText||"OK",ve=new ba(i.getAllResponseHeaders()),Ue=function fD(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Bm({headers:ve,status:V,statusText:K,url:Ue}),c},y=()=>{let{headers:V,status:K,statusText:ve,url:Ue}=p(),st=null;204!==K&&(st=void 0===i.response?i.responseText:i.response),0===K&&(K=st?200:0);let It=K>=200&&K<300;if("json"===t.responseType&&"string"==typeof st){const vt=st;st=st.replace(hD,"");try{st=""!==st?JSON.parse(st):null}catch(wt){st=vt,It&&(It=!1,st={error:wt,text:st})}}It?(r.next(new Ov({body:st,headers:V,status:K,statusText:ve,url:Ue||void 0})),r.complete()):r.error(new oo({error:st,headers:V,status:K,statusText:ve,url:Ue||void 0}))},C=V=>{const{url:K}=p(),ve=new oo({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:K||void 0});r.error(ve)};let A=!1;const S=V=>{A||(r.next(p()),A=!0);let K={type:Tr.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(K.total=V.total),"text"===t.responseType&&!!i.responseText&&(K.partialText=i.responseText),r.next(K)},k=V=>{let K={type:Tr.UploadProgress,loaded:V.loaded};V.lengthComputable&&(K.total=V.total),r.next(K)};return i.addEventListener("load",y),i.addEventListener("error",C),i.addEventListener("timeout",C),i.addEventListener("abort",C),t.reportProgress&&(i.addEventListener("progress",S),null!==u&&i.upload&&i.upload.addEventListener("progress",k)),i.send(u),r.next({type:Tr.Sent}),()=>{i.removeEventListener("error",C),i.removeEventListener("abort",C),i.removeEventListener("load",y),i.removeEventListener("timeout",C),t.reportProgress&&(i.removeEventListener("progress",S),null!==u&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(In))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Nv=new a.OlP("XSRF_COOKIE_NAME"),Rv=new a.OlP("XSRF_HEADER_NAME");class Mp{}let Rh=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ue),a.LFG(a.Lbi),a.LFG(Nv))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Fv=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Mp),a.LFG(Rv))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Op=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(kv,[]);this.chain=r.reduceRight((i,u)=>new Pv(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Um),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Lv=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Fv,useClass:ob}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Nv,useValue:t.cookieName}:[],t.headerName?{provide:Rv,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Fv,{provide:kv,useExisting:Fv,multi:!0},{provide:Mp,useClass:Rh},{provide:Nv,useValue:"XSRF-TOKEN"},{provide:Rv,useValue:"X-XSRF-TOKEN"}]}),n})(),Ea=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[xp,{provide:Is,useClass:Op},lb,{provide:Um,useExisting:lb}],imports:[[Lv.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var wl=R(4986),vn=R(5813);function ts(){return(0,Vn.e)((n,e)=>{let t,r=!1;n.subscribe(new kn.Q(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function jm(n,e=Do.y){return n=null!=n?n:Fh,(0,Vn.e)((t,r)=>{let i,u=!0;t.subscribe(new kn.Q(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}function Fh(n,e){return n===e}var tt,Dr=R(2011),jc=(R(8125),R(3942)),me=R(5861),wi=R(9681),ns=R(4859),Ci=R(1877),N=R(2090),cb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ia={},qm=qm||{},St=cb||self;function kp(){}function Hm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Lh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Uv="closure_uid_"+(1e9*Math.random()>>>0),hb=0;function pD(n,e,t){return n.call.apply(n.bind,arguments)}function fb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function qr(n,e,t){return(qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pD:fb).apply(null,arguments)}function $m(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ri(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function vu(){this.s=this.s,this.o=this.o}var pb={};vu.prototype.s=!1,vu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function db(n){return Object.prototype.hasOwnProperty.call(n,Uv)&&n[Uv]||(n[Uv]=++hb)}(this);delete pb[n]}},vu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},mb=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function _b(n){return Array.prototype.concat.apply([],arguments)}function Np(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Uh(n){return/^[\s\xa0]*$/.test(n)}var is,yb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function rs(n,e){return-1!=n.indexOf(e)}function vb(n,e){return n<e?-1:n>e?1:0}e:{var wb=St.navigator;if(wb){var Vv=wb.userAgent;if(Vv){is=Vv;break e}}is=""}function Cb(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function bb(n){const e={};for(const t in n)e[t]=n[t];return e}var qc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Eb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<qc.length;u++)t=qc[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gm(n){return Gm[" "](n),n}Gm[" "]=kp;var zm,n,Ib=rs(is,"Opera"),wu=rs(is,"Trident")||rs(is,"MSIE"),Tb=rs(is,"Edge"),Wm=Tb||wu,Db=rs(is,"Gecko")&&!(rs(is.toLowerCase(),"webkit")&&!rs(is,"Edge"))&&!(rs(is,"Trident")||rs(is,"MSIE"))&&!rs(is,"Edge"),_D=rs(is.toLowerCase(),"webkit")&&!rs(is,"Edge");function Ab(){var n=St.document;return n?n.documentMode:void 0}e:{var Bv="",Km=(n=is,Db?/rv:([^\);]+)(\)|;)/.exec(n):Tb?/Edge\/([\d\.]+)/.exec(n):wu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_D?/WebKit\/(\S+)/.exec(n):Ib?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Km&&(Bv=Km?Km[1]:""),wu){var Zv=Ab();if(null!=Zv&&Zv>parseFloat(Bv)){zm=String(Zv);break e}}zm=Bv}var Sb={};var jv=St.document&&wu&&(Ab()||parseInt(zm,10))||void 0,vD=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",kp,e),St.removeEventListener("test",kp,e)}catch(t){}return n}();function Vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Cu(n,e){if(Vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Db){e:{try{Gm(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Mb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Cu.Z.h.call(this)}}Vi.prototype.h=function(){this.defaultPrevented=!0},ri(Cu,Vi);var Mb={2:"touch",3:"pen",4:"mouse"};Cu.prototype.h=function(){Cu.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hc="closure_listenable_"+(1e6*Math.random()|0),qv=0;function wD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++qv,this.ca=this.fa=!1}function Vh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Bh(n){this.src=n,this.g={},this.h=0}function Ym(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=gb(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Vh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ob(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Bh.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Ob(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new wD(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var Hv="closure_lm_"+(1e6*Math.random()|0),Qm={};function $v(n,e,t,r,i){if(r&&r.once)return Jm(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)$v(n,e[u],t,r,i);return null}return t=n_(t),n&&n[Hc]?n.N(e,t,Lh(r)?!!r.capture:!!r,i):Pb(n,e,t,!1,r,i)}function Pb(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Lh(i)?!!i.capture:!!i,p=Wv(n);if(p||(n[Hv]=p=new Bh(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function kb(){var e=Nb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vD||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(e_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Jm(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Jm(n,e[u],t,r,i);return null}return t=n_(t),n&&n[Hc]?n.O(e,t,Lh(r)?!!r.capture:!!r,i):Pb(n,e,t,!0,r,i)}function Gv(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Gv(n,e[u],t,r,i);else r=Lh(r)?!!r.capture:!!r,t=n_(t),n&&n[Hc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ob(u=n.g[e],t,r,i))&&(Vh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Wv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ob(e,t,r,i)),(t=-1<n?e[n]:null)&&Xm(t))}function Xm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Hc])Ym(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(e_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Wv(e))?(Ym(t,n),0==t.h&&(t.src=null,e[Hv]=null)):Vh(n)}}}function e_(n){return n in Qm?Qm[n]:Qm[n]="on"+n}function Nb(n,e){if(n.ca)n=!0;else{e=new Cu(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Xm(n),n=t.call(r,e)}return n}function Wv(n){return(n=n[Hv])instanceof Bh?n:null}var t_="__closure_events_fn_"+(1e9*Math.random()>>>0);function n_(n){return"function"==typeof n?n:(n[t_]||(n[t_]=function(e){return n.handleEvent(e)}),n[t_])}function Ar(){vu.call(this),this.i=new Bh(this),this.P=this,this.I=null}function Hr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Vi(e,n);else if(e instanceof Vi)e.target=e.target||n;else{var i=e;Eb(e=new Vi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=r_(c,r,!0,e)&&i}if(i=r_(c=e.g=n,r,!0,e)&&i,i=r_(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=r_(c=e.g=t[u],r,!1,e)&&i}function r_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&Ym(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}ri(Ar,vu),Ar.prototype[Hc]=!0,Ar.prototype.removeEventListener=function(n,e,t,r){Gv(this,n,e,t,r)},Ar.prototype.M=function(){if(Ar.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Vh(t[r]);delete n.g[e],n.h--}}this.I=null},Ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zv=St.JSON.stringify;function CD(){var n=Kv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var o_,i_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Fb,n=>n.reset());class Fb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lb(n){St.setTimeout(()=>{throw n},0)}function s_(n,e){o_||function Ub(){var n=St.Promise.resolve(void 0);o_=function(){n.then(Vb)}}(),a_||(o_(),a_=!0),Kv.add(n,e)}var a_=!1,Kv=new class Rb{constructor(){this.h=this.g=null}add(e,t){const r=i_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Vb(){for(var n;n=CD();){try{n.h.call(n.g)}catch(t){Lb(t)}var e=i_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}a_=!1}function Yv(n,e){Ar.call(this),this.h=n||1,this.g=e||St,this.j=qr(this.kb,this),this.l=Date.now()}function Qv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Jv(n,e,t){if("function"==typeof n)t&&(n=qr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=qr(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function Xv(n){n.g=Jv(()=>{n.g=null,n.i&&(n.i=!1,Xv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ri(Yv,Ar),(tt=Yv.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Hr(this,"tick"),this.da&&(Qv(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Yv.Z.M.call(this),Qv(this),delete this.g};class bD extends vu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xv(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zn(n){vu.call(this),this.h=n,this.g={}}ri(zn,vu);var e0=[];function Bb(n,e,t,r){Array.isArray(t)||(t&&(e0[0]=t.toString()),t=e0);for(var i=0;i<t.length;i++){var u=$v(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Zb(n){Cb(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xm(e)},n),n.g={}}function Fp(){this.g=!0}function $c(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ID(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return zv(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}zn.prototype.M=function(){zn.Z.M.call(this),Zb(this)},zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fp.prototype.Aa=function(){this.g=!1},Fp.prototype.info=function(){};var Gc={},t0=null;function u_(){return t0=t0||new Ar}function n0(n){Vi.call(this,Gc.Ma,n)}function l_(n){const e=u_();Hr(e,new n0(e,n))}function r0(n,e){Vi.call(this,Gc.STAT_EVENT,n),this.stat=e}function ii(n){const e=u_();Hr(e,new r0(e,n))}function ao(n,e){Vi.call(this,Gc.Na,n),this.size=e}function Lp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}Gc.Ma="serverreachability",ri(n0,Vi),Gc.STAT_EVENT="statevent",ri(r0,Vi),Gc.Na="timingevent",ri(ao,Vi);var Up={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$o={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ts(){}function s0(){}Ts.prototype.h=null;var u0,jh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function o0(){Vi.call(this,"d")}function a0(){Vi.call(this,"c")}function c_(){}function Wc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zn(this),this.P=TD,this.W=new Yv(n=Wm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qh}function qh(){this.i=null,this.g="",this.h=!1}ri(o0,Vi),ri(a0,Vi),ri(c_,Ts),c_.prototype.g=function(){return new XMLHttpRequest},c_.prototype.i=function(){return{}},u0=new c_;var TD=45e3,d_={},h_={};function f_(n,e,t){n.K=1,n.v=C_(bu(e)),n.s=t,n.U=!0,l0(n,null)}function l0(n,e){n.F=Date.now(),Hh(n),n.A=bu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),h0(t.h,"t",r),n.C=0,t=n.l.H,n.h=new qh,n.g=E0(n.l,t?e:null,!n.s),0<n.O&&(n.L=new bD(qr(n.Ia,n,n.g),n.O)),Bb(n.V,n.g,"readystatechange",n.gb),e=n.H?bb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),l_(1),function ED(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var C=p[y].split("=");if(1<C.length){var A=C[0];C=C[1];var S=A.split("_");c=2<=S.length&&"type"==S[1]?c+(A+"=")+C+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Vp(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function qb(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Hb(n,t),i==h_){4==e&&(n.o=4,ii(14),r=!1),$c(n.j,n.m,null,"[Incomplete Response]");break}if(i==d_){n.o=4,ii(15),$c(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$c(n.j,n.m,i,null),g_(n,i)}Vp(n)&&i!=h_&&i!=d_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),C0(e),e.L=!0,ii(11))):($c(n.j,n.m,t,"[Invalid Chunked Response]"),Cl(n),Kc(n))}function Hb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?h_:(t=Number(e.substring(t,r)),isNaN(t)?d_:(r+=1)+t>e.length?h_:(e=e.substr(r,t),n.C=r+t,e))}function Hh(n){n.Y=Date.now()+n.P,p_(n,n.P)}function p_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Lp(qr(n.eb,n),e)}function zc(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function Kc(n){0==n.l.G||n.I||dE(n.l,n)}function Cl(n){zc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Qv(n.W),Zb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function g_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||El(t.i,n)))if(t.I=n.N,!n.J&&El(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Lp(qr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;x_(t),qp(t)}S_(t),ii(18)}if(1>=eE(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Wh(t,11)}else if((n.J||t.g==n)&&x_(t),!Uh(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const A=C[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const S=C[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const k=C[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const K=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var u=r.i;!u.g&&(rs(K,"spdy")||rs(K,"quic")||rs(K,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(tE(u,u.h),u.h=null))}if(r.D){const ve=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(r.sa=ve,Zn(r.F,r.D,ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=VD(r,r.H?r.la:null,r.W),c.J){b_(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(zc(p),Hh(p)),r.g=c}else w0(r);0<t.l.length&&Al(t)}else"stop"!=C[0]&&"close"!=C[0]||Wh(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Wh(t,7):A_(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}l_(4)}catch(C){}}function m_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hm(n)||"string"==typeof n)mb(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Hm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function $b(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Hm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function Yc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Yc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function __(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];bl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)bl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function bl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Wc.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Ds(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const A=Ds(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>A)&&(3!=A||Wm||this.g&&(this.h.h||this.g.ga()||uE(this.g)))){this.I||4!=A||7==e||l_(8==e||0>=S?3:2),zc(this);var t=this.g.ba();this.N=t;t:if(Vp(this)){var r=uE(this.g);n="";var i=r.length,u=4==Ds(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Cl(this),Kc(this);var c="";break t}this.h.i=new St.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function jb(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Uh(p)){var C=p;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ii(12),Cl(this),Kc(this);break e}$c(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,g_(this,t)}this.U?(qb(this,A,c),Wm&&this.i&&3==A&&(Bb(this.V,this.W,"tick",this.fb),this.W.start())):($c(this.j,this.m,c,null),g_(this,c)),4==A&&Cl(this),this.i&&!this.I&&(4==A?dE(this.l,this):(this.i=!1,Hh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),Cl(this),Kc(this)}}}catch(A){}},tt.fb=function(){if(this.g){var n=Ds(this.g),e=this.g.ga();this.C<e.length&&(zc(this),qb(this,n,e),this.i&&4!=n&&Hh(this))}},tt.cancel=function(){this.I=!0,Cl(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Zh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(l_(3),ii(17)),Cl(this),this.o=2,Kc(this)):p_(this,this.Y-n)},(tt=Yc.prototype).R=function(){__(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return __(this),this.g.concat()},tt.get=function(n,e){return bl(this.h,n)?this.h[n]:e},tt.set=function(n,e){bl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var Gb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qc){this.g=void 0!==e?e:n.g,y_(this,n.j),this.s=n.s,v_(this,n.i),w_(this,n.m),this.l=n.l,e=n.h;var t=new $h;t.i=e.i,e.g&&(t.g=new Yc(e.g),t.h=e.h),Wb(this,t),this.o=n.o}else n&&(t=String(n).match(Gb))?(this.g=!!e,y_(this,t[1]||"",!0),this.s=Bp(t[2]||""),v_(this,t[3]||"",!0),w_(this,t[4]),this.l=Bp(t[5]||"",!0),Wb(this,t[6]||"",!0),this.o=Bp(t[7]||"")):(this.g=!!e,this.h=new $h(null,this.g))}function bu(n){return new Qc(n)}function y_(n,e,t){n.j=t?Bp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function v_(n,e,t){n.i=t?Bp(e,!0):e}function w_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Wb(n,e,t){e instanceof $h?(n.h=e,function Qb(n,e){e&&!n.j&&(Eu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(c0(this,r),h0(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Zp(e,Kb)),n.h=new $h(e,n.g))}function Zn(n,e,t){n.h.set(e,t)}function C_(n){return Zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Bp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zp(e,zb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zp(e,zb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zp(t,"/"==t.charAt(0)?OD:MD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zp(t,Yb)),n.join("")};var zb=/[#\/\?@]/g,MD=/[#\?:]/g,OD=/[#\?]/g,Kb=/[#\?@]/g,Yb=/#/g;function $h(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Eu(n){n.g||(n.g=new Yc,n.h=0,n.i&&function DD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function c0(n,e){Eu(n),e=Jc(n,e),bl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,bl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&__(n)))}function d0(n,e){return Eu(n),e=Jc(n,e),bl(n.g.h,e)}function h0(n,e,t){c0(n,e),0<t.length&&(n.i=null,n.g.set(Jc(n,e),Np(t)),n.h+=t.length)}function Jc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function f0(n){this.l=n||Xc,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ea&&St.g.Ea()&&St.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=$h.prototype).add=function(n,e){Eu(this),this.i=null,n=Jc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Eu(this),this.g.forEach(function(t,r){mb(t,function(i){n.call(e,i,r,this)},this)},this)},tt.T=function(){Eu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},tt.R=function(n){Eu(this);var e=[];if("string"==typeof n)d0(this,n)&&(e=_b(e,this.g.get(Jc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=_b(e,n[t])}return e},tt.set=function(n,e){return Eu(this),this.i=null,d0(this,n=Jc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Xc=10;function Xb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function eE(n){return n.h?1:n.g?n.g.size:0}function El(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function tE(n,e){n.g?n.g.add(e):n.h=e}function b_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function PD(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Np(n.i)}function E_(){}function nE(){this.g=new E_}function _M(n,e,t){const r=t||"";try{m_(n,function(i,u){let c=i;Lh(i)&&(c=zv(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function I_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function jp(n){this.l=n.$b||null,this.j=n.ib||!1}function T_(n,e){Ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Gh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}f0.prototype.cancel=function(){if(this.i=PD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},E_.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},E_.prototype.parse=function(n){return St.JSON.parse(n,void 0)},ri(jp,Ts),jp.prototype.g=function(){return new T_(this.l,this.j)},jp.prototype.i=function(n){return function(){return n}}({}),ri(T_,Ar);var Gh=0;function rE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Il(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Tl(n)}function Tl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=T_.prototype).open=function(n,e){if(this.readyState!=Gh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Tl(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Il(this)),this.readyState=Gh},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Tl(this)),this.g&&(this.readyState=3,Tl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==St.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Il(this):Tl(this),3==this.readyState&&rE(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Il(this))},tt.Ta=function(n){this.g&&(this.response=n,Il(this))},tt.ha=function(){this.g&&Il(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(T_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rr=St.JSON.parse;function Nr(n){Ar.call(this),this.headers=new Yc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=p0,this.K=this.L=!1}ri(Nr,Ar);var p0="",kD=/^https?$/i,ND=["POST","PUT"];function sE(n){return"content-type"==n.toLowerCase()}function g0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,m0(n),D_(n)}function m0(n){n.D||(n.D=!0,Hr(n,"complete"),Hr(n,"error"))}function oE(n){if(n.h&&void 0!==qm&&(!n.C[1]||4!=Ds(n)||2!=n.ba()))if(n.v&&4==Ds(n))Jv(n.Fa,0,n);else if(Hr(n,"readystatechange"),4==Ds(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(Gb)[1]||null;if(!i&&St.self&&St.self.location){var u=St.self.location.protocol;i=u.substr(0,u.length-1)}r=!kD.test(i?i.toLowerCase():"")}t=r}if(t)Hr(n,"complete"),Hr(n,"success");else{n.m=6;try{var c=2<Ds(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",m0(n)}}finally{D_(n)}}}function D_(n,e){if(n.g){aE(n);const t=n.g,r=n.C[0]?kp:null;n.g=null,n.C=null,e||Hr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function aE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function Ds(n){return n.g?n.g.readyState:0}function uE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case p0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function RD(n){let e="";return Cb(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Zn(n,e,t))}function Dl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function y0(n){this.za=0,this.l=[],this.h=new Fp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dl("baseRetryDelayMs",5e3,n),this.$a=Dl("retryDelaySeedMs",1e4,n),this.Ya=Dl("forwardChannelMaxRetries",2,n),this.ra=Dl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new f0(n&&n.concurrentRequestLimit),this.Ca=new nE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function A_(n){if(lE(n),3==n.G){var e=n.V++,t=bu(n.F);Zn(t,"SID",n.J),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),Hp(n,t),(e=new Wc(n,n.h,e,void 0)).K=2,e.v=C_(bu(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=E0(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Hh(e)}UD(n)}function qp(n){n.g&&(C0(n),n.g.cancel(),n.g=null)}function lE(n){qp(n),n.u&&(St.clearTimeout(n.u),n.u=null),x_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function ed(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Al(n)}function Al(n){Xb(n.i)||n.m||(n.m=!0,s_(n.Ha,n),n.C=0)}function cE(n,e){var t;t=e?e.m:n.V++;const r=bu(n.F);Zn(r,"SID",n.J),Zn(r,"RID",t),Zn(r,"AID",n.U),Hp(n,r),n.o&&n.s&&_0(r,n.o,n.s),t=new Wc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=v0(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),tE(n.i,t),f_(t,r,e)}function Hp(n,e){n.j&&m_({},function(t,r){Zn(e,r,t)})}function v0(n,e,t){t=Math.min(n.l.length,t);var r=n.j?qr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let C=i[y].h;const A=i[y].g;if(C-=u,0>C)u=Math.max(0,i[y].h-100),p=!1;else try{_M(A,c,"req"+C+"_")}catch(S){r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function w0(n){n.g||n.u||(n.Y=1,s_(n.Ga,n),n.A=0)}function S_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Lp(qr(n.Ga,n),LD(n,n.A)),n.A++,0))}function C0(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function b0(n){n.g=new Wc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=bu(n.oa);Zn(e,"RID","rpc"),Zn(e,"SID",n.J),Zn(e,"CI",n.N?"0":"1"),Zn(e,"AID",n.U),Hp(n,e),Zn(e,"TYPE","xmlhttp"),n.o&&n.s&&_0(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=C_(bu(e)),t.s=null,t.U=!0,l0(t,n)}function x_(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function dE(n,e){var t=null;if(n.g==e){x_(n),C0(n),n.g=null;var r=2}else{if(!El(n.i,e))return;t=e.D,b_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Hr(r=u_(),new ao(r,t,e,i)),Al(n)}else w0(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function FD(n,e){return!(eE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Lp(qr(n.Ha,n,e),LD(n,n.C)),n.C++,0)))}(n,e)||2==r&&S_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Wh(n,5);break;case 4:Wh(n,10);break;case 3:Wh(n,6);break;default:Wh(n,2)}}function LD(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Wh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=qr(n.jb,n);t||(t=new Qc("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||y_(t,"https"),C_(t)),function _t(n,e){const t=new Fp;if(St.Image){const r=new Image;r.onload=$m(I_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$m(I_,t,r,"TestLoadImage: error",!1,e),r.onabort=$m(I_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$m(I_,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ii(2);n.G=0,n.j&&n.j.va(e),UD(n),lE(n)}function UD(n){n.G=0,n.I=-1,n.j&&((0!=PD(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Np(n.l),n.l.length=0),n.j.ua())}function VD(n,e,t){let r=function AD(n){return n instanceof Qc?bu(n):new Qc(n,void 0)}(t);if(""!=r.i)e&&v_(r,e+"."+r.i),w_(r,r.m);else{const i=St.location;r=function SD(n,e,t,r){var i=new Qc(null,void 0);return n&&y_(i,n),e&&v_(i,e),t&&w_(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Cb(n.aa,function(i,u){Zn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Zn(r,e,t),Zn(r,"VER",n.ma),Hp(n,r),r}function E0(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nr(t&&n.Ba&&!n.qa?new jp({ib:!0}):n.qa)).L=n.H,e}function $p(){}function M_(){if(wu&&!(10<=Number(jv)))throw Error("Environmental error: no available transport.")}function As(n,e){Ar.call(this),this.g=new y0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Uh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Uh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Kh(this)}function I0(n){o0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zh(){a0.call(this),this.status=1}function Kh(n){this.g=n}(tt=Nr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():u0.g(),this.C=function uo(n){return n.h||(n.h=n.i())}(this.u?this.u:u0),this.g.onreadystatechange=qr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void g0(this,u)}n=t||"";const i=new Yc(this.headers);r&&m_(r,function(u,c){i.set(c,u)}),r=function mM(n){e:{var e=sE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=St.FormData&&n instanceof St.FormData,!(0<=gb(ND,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aE(this),0<this.B&&((this.K=function iE(n){return wu&&function xb(){return function mD(n){var e=Sb;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=yb(String(zm)).split("."),t=yb("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=vb(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||vb(0==i[2].length,0==u[2].length)||vb(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qr(this.pa,this)):this.A=Jv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){g0(this,u)}},tt.pa=function(){void 0!==qm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hr(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Hr(this,"complete"),Hr(this,"abort"),D_(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),D_(this,!0)),Nr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?oE(this):this.cb())},tt.cb=function(){oE(this)},tt.ba=function(){try{return 2<Ds(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rr(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=y0.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Wc(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=bb(u),Eb(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=v0(this,i,e),Zn(t=bu(this.F),"RID",n),Zn(t,"CVER",22),this.D&&Zn(t,"X-HTTP-Session-Id",this.D),Hp(this,t),this.o&&u&&_0(t,this.o,u),tE(this.i,i),this.Ra&&Zn(t,"TYPE","init"),this.ja?(Zn(t,"$req",e),Zn(t,"SID","null"),i.$=!0,f_(i,t,null)):f_(i,t,e),this.G=2}}else 3==this.G&&(n?cE(this,n):0==this.l.length||Xb(this.i)||cE(this))},tt.Ga=function(){if(this.u=null,b0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Lp(qr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ii(10),qp(this),b0(this))},tt.ab=function(){null!=this.v&&(this.v=null,qp(this),S_(this),ii(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ii(2)):(this.h.info("Failed to ping google.com"),ii(1))},(tt=$p.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},M_.prototype.g=function(n,e){return new As(n,e)},ri(As,Ar),As.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),s_(qr(n.hb,n,e))),ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=VD(n,null,n.W),Al(n)},As.prototype.close=function(){A_(this.g)},As.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ed(this.g,e)}else this.v?((e={}).__data__=zv(n),ed(this.g,e)):ed(this.g,n)},As.prototype.M=function(){this.g.j=null,delete this.j,A_(this.g),delete this.g,As.Z.M.call(this)},ri(I0,o0),ri(zh,a0),ri(Kh,$p),Kh.prototype.xa=function(){Hr(this.g,"a")},Kh.prototype.wa=function(n){Hr(this.g,new I0(n))},Kh.prototype.va=function(n){Hr(this.g,new zh(n))},Kh.prototype.ua=function(){Hr(this.g,"b")},M_.prototype.createWebChannel=M_.prototype.g,As.prototype.send=As.prototype.u,As.prototype.open=As.prototype.m,As.prototype.close=As.prototype.close,Up.NO_ERROR=0,Up.TIMEOUT=8,Up.HTTP_ERROR=6,$o.COMPLETE="complete",s0.EventType=jh,jh.OPEN="a",jh.CLOSE="b",jh.ERROR="c",jh.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,Nr.prototype.listenOnce=Nr.prototype.O,Nr.prototype.getLastError=Nr.prototype.La,Nr.prototype.getLastErrorCode=Nr.prototype.Da,Nr.prototype.getStatus=Nr.prototype.ba,Nr.prototype.getResponseJson=Nr.prototype.Qa,Nr.prototype.getResponseText=Nr.prototype.ga,Nr.prototype.send=Nr.prototype.ea;var BD=Ia.createWebChannelTransport=function(){return new M_},ZD=Ia.getStatEventTarget=function(){return u_()},T0=Ia.ErrorCode=Up,jD=Ia.EventType=$o,hE=Ia.Event=Gc,fE=Ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qD=Ia.FetchXmlHttpFactory=jp,Iu=Ia.WebChannel=s0,HD=Ia.XhrIo=Nr;const D0="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let td="9.8.0";const Sl=new Ci.Yd("@firebase/firestore");function O_(){return Sl.logLevel}function Le(n,...e){if(Sl.logLevel<=Ci.in.DEBUG){const t=e.map(P_);Sl.debug(`Firestore (${td}): ${n}`,...t)}}function Sr(n,...e){if(Sl.logLevel<=Ci.in.ERROR){const t=e.map(P_);Sl.error(`Firestore (${td}): ${n}`,...t)}}function Yh(n,...e){if(Sl.logLevel<=Ci.in.WARN){const t=e.map(P_);Sl.warn(`Firestore (${td}): ${n}`,...t)}}function P_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: `+n;throw Sr(e),new Error(e)}function Dt(n,e){n||ot()}function Ge(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class zD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KD{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let c=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $r,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const C=c;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},y=C=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(C=>y(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?y(C):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $r)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new pE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new si(e)}}class YD{constructor(e,t,r){this.type="FirstParty",this.user=si.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class QD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new YD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new gE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function XD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ss.A=-1;class A0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=XD(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function Qh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function _E(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Kn(0,0))}static max(){return new yt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function S0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Gp{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $t extends Gp{construct(e,t,r){return new $t(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new $t(t)}static emptyPath(){return new $t([])}}const eA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends Gp{construct(e,t,r){return new xr(e,t,r)}static isValidIdentifier(e){return eA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(t)}static emptyPath(){return new xr([])}}class Jh{constructor(e){this.fields=e,e.sort(xr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const wE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nd(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=wE.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Go(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function x0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rd(n){const e=n.mapValue.fields.__previous_value__;return x0(e)?rd(e):e}function Du(n){const e=nd(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class tA{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class xl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xl&&e.projectId===this.projectId&&e.database===this.database}}function Xh(n){return null==n}function Wp(n){return 0===n&&1/n==-1/0}function CE(n){return"number"==typeof n&&Number.isInteger(n)&&!Wp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He($t.fromString(e))}static fromName(e){return new He($t.fromString(e).popFirst(5))}static empty(){return new He($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$t.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new $t(e.slice()))}}const Ml={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zp={nullValue:"NULL_VALUE"};function Ol(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?x0(n)?4:IE(n)?9007199254740991:10:ot()}function lo(n,e){if(n===e)return!0;const t=Ol(n);if(t!==Ol(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Du(n).isEqual(Du(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=nd(r.timestampValue),c=nd(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Go(n.bytesValue).isEqual(Go(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ir(r.geoPointValue.latitude)===ir(i.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ir(r.integerValue)===ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=ir(r.doubleValue),c=ir(i.doubleValue);return u===c?Wp(u)===Wp(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Qh(n.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(S0(u)!==S0(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!lo(u[p],c[p])))return!1;return!0}(n,e);default:return ot()}var i}function Pl(n,e){return void 0!==(n.values||[]).find(t=>lo(t,e))}function co(n,e){if(n===e)return 0;const t=Ol(n),r=Ol(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=ir(i.integerValue||i.doubleValue),p=ir(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return bE(n.timestampValue,e.timestampValue);case 4:return bE(Du(n),Du(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Go(i),p=Go(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const C=kt(c[y],p[y]);if(0!==C)return C}return kt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=kt(ir(i.latitude),ir(u.latitude));return 0!==c?c:kt(ir(i.longitude),ir(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const C=co(c[y],p[y]);if(C)return C}return kt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Ml.mapValue&&u===Ml.mapValue)return 0;if(i===Ml.mapValue)return 1;if(u===Ml.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),y=u.fields||{},C=Object.keys(y);p.sort(),C.sort();for(let A=0;A<p.length&&A<C.length;++A){const S=kt(p[A],C[A]);if(0!==S)return S;const k=co(c[p[A]],y[C[A]]);if(0!==k)return k}return kt(p.length,C.length)}(n.mapValue,e.mapValue);default:throw ot()}}function bE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=nd(n),r=nd(e),i=kt(t.seconds,r.seconds);return 0!==i?i:kt(t.nanos,r.nanos)}function id(n){return k_(n)}function k_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Go(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=k_(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${k_(r.fields[p])}`;return u+"}"}(n.mapValue):ot();var e}function sd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function M0(n){return!!n&&"integerValue"in n}function Kp(n){return!!n&&"arrayValue"in n}function N_(n){return!!n&&"nullValue"in n}function EE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function O0(n){return!!n&&"mapValue"in n}function Yp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ef(n){return"nullValue"in n?zp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sd(xl.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function TE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sd(xl.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ml:ot()}function od(n,e){const t=co(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nA(n,e){const t=co(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!O0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yp(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Yp(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());O0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];O0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Tu(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new oi(Yp(this.value))}}function DE(n){const e=[];return Tu(n.fields,(t,r)=>{const i=new xr([t]);if(O0(r)){const u=DE(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Jh(e)}class jn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new jn(e,0,yt.min(),yt.min(),oi.empty(),0)}static newFoundDocument(e,t,r){return new jn(e,1,t,yt.min(),r,0)}static newNoDocument(e,t){return new jn(e,2,t,yt.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,yt.min(),oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function AE(n){return n.fields.find(e=>2===e.kind)}function kl(n){return n.fields.filter(e=>2!==e.kind)}Qp.UNKNOWN_ID=-1;class tf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jp(0,Wo.min())}}function P0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new Wo(i,He.empty(),e)}function SE(n){return new Wo(n.readTime,n.key,-1)}class Wo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wo(yt.min(),He.empty(),-1)}static max(){return new Wo(yt.max(),He.empty(),-1)}}function xE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}class pr{constructor(e,t){this.comparator=e,this.root=t||ai.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new R_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new R_(this.root,e,this.comparator,!1)}getReverseIterator(){return new R_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new R_(this.root,e,this.comparator,!0)}}class R_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ai{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:ai.RED,this.left=null!=i?i:ai.EMPTY,this.right=null!=u?u:ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ai(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ai.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1,ai.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ai(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ta(n){return n.hasNext()?n.getNext():void 0}class OE{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function k0(n,e=null,t=[],r=[],i=null,u=null,c=null){return new OE(n,e,t,r,i,u,c)}function Nl(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+id(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>id(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>id(r)).join(",")),e.P=t}return e.P}function nf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!oA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!lo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eg(n.startAt,e.startAt)&&eg(n.endAt,e.endAt)}function F_(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function L_(n,e){return n.filters.filter(t=>t instanceof ui&&t.field.isEqual(e))}function kE(n,e,t){let r=zp,i=!0;for(const u of L_(n,e)){let c=zp,p=!0;switch(u.op){case"<":case"<=":c=ef(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=zp}od({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];od({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function NE(n,e,t){let r=Ml,i=!0;for(const u of L_(n,e)){let c=Ml,p=!0;switch(u.op){case">=":case">":c=TE(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=Ml}nA({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];nA({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ui extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new rA(e,t,r):"array-contains"===t?new N0(e,r):"in"===t?new Da(e,r):"not-in"===t?new sA(e,r):"array-contains-any"===t?new R0(e,r):new ui(e,t,r)}static V(e,t,r){return"in"===t?new iA(e,r):new Xp(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(co(t,this.value)):null!==t&&Ol(this.value)===Ol(t)&&this.v(co(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rA extends ui{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class iA extends ui{constructor(e,t){super(e,"in",t),this.keys=RE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xp extends ui{constructor(e,t){super(e,"not-in",t),this.keys=RE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class N0 extends ui{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kp(t)&&Pl(t.arrayValue,this.value)}}class Da extends ui{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pl(this.value.arrayValue,t)}}class sA extends ui{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pl(this.value.arrayValue,t)}}class R0 extends ui{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pl(this.value.arrayValue,r))}}class ho{constructor(e,t){this.position=e,this.inclusive=t}}class rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function oA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function FE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):co(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function eg(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lo(n.position[t],e.position[t]))return!1;return!0}class fo{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function LE(n,e,t,r,i,u,c,p){return new fo(n,e,t,r,i,u,c,p)}function sf(n){return new fo(n)}function U_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function tg(n){for(const e of n.filters)if(e.S())return e.field;return null}function V_(n){return null!==n.collectionGroup}function of(n){const e=Ge(n);if(null===e.D){e.D=[];const t=tg(e),r=U_(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new rf(t)),e.D.push(new rf(xr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new rf(xr.keyField(),u))}}}return e.D}function po(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=k0(e.path,e.collectionGroup,of(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of of(e))t.push(new rf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ho(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ho(e.startAt.position,e.startAt.inclusive):null;e.C=k0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function aA(n,e,t){return new fo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ad(n,e){return nf(po(n),po(e))&&n.limitType===e.limitType}function B_(n){return`${Nl(po(n))}|lt:${n.limitType}`}function Z_(n){return`Query(target=${function PE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${id(r.value)}`;var r}).join(", ")}]`),Xh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>id(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>id(t)).join(",")),`Target(${e})`}(po(n))}; limitType=${n.limitType})`}function ng(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):He.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=FE(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,of(t),r)||t.endAt&&!function(i,u,c){const p=FE(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,of(t),r)));var t,r}function j_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VE(n){return(e,t)=>{let r=!1;for(const i of of(n)){const u=uA(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function uA(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?co(p,y):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function BE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wp(e)?"-0":e}}function ZE(n){return{integerValue:""+n}}function F0(n,e){return CE(e)?ZE(e):BE(n,e)}class af{constructor(){this._=void 0}}function jE(n,e,t){return n instanceof ud?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof ld?U0(n,e):n instanceof Rl?qE(n,e):function(r,i){const u=L0(r,i),c=V0(u)+V0(r.k);return M0(u)&&M0(r.k)?ZE(c):BE(r.M,c)}(n,e)}function lA(n,e,t){return n instanceof ld?U0(n,e):n instanceof Rl?qE(n,e):t}function L0(n,e){return n instanceof cd?M0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ud extends af{}class ld extends af{constructor(e){super(),this.elements=e}}function U0(n,e){const t=bi(e);for(const r of n.elements)t.some(i=>lo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rl extends af{constructor(e){super(),this.elements=e}}function qE(n,e){let t=bi(e);for(const r of n.elements)t=t.filter(i=>!lo(i,r));return{arrayValue:{values:t}}}class cd extends af{constructor(e,t){super(),this.M=e,this.k=t}}function V0(n){return ir(n.integerValue||n.doubleValue)}function bi(n){return Kp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Aa{constructor(e,t){this.field=e,this.transform=t}}class dA{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fl(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class q_{}function B0(n,e,t){n instanceof dd?function(r,i,u){const c=r.value.clone(),p=rg(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ll?function(r,i,u){if(!Fl(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=rg(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(j0(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Z0(n,e,t){var i;n instanceof dd?function(r,i,u){if(!Fl(r.precondition,i))return;const c=r.value.clone(),p=H_(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(GE(i),c).setHasLocalMutations()}(n,e,t):n instanceof Ll?function(r,i,u){if(!Fl(r.precondition,i))return;const c=H_(r.fieldTransforms,u,i),p=i.data;p.setAll(j0(r)),p.setAll(c),i.convertToFoundDocument(GE(i),p).setHasLocalMutations()}(n,e,t):Fl(n.precondition,i=e)&&i.convertToNoDocument(yt.min())}function HE(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=L0(r.transform,i||null);null!=u&&(null==t&&(t=oi.empty()),t.set(r.field,u))}return t||null}function $E(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Qh(t,r,(i,u)=>function cA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ld&&r instanceof ld||t instanceof Rl&&r instanceof Rl?Qh(t.elements,r.elements,lo):t instanceof cd&&r instanceof cd?lo(t.k,r.k):t instanceof ud&&r instanceof ud);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function GE(n){return n.isFoundDocument()?n.version:yt.min()}class dd extends q_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ll extends q_{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function j0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function rg(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,lA(c,p,t[i]))}return r}function H_(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,jE(u,c,e))}return r}class $_ extends q_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class G_ extends q_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class hA{constructor(e){this.count=e}}var gr,jt;function q0(n){switch(n){default:return ot();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function WE(n){if(void 0===n)return Sr("GRPC error has no .code"),le.UNKNOWN;switch(n){case gr.OK:return le.OK;case gr.CANCELLED:return le.CANCELLED;case gr.UNKNOWN:return le.UNKNOWN;case gr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case gr.INTERNAL:return le.INTERNAL;case gr.UNAVAILABLE:return le.UNAVAILABLE;case gr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case gr.NOT_FOUND:return le.NOT_FOUND;case gr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case gr.ABORTED:return le.ABORTED;case gr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case gr.DATA_LOSS:return le.DATA_LOSS;default:return ot()}}(jt=gr||(gr={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class Sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Tu(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return yE(this.inner)}size(){return this.innerSize}}const H0=new pr(He.comparator);function zo(){return H0}const fA=new pr(He.comparator);function $0(...n){let e=fA;for(const t of n)e=e.insert(t.key,t);return e}function uf(){return new Sa(n=>n.toString(),(n,e)=>n.isEqual(e))}const zE=new pr(He.comparator),pA=new Rn(He.comparator);function ln(...n){let e=pA;for(const t of n)e=e.add(t);return e}const KE=new Rn(kt);function W_(){return KE}class ig{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,lf.createSynthesizedTargetChangeForCurrentChange(e,t)),new ig(yt.min(),r,W_(),zo(),ln())}}class lf{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lf(Rr.EMPTY_BYTE_STRING,t,ln(),ln(),ln())}}class z_{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class G0{constructor(e,t){this.targetId=e,this.$=t}}class W0{constructor(e,t,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class z0{constructor(){this.B=0,this.L=JE(),this.U=Rr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=ln(),t=ln(),r=ln();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ot()}}),new lf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=JE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class YE{constructor(e){this.nt=e,this.st=new Map,this.it=zo(),this.rt=QE(),this.ot=new Rn(kt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(F_(u))if(0===r){const c=new He(u.path);this.ct(t,c,jn.newNoDocument(c,yt.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&F_(p.target)){const y=new He(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,jn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=ln();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const C=this.wt(y);return!C||2===C.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new ig(e,t,this.ot,this.it,r);return this.it=zo(),this.rt=QE(),this.ot=new Rn(kt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new z0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Rn(kt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new z0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function QE(){return new pr(He.comparator)}function JE(){return new pr(He.comparator)}const yM={asc:"ASCENDING",desc:"DESCENDING"},XE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vM{constructor(e,t){this.databaseId=e,this.N=t}}function K_(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gA(n,e){return n.N?e.toBase64():e.toUint8Array()}function wM(n,e){return K_(n,e.toTimestamp())}function li(n){return Dt(!!n),yt.fromTimestamp(function(e){const t=nd(e);return new Kn(t.seconds,t.nanos)}(n))}function eI(n,e){return(t=n,new $t(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mA(n){const e=$t.fromString(n);return Dt(sI(e)),e}function Y_(n,e){return eI(n.databaseId,e.path)}function xs(n,e){const t=mA(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(K0(t))}function tI(n,e){return eI(n.databaseId,e)}function Q_(n){const e=mA(n);return 4===e.length?$t.emptyPath():K0(e)}function xa(n){return new $t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function K0(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function nI(n,e,t){return{name:Y_(n,e),fields:t.value.mapValue.fields}}function rI(n,e,t){const r=xs(n,e.name),i=li(e.updateTime),u=new oi({mapValue:{fields:e.fields}}),c=jn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function cf(n,e){let t;if(e instanceof dd)t={update:nI(n,e.key,e.value)};else if(e instanceof $_)t={delete:Y_(n,e.key)};else if(e instanceof Ll)t={update:nI(n,e.key,e.data),updateMask:X0(e.fieldMask)};else{if(!(e instanceof G_))return ot();t={verify:Y_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof ud)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ld)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Rl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof cd)return{fieldPath:u.field.canonicalString(),increment:c.k};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:wM(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ot()),t;var i}function J_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Fr.updateTime(li(i.updateTime)):void 0!==i.exists?Fr.exists(i.exists):Fr.none():Fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Dt("REQUEST_TIME"===c.setToServerValue),p=new ud):"appendMissingElements"in c?p=new ld(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Rl(c.removeAllFromArray.values||[]):"increment"in c?p=new cd(u,c.increment):ot();const y=xr.fromServerFormat(c.fieldPath);return new Aa(y,p)}(n,i)):[];var i;if(e.update){const i=xs(n,e.update.name),u=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Jh((e.updateMask.fieldPaths||[]).map(C=>xr.fromServerFormat(C)));return new Ll(i,u,c,t,r)}return new dd(i,u,t,r)}if(e.delete){const i=xs(n,e.delete);return new $_(i,t)}if(e.verify){const i=xs(n,e.verify);return new G_(i,t)}return ot()}function Q0(n,e){return{documents:[tI(n,e.path)]}}function sg(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const C=y.map(A=>function(S){if("=="===S.op){if(EE(S.value))return{unaryFilter:{field:Ul(S.field),op:"IS_NAN"}};if(N_(S.value))return{unaryFilter:{field:Ul(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(EE(S.value))return{unaryFilter:{field:Ul(S.field),op:"IS_NOT_NAN"}};if(N_(S.value))return{unaryFilter:{field:Ul(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(S.field),op:yA(S.op),value:S.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(C=>{return{field:Ul((A=C).field),direction:EM(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(C=e.limit,n.N||Xh(C)?C:{value:C});var C,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function J0(n){let e=Q_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=_A(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new rf(df((S=A).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(A){let S;return S="object"==typeof A?A.value:A,Xh(S)?null:S}(t.limit));let y=null;var A;t.startAt&&(y=new ho((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new ho(A.values||[],!A.before)}(t.endAt)),LE(e,i,c,u,p,"F",y,C)}function _A(n){return n?void 0!==n.unaryFilter?[vA(n)]:void 0!==n.fieldFilter?[IM(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>_A(e)).reduce((e,t)=>e.concat(t)):ot():[]}function EM(n){return yM[n]}function yA(n){return XE[n]}function Ul(n){return{fieldPath:n.canonicalString()}}function df(n){return xr.fromServerFormat(n.fieldPath)}function IM(n){return ui.create(df(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function vA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=df(n.unaryFilter.field);return ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=df(n.unaryFilter.field);return ui.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=df(n.unaryFilter.field);return ui.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=df(n.unaryFilter.field);return ui.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function X0(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function An(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=X_(e)),e=wA(n.get(t),e);return X_(e)}function wA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function X_(n){return n+"\x01\x01"}function Ma(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),$t.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&ot(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:ot()}u=c+2}return new $t(r)}const oI=["userId","batchId"];function hf(n,e){return[n,An(e)]}function ew(n,e,t){return[n,An(e),t]}const aI={},CA=["prefixPath","collectionGroup","readTime","documentId"],uI=["prefixPath","collectionGroup","documentId"],lI=["collectionGroup","readTime","prefixPath","documentId"],bA=["canonicalId","targetId"],EA=["targetId","path"],tw=["path","targetId"],Ko=["collectionId","parent"],IA=["indexId","uid"],TM=["uid","sequenceNumber"],TA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cI=["indexId","uid","orderedDocumentKey"],DA=["userId","collectionPath","documentId"],AA=["userId","collectionPath","largestBatchId"],dI=["userId","collectionGroup","largestBatchId"],hI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DM=[...hI,"documentOverlays"],nw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fI=[...nw,"indexConfiguration","indexState","indexEntries"],pI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class Vl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $r,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new og(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=vI(r.target.error);this.At.reject(new og(e,i))}}static open(e,t,r,i){try{return new Vl(t,e.transaction(i,r))}catch(u){throw new og(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _I(t)}}class Ms{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ms.Vt((0,N.z$)())&&Sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),hd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,N.hl)())return!1;if(Ms.St())return!0;const e=(0,N.z$)(),t=Ms.Vt(e),r=0<t&&t<10,i=Ms.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new og(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new og(e,p))},u.onupgradeneeded=c=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=Vl.open(u.db,e,c?"readonly":"readwrite",r),C=i(y).next(A=>(y.bt(),A)).catch(A=>(y.abort(A),de.reject(A))).toPromise();return C.catch(()=>{}),yield y.Rt,C}catch(y){const C="FirebaseError"!==y.name&&p<3;if(Le("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),u.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return hd(this.Ft.delete())}}class og extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bl(n){return"IndexedDbTransactionError"===n.name}class _I{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hd(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),hd(this.store.add(e))}get(e){return hd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),hd(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),hd(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new de((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=u=>{const c=vI(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new mI(p),C=t(p.primaryKey,p.value,y);if(C instanceof de){const A=C.catch(S=>(y.done(),de.reject(S)));r.push(A)}y.isDone?i():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hd(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=vI(r.target.error);t(i)}})}let yI=!1;function vI(n){const e=Ms.Vt((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yI||(yI=!0,setTimeout(()=>{throw r},0)),r}}return n}class SA extends gI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=Ge(n);return Ms.xt(t.Ht,e)}class rw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&B0(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Z0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Z0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ln())}isEqual(e){return this.batchId===e.batchId&&Qh(this.mutations,e.mutations,(t,r)=>$E(t,r))&&Qh(this.baseMutations,e.baseMutations,(t,r)=>$E(t,r))}}class iw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=zE;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new iw(e,t,r,i)}}class sw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fd{constructor(e,t,r,i,u=yt.min(),c=yt.min(),p=Rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new fd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new fd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xA{constructor(e){this.Jt=e}}function MA(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ow(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Y_(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:K_(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:pd(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:pd(e.version)}}var i,u;return r}function ow(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oa(n){const e=new Kn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function ff(n,e){const t=(e.baseMutations||[]).map(u=>J_(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>J_(n.Jt,u)),i=Kn.fromMillis(e.localWriteTimeMs);return new rw(e.batchId,i,t,r)}function ag(n){const e=Oa(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Oa(n.lastLimboFreeSnapshotVersion):yt.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=po(sf(Q_(i.documents[0])))):r=po(J0(n.query)),new fd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function aw(n,e){const t=pd(e.snapshotVersion),r=pd(e.lastLimboFreeSnapshotVersion);let i;i=F_(e.target)?Q0(n.Jt,e.target):sg(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Au(n){const e=J0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?aA(e,e.limit,"L"):e}function ey(n,e){return new sw(e.largestBatchId,J_(n.Jt,e.overlayMutation))}function ty(n,e){const t=e.path.lastSegment();return[n,An(e.path.popLast()),t]}class uw{getBundleMetadata(e,t){return wI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Oa(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return wI(e).put({bundleId:(r=t).id,createTime:pd(li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ny(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Au(i.bundledQuery),readTime:Oa(i.readTime)};var i})}saveNamedQuery(e,t){return ny(e).put({name:(r=t).name,readTime:pd(li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wI(n){return Lr(n,"bundles")}function ny(n){return Lr(n,"namedQueries")}class ug{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ug(e,t.uid||"")}getOverlay(e,t){return pf(e).get(ty(this.userId,t)).next(r=>r?ey(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new sw(t,c);i.push(this.Xt(e,p))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(An(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(pf(e).Qt("collectionPathOverlayIndex",p))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const i=uf(),u=An(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return pf(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const C=ey(this.M,y);i.set(C.getKey(),C)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=uf();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pf(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,C,A)=>{const S=ey(this.M,C);u.size()<i||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return pf(e).put(function(r,i,u){const[c,p,y]=ty(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:cf(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function pf(n){return Lr(n,"documentOverlays")}class Zl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Wp(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Go(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?IE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ot()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function SM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function OA(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=SM(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Zl.fe=new Zl;class xM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=OA(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=OA(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class MM{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class OM{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ry{constructor(){this.De=new xM,this.Ce=new MM(this.De),this.xe=new OM(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class gf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gf(this.indexId,this.documentKey,this.arrayValue,r)}}function jl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CI(n.arrayValue,e.arrayValue),0!==t?t:(t=CI(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function CI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class PA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=AE(e);if(void 0!==t&&!this.Be(t))return!1;const r=kl(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class kA{constructor(){this.qe=new lw}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Wo.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class lw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rn($t.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn($t.comparator)).toArray()}}const lg=new Uint8Array(0);class bI{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new lw,this.Ge=new Sa(r=>Nl(r),(r,i)=>nf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:An(i)};return cw(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[_E(t),""],!1,!0);return cw(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ma(c.parent))}return r})}addFieldIndex(e,t){const r=iy(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=iy(e),i=dg(e),u=cg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=cg(e);let i=!0;const u=new Map;return de.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=ln();const p=[];return de.forEach(u,(y,C)=>{var A;Le("IndexedDbIndexManager",`Using index ${A=y,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(vt=>`${vt.fieldPath}:${vt.kind}`).join(",")}`} to execute ${Nl(t)}`);const S=function(vt,wt){const Zt=AE(wt);if(void 0===Zt)return null;for(const _n of L_(vt,Zt.fieldPath))switch(_n.op){case"array-contains-any":return _n.value.arrayValue.values||[];case"array-contains":return[_n.value]}return null}(C,y),k=function(vt,wt){const Zt=new Map;for(const _n of kl(wt))for(const as of L_(vt,_n.fieldPath))switch(as.op){case"==":case"in":Zt.set(_n.fieldPath.canonicalString(),as.value);break;case"not-in":case"!=":return Zt.set(_n.fieldPath.canonicalString(),as.value),Array.from(Zt.values())}return null}(C,y),V=function(vt,wt){const Zt=[];let _n=!0;for(const as of kl(wt)){const iC=0===as.kind?kE(vt,as.fieldPath,vt.startAt):NE(vt,as.fieldPath,vt.startAt);Zt.push(iC.value),_n&&(_n=iC.inclusive)}return new ho(Zt,_n)}(C,y),K=function(vt,wt){const Zt=[];let _n=!0;for(const as of kl(wt)){const iC=0===as.kind?NE(vt,as.fieldPath,vt.endAt):kE(vt,as.fieldPath,vt.endAt);Zt.push(iC.value),_n&&(_n=iC.inclusive)}return new ho(Zt,_n)}(C,y),ve=this.We(y,C,V),Ue=this.We(y,C,K),st=this.ze(y,C,k),It=this.He(y.indexId,S,ve,V.inclusive,Ue,K.inclusive,st);return de.forEach(It,vt=>r.Gt(vt,t.limit).next(wt=>{wt.forEach(Zt=>{const _n=He.fromSegments(Zt.documentKey);c.has(_n)||(c=c.add(_n),p.push(_n))})}))}).next(()=>p)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,p){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),C=y/(null!=t?t.length:1),A=[];for(let S=0;S<y;++S){const k=t?this.Je(t[S/C]):lg,V=this.Ye(e,k,r[S%C],i),K=this.Xe(e,k,u[S%C],c),ve=p.map(Ue=>this.Ye(e,k,Ue,!0));A.push(...this.createRange(V,K,ve))}return A}Ye(e,t,r,i){const u=new gf(e,He.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new gf(e,He.empty(),t,r);return i?u.ke():u}je(e,t){const r=new PA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return de.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new Rn(xr.comparator),y=!1;for(const C of c.filters){const A=C;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?y=!0:p=p.add(A.field))}for(const C of c.orderBy)C.field.isKeyField()||(p=p.add(C.field));return p.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new ry;for(const i of kl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);Zl.fe.Zt(u,c)}return r.Se()}Je(e){const t=new ry;return Zl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new ry;return Zl.fe.Zt(sd(this.databaseId,t),r.Ne(function(i){const u=kl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new ry);let u=0;for(const c of kl(e)){const p=r[u++];for(const y of i)if(this.en(t,c.fieldPath)&&Kp(p))i=this.nn(i,c,p);else{const C=y.Ne(c.kind);Zl.fe.Zt(p,C)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new ry;y.seed(p.Se()),Zl.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof ui&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iy(e),i=dg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return de.forEach(u,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(C,A){const S=A?new Jp(A.sequenceNumber,new Wo(Oa(A.readTime),new He(Ma(A.documentKey)),A.largestBatchId)):Jp.empty(),k=C.fields.map(([V,K])=>new tf(xr.fromServerFormat(V),K));return new Qp(C.indexId,C.collectionGroup,k,S)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iy(e),u=dg(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>de.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:pd((k=r).readTime),documentKey:An(k.documentKey.path),largestBatchId:k.largestBatchId});var k})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),de.forEach(p,y=>this.on(e,i,y).next(C=>{const A=this.un(u,y);return C.isEqual(A)?de.resolve():this.an(e,u,y,C,A)}))))})}cn(e,t,r,i){return cg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return cg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=cg(e);let u=new Rn(jl);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new gf(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new Rn(jl);const i=this.Ze(t,e);if(null==i)return r;const u=AE(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Kp(c))for(const p of c.arrayValue.values||[])r=r.add(new gf(t.indexId,e.key,this.Je(p),i))}else r=r.add(new gf(t.indexId,e.key,lg,i));return r}an(e,t,r,i,u){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,C,A,S){const k=p.getIterator(),V=y.getIterator();let K=Ta(k),ve=Ta(V);for(;K||ve;){let Ue=!1,st=!1;if(K&&ve){const It=C(K,ve);It<0?st=!0:It>0&&(Ue=!0)}else null!=K?st=!0:Ue=!0;Ue?(A(ve),ve=Ta(V)):st?(S(K),K=Ta(k)):(K=Ta(k),ve=Ta(V))}}(i,u,jl,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),de.waitFor(c)}rn(e){let t=1;return dg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>jl(c,p)).filter((c,p,y)=>!p||0!==jl(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=jl(c,e),y=jl(c,t);if(0===p)i[0]=e.ke();else if(p>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,lg,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,lg,[]]));return u}getMinOffset(e,t){let r;return de.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||xE(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Wo.min()})).next(()=>r)}}function cw(n){return Lr(n,"collectionParents")}function cg(n){return Lr(n,"indexEntries")}function iy(n){return Lr(n,"indexConfiguration")}function dg(n){return Lr(n,"indexState")}const hg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Os(e,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dw(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(A,S,k)=>(p++,k.delete()));u.push(y.next(()=>{Dt(1===p)}));const C=[];for(const A of t.mutations){const S=ew(e,A.key.path,t.batchId);u.push(i.delete(S)),C.push(A.key)}return de.waitFor(u).next(()=>C)}function gd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}Os.DEFAULT_COLLECTION_PERCENTILE=10,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Os.DEFAULT=new Os(41943040,Os.DEFAULT_COLLECTION_PERCENTILE,Os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Os.DISABLED=new Os(-1,0,0);class hw{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new hw(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ql(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=mf(e),c=ql(e);return c.add({}).next(p=>{Dt("number"==typeof p);const y=new rw(p,t,r,i),C=function(k,V,K){const ve=K.baseMutations.map(st=>cf(k.Jt,st)),Ue=K.mutations.map(st=>cf(k.Jt,st));return{userId:V,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:ve,mutations:Ue}}(this.M,this.userId,y),A=[];let S=new Rn((k,V)=>kt(k.canonicalString(),V.canonicalString()));for(const k of i){const V=ew(this.userId,k.key.path,p);S=S.add(k.key.path.popLast()),A.push(c.put(C)),A.push(u.put(V,aI))}return S.forEach(k=>{A.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),de.waitFor(A).next(()=>y)})}lookupMutationBatch(e,t){return ql(e).get(t).next(r=>r?(Dt(r.userId===this.userId),ff(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ql(e).Wt({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(Dt(p.batchId>=r),u=ff(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ql(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ql(e).qt("userMutationsIndex",t).next(r=>r.map(i=>ff(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=hf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return mf(e).Wt({range:i},(c,p,y)=>{const[C,A,S]=c,k=Ma(A);if(C===this.userId&&t.path.isEqual(k))return ql(e).get(S).next(V=>{if(!V)throw ot();Dt(V.userId===this.userId),u.push(ff(this.M,V))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(kt);const i=[];return t.forEach(u=>{const c=hf(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=mf(e).Wt({range:p},(C,A,S)=>{const[k,V,K]=C,ve=Ma(V);k===this.userId&&u.path.isEqual(ve)?r=r.add(K):S.done()});i.push(y)}),de.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=hf(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Rn(kt);return mf(e).Wt({range:c},(y,C,A)=>{const[S,k,V]=y,K=Ma(k);S===this.userId&&r.isPrefixOf(K)?K.length===i&&(p=p.add(V)):A.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(ql(e).get(u).next(c=>{if(null===c)throw ot();Dt(c.userId===this.userId),r.push(ff(this.M,c))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return dw(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return mf(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=Ma(u[1]);i.push(y)}else p.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return EI(e,this.userId,t)}wn(e){return NA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function EI(n,e,t){const r=hf(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return mf(n).Wt({range:u,jt:!0},(p,y,C)=>{const[A,S,k]=p;A===e&&S===i&&(c=!0),C.done()}).next(()=>c)}function ql(n){return Lr(n,"mutations")}function mf(n){return Lr(n,"documentMutations")}function NA(n){return Lr(n,"mutationQueues")}class md{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new md(0)}static yn(){return new md(-1)}}class RA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new md(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>yt.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_f(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return _f(e).Wt((c,p)=>{const y=ag(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>de.waitFor(u)).next(()=>i)}forEachTarget(e,t){return _f(e).Wt((r,i)=>{const u=ag(i);t(u)})}pn(e){return II(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}In(e,t){return II(e).put("targetGlobalKey",t)}Tn(e,t){return _f(e).put(aw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Nl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return _f(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const C=ag(p);nf(t,C.target)&&(u=C,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Hl(e);return t.forEach(c=>{const p=An(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=Hl(e);return de.forEach(t,u=>{const c=An(u.path);return de.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Hl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Hl(e);let u=ln();return i.Wt({range:r,jt:!0},(c,p,y)=>{const C=Ma(c[1]),A=new He(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=An(t.path),i=IDBKeyRange.bound([r],[_E(r)],!1,!0);let u=0;return Hl(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],y,C)=>{0!==c&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return _f(e).get(t).next(r=>r?ag(r):null)}}function _f(n){return Lr(n,"targets")}function II(n){return Lr(n,"targetGlobal")}function Hl(n){return Lr(n,"targetDocuments")}function _d(n){return fw.apply(this,arguments)}function fw(){return fw=(0,me.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==pI)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),fw.apply(this,arguments)}function TI([n,e],[t,r]){const i=kt(n,t);return 0===i?kt(e,r):i}class PM{constructor(e){this.An=e,this.buffer=new Rn(TI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kM{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Bl(i)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield _d(i)}yield t.Sn(e)}))}}class NM{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Ss.A);const r=new PM(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(hg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hg):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,p,y,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(C=Date.now(),O_()<=Ci.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${S} documents in `+(C-y)+`ms\nTotal Duration: ${C-A}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:S})))}}class RM{constructor(e,t){this.db=e,this.garbageCollector=new NM(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return pw(e,r)}removeReference(e,t,r){return pw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pw(e,t)}On(e,t){return function(r,i){let u=!1;return NA(r).zt(c=>EI(r,c,i).next(p=>(p&&(u=!0),de.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(C=>{if(!C)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,yt.min()),Hl(e).delete([0,An(c.path)])))});i.push(y)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pw(e,t)}Mn(e,t){const r=Hl(e);let i,u=Ss.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:C})=>{0===c?(u!==Ss.A&&t(new He(Ma(i)),u),u=C,i=y):u=Ss.A}).next(()=>{u!==Ss.A&&t(new He(Ma(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pw(n,e){return Hl(n).put((r=n.currentSequenceNumber,{targetId:0,path:An(e.path),sequenceNumber:r}));var r}class DI{constructor(){this.changes=new Sa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FM{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yf(e).put(r)}removeEntry(e,t,r){return yf(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ow(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return yf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(s(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return yf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(s(t))},(i,u)=>{r={document:this.$n(t,u),size:gd(u)}}).next(()=>r)}getEntries(e,t){let r=zo();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=zo(),i=new pr(He.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),i=i.insert(u,gd(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let i=new Rn(l);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(s(i.first()),s(i.last())),c=i.getIterator();let p=c.getNext();return yf(e).Wt({index:"documentKeyIndex",range:u},(y,C,A)=>{const S=He.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;p&&l(p,S)<0;)r(p,null),p=c.getNext();p&&p.isEqual(S)&&(r(p,C),p=c.hasNext()?c.getNext():null),p?A.Ut(s(p)):A.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),ow(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yf(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=zo();for(const y of c){const C=this.$n(He.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(C.key,C)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=zo();const c=o(t,r),p=o(t,Wo.max());return yf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,C,A)=>{const S=this.$n(He.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(S.key,S),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new LM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FA(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Fn(e,t){return FA(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function AM(n,e){let t;if(e.document)t=rI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=Oa(e.noDocument.readTime);t=jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=He.fromSegments(e.unknownDocument.path),i=Oa(e.unknownDocument.version);t=jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Kn(r[0],r[1]);return yt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return jn.newInvalidDocument(e)}}class LM extends DI{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Sa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Rn((u,c)=>kt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=MA(this.Kn.M,c);i=i.add(u.path.popLast()),r+=gd(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=MA(this.Kn.M,c.convertToNoDocument(yt.min()));t.push(this.Kn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function FA(n){return Lr(n,"remoteDocumentGlobal")}function yf(n){return Lr(n,"remoteDocumentsV14")}function s(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o(n,e){const t=e.documentKey.path.toArray();return[n,ow(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=kt(t[u],r[u]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}class d{constructor(e){this.M=e}kt(e,t,r,i){const u=new Vl("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oI,{unique:!0}),p.createObjectStore("documentMutations"),h(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=de.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),h(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",C)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(C=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oI,{unique:!0});const A=y.store("mutations"),S=C.map(k=>A.put(k));return de.waitFor(S)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:DA});y.createIndex("collectionPathOverlayIndex",AA,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",dI,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:CA});y.createIndex("documentKeyIndex",uI),y.createIndex("collectionGroupIndex",lI)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:IA}).createIndex("sequenceNumberIndex",TM,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:TA}).createIndex("documentKeyIndex",cI,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=gd(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>de.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>de.forEach(p,y=>{Dt(y.userId===u.userId);const C=ff(this.M,y);return dw(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const y=new $t(c),C=[0,An(y)];u.push(t.get(C).next(A=>A?de.resolve():t.put({targetId:0,path:An(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Ko});const r=t.store("collectionParents"),i=new lw,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:An(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new $t(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],C)=>{const A=Ma(p);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=ag(i),c=aw(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(C=c,C.document?new He($t.fromString(C.document.name).popFirst(5)):C.noDocument?He.fromSegments(C.noDocument.path):C.unknownDocument?He.fromSegments(C.unknownDocument.path):ot()).path.toArray();var C;const A={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(A))}).next(()=>de.waitFor(i))}}function h(n){n.createObjectStore("targetDocuments",{keyPath:EA}).createIndex("documentTargetsIndex",tw,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bA,{unique:!0}),n.createObjectStore("targetGlobal")}const m="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class v{constructor(e,t,r,i,u,c,p,y,C,A,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=C,this.Zn=A,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=k=>Promise.resolve(),!v.vt())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RM(this,i),this.hs=t+"main",this.M=new xA(y),this.ls=new Ms(this.hs,this.ts,new d(this.M)),this.fs=new RA(this.referenceDelegate,this.M),this.ds=new FM(this.M),this._s=new uw,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&Sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,m);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ss(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>E(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Bl(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return b(e).get("owner").next(t=>de.resolve(this.Ps(t)))}Vs(e){return E(e).delete(this.clientId)}vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Lr(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return de.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):b(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,m);return!1}}return!(!this.networkEnabled||!this.inForeground)||E(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new SA(t,Ss.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>E(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return hw.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new bI(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return ug.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?fI:13===c?nw:12===c?DM:11===c?hI:void ot();var c;let p;return this.ls.runTransaction(e,i,u,y=>(p=new SA(y,this.es?this.es.next():Ss.A),"readwrite-primary"===t?this.Es(p).next(C=>!!C||this.As(p)).next(C=>{if(!C)throw Sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(le.FAILED_PRECONDITION,pI);return r(p)}).next(C=>this.bs(p).next(()=>C)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return b(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,m)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return b(e).put("owner",t)}static vt(){return Ms.vt()}Rs(e){const t=b(e);return t.get("owner").next(r=>this.Ps(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Sr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function b(n){return Lr(n,"owner")}function E(n){return Lr(n,"clientMetadata")}function x(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class O{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return He.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):V_(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new He(t)).next(r=>{let i=$0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=$0();return this.indexManager.getCollectionParents(e,i).next(c=>de.forEach(c,p=>{const y=(C=t,A=p.child(i),new fo(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.zs(e,y,r).next(C=>{C.forEach((A,S)=>{u=u.insert(A,S)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let C=i.get(y);null==C&&(C=jn.newInvalidDocument(y),i=i.insert(y,C)),Z0(p,C,c.localWriteTime),C.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{ng(t,c)||(i=i.remove(u))}),i))}}class L{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=ln(),i=ln();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new L(e,t.fromCache,r,i)}}class q{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return de.resolve(null)}ei(e,t,r,i){return function UE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(yt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(O_()<=Ci.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Z_(t)),this.ri(e,c,t,P0(i,-1)))})}si(e,t){let r=new Rn(VE(e));return t.forEach((i,u)=>{ng(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return O_()<=Ci.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Z_(t)),this.Zs.Qs(e,t,Wo.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class J{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new pr(kt),this.ai=new Sa(u=>Nl(u),nf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new O(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function ye(n,e,t,r){return new J(n,e,t,r)}function Ve(n,e){return je.apply(this,arguments)}function je(){return je=(0,me.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=ln();for(const C of i){c.push(C.batchId);for(const A of C.mutations)y=y.add(A.key)}for(const C of u){p.push(C.batchId);for(const A of C.mutations)y=y.add(A.key)}return t.fi.Ks(r,y).next(C=>({di:C,removedBatchIds:c,addedBatchIds:p}))})})}),je.apply(this,arguments)}function rt(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,C){const A=y.batch,S=A.keys();let k=de.resolve();return S.forEach(V=>{k=k.next(()=>C.getEntry(p,V)).next(K=>{const ve=y.docVersions.get(V);Dt(null!==ve),K.version.compareTo(ve)<0&&(A.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),C.addEntry(K)))})}),k.next(()=>c.Bs.removeMutationBatch(p,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function Ee(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function ft(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const p=[];e.targetChanges.forEach((C,A)=>{const S=i.get(A);if(!S)return;p.push(t.fs.removeMatchingKeys(u,C.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,A)));let k=S.withSequenceNumber(u.currentSequenceNumber);var V,K,ve;e.targetMismatches.has(A)?k=k.withResumeToken(Rr.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):C.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(C.resumeToken,r)),i=i.insert(A,k),K=k,ve=C,(0===(V=S).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,k))});let y=zo();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),p.push(Bt(u,c,e.documentUpdates).next(C=>{y=C})),!r.isEqual(yt.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(C)}return de.waitFor(p).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,y)).next(()=>y)}).then(u=>(t.ui=i,u))}function Bt(n,e,t){let r=ln();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=zo();return t.forEach((c,p)=>{const y=i.get(c);p.isNoDocument()&&p.version.isEqual(yt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Le("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function fn(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Gr(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,de.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new fd(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function go(n,e,t){return fg.apply(this,arguments)}function fg(){return fg=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Bl(c))throw c;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),fg.apply(this,arguments)}function vf(n,e,t){const r=Ge(n);let i=yt.min(),u=ln();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,C){const A=Ge(p),S=A.ai.get(C);return void 0!==S?de.resolve(A.ui.get(S)):A.fs.getTargetData(y,C)}(r,c,po(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.oi.Qs(c,e,t?i:yt.min(),t?u:ln())).next(p=>(ay(r,j_(e),p),{documents:p,_i:u})))}function sy(n,e){const t=Ge(n),r=Ge(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function oy(n,e){const t=Ge(n),r=t.ci.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,P0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ay(t,e,i),i))}function ay(n,e,t){let r=yt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function pg(){return pg=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);let u=ln(),c=zo();for(const C of t){const A=e.wi(C.metadata.name);C.document&&(u=u.add(A));const S=e.mi(C);S.setReadTime(e.gi(C.metadata.readTime)),c=c.insert(A,S)}const p=i.hi.newChangeBuffer({trackRemovals:!0}),y=yield Gr(i,(C=r,po(sf($t.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>Bt(C,p,c).next(A=>(p.apply(C),A)).next(A=>i.fs.removeMatchingKeysForTargetId(C,y.targetId).next(()=>i.fs.addMatchingKeys(C,u,y.targetId)).next(()=>i.fi.Gs(C,A)).next(()=>A)))}),pg.apply(this,arguments)}function mw(n,e){return gg.apply(this,arguments)}function gg(){return gg=(0,me.Z)(function*(n,e,t=ln()){const r=yield Gr(n,po(Au(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=li(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const p=r.withResumeToken(Rr.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(p.targetId,p),i.fs.updateTargetData(u,p).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),gg.apply(this,arguments)}class fR{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return de.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:li(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Au(r.bundledQuery),readTime:li(r.readTime)}),de.resolve();var r}}class pR{constructor(){this.overlays=new pr(He.comparator),this.Ii=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=uf(),u=t.length+1,c=new He(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,C=y.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new pr((C,A)=>C-A);const c=this.overlays.getIterator();for(;c.hasNext();){const C=c.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=uf(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const p=uf(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((C,A)=>p.set(C,A)),!(p.size()>=i)););return de.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new sw(t,r));let u=this.Ii.get(t);void 0===u&&(u=ln(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class LA{constructor(){this.Ti=new Rn(Ei.Ei),this.Ai=new Rn(Ei.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ei(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ei(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new He(new $t([])),r=new Ei(t,e),i=new Ei(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new He(new $t([])),r=new Ei(t,e),i=new Ei(t,e+1);let u=ln();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ei(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ei{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return He.comparator(e.key,t.key)||kt(e.Ci,t.Ci)}static Ri(e,t){return kt(e.Ci,t.Ci)||He.comparator(e.key,t.key)}}class gR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Rn(Ei.Ei)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new rw(u,t,r,i);this.Bs.push(c);for(const p of i)this.Ni=this.Ni.add(new Ei(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ei(t,0),i=new Ei(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const p=this.ki(c.Ci);u.push(p)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(kt);return t.forEach(i=>{const u=new Ei(i,0),c=new Ei(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],p=>{r=r.add(p.Ci)})}),de.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const c=new Ei(new He(u),0);let p=new Rn(kt);return this.Ni.forEachWhile(y=>{const C=y.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(p=p.add(y.Ci)),!0)},c),de.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return de.forEach(t.mutations,i=>{const u=new Ei(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ei(t,0),i=this.Ni.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class mR{constructor(e){this.$i=e,this.docs=new pr(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=zo();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():jn.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=zo();const u=new He(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||xE(SE(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ot()}Bi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _R(this)}getSize(e){return de.resolve(this.size)}}class _R extends DI{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class yR{constructor(e){this.persistence=e,this.Li=new Sa(t=>Nl(t),nf),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new LA,this.targetCount=0,this.Ki=md.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),de.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new md(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),de.waitFor(u).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.qi.containsKey(t))}}class vR{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ss(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new yR(this),this.indexManager=new kA,this.ds=new mR(r=>this.referenceDelegate.Qi(r)),this.M=new xA(t),this._s=new fR(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new gR(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new wR(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return de.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class wR extends gI{constructor(e){super(),this.currentSequenceNumber=e}}class UA{constructor(e){this.persistence=e,this.Hi=new LA,this.Ji=null}static Yi(e){return new UA(e)}get Xi(){if(this.Ji)return this.Ji;throw ot()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xi,r=>{const i=He.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,yt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return de.or([()=>de.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function UM(n,e){return`firestore_clients_${n}_${e}`}function VM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function VA(n,e){return`firestore_targets_${n}_${e}`}class AI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new xe(i.error.code,i.error.message))),c?new AI(e,t,i.state,u):(Sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _w{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new xe(r.error.code,r.error.message))),u?new _w(e,r.state,i):(Sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class SI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=W_();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=CE(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new SI(e,u):(Sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class BA{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new BA(t.clientId,t.onlineState):(Sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZA{constructor(){this.activeTargetIds=W_()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jA{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new pr(kt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=UM(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ZA),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(UM(e.persistenceKey,i));if(u){const c=SI.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(VA(this.persistenceKey,e));if(r){const i=_w.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(VA(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Ss.A;if(null!=u)try{const p=JSON.parse(u);Dt("number"==typeof p),c=p}catch(p){Sr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Ss.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new AI(this.currentUser,e,t,r),u=VM(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=VM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=VA(this.persistenceKey,e),u=new _w(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return SI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return AI.tr(new si(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return _w.tr(i,t)}pr(e){return BA.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=W_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class BM{constructor(){this.Ur=new ZA,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ZA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CR{Kr(e){}shutdown(){}}class ZM{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const bR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ER{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class IR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);Le("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(y=>(Le("RestConnection","Received: ",y),y),y=>{throw Yh("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+td,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${bR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new HD;p.listenOnce(jD.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case T0.NO_ERROR:const C=p.getResponseJson();Le("Connection","XHR received:",JSON.stringify(C)),u(C);break;case T0.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),c(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case T0.HTTP_ERROR:const A=p.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const k=function(V){const K=V.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(K)>=0?K:le.UNKNOWN}(S.status);c(new xe(k,S.message))}else c(new xe(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new xe(le.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=BD(),c=ZD(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new qD({})),this.lo(p.initMessageHeaders,t,r),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Le("Connection","Creating WebChannel: "+y,p);const C=u.createWebChannel(y,p);let A=!1,S=!1;const k=new ER({Jr:K=>{S?Le("Connection","Not sending because WebChannel is closed:",K):(A||(Le("Connection","Opening WebChannel transport."),C.open(),A=!0),Le("Connection","WebChannel sending:",K),C.send(K))},Yr:()=>C.close()}),V=(K,ve,Ue)=>{K.listen(ve,st=>{try{Ue(st)}catch(It){setTimeout(()=>{throw It},0)}})};return V(C,Iu.EventType.OPEN,()=>{S||Le("Connection","WebChannel transport opened.")}),V(C,Iu.EventType.CLOSE,()=>{S||(S=!0,Le("Connection","WebChannel transport closed"),k.ro())}),V(C,Iu.EventType.ERROR,K=>{S||(S=!0,Yh("Connection","WebChannel transport errored:",K),k.ro(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),V(C,Iu.EventType.MESSAGE,K=>{var ve;if(!S){const Ue=K.data[0];Dt(!!Ue);const st=Ue,It=st.error||(null===(ve=st[0])||void 0===ve?void 0:ve.error);if(It){Le("Connection","WebChannel received error:",It);const vt=It.status;let wt=function(_n){const as=gr[_n];if(void 0!==as)return WE(as)}(vt),Zt=It.message;void 0===wt&&(wt=le.INTERNAL,Zt="Unknown error status: "+vt+" with message "+It.message),S=!0,k.ro(new xe(wt,Zt)),C.close()}else Le("Connection","WebChannel received:",Ue),k.oo(Ue)}}),V(c,hE.STAT_EVENT,K=>{K.stat===fE.PROXY?Le("Connection","Detected buffering proxy"):K.stat===fE.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.io()},0),k}}function jM(){return"undefined"!=typeof window?window:null}function xI(){return"undefined"!=typeof document?document:null}function yw(n){return new vM(n,!0)}class qA{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class qM{constructor(e,t,r,i,u,c,p,y){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new qA(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Sr(t.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}jo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TR extends qM{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function iI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:ot(),i=e.targetChange.targetIds||[],u=function(y,C){return y.N?(Dt(void 0===C||"string"==typeof C),Rr.fromBase64String(C||"")):(Dt(void 0===C||C instanceof Uint8Array),Rr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const C=void 0===y.code?le.UNKNOWN:WE(y.code);return new xe(C,y.message||"")}(c);t=new W0(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=xs(n,r.document.name),u=li(r.document.updateTime),c=new oi({mapValue:{fields:r.document.fields}}),p=jn.newFoundDocument(i,u,c);t=new z_(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=xs(n,r.document),u=r.readTime?li(r.readTime):yt.min(),c=jn.newNoDocument(i,u);t=new z_([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=xs(n,r.document);t=new z_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ot();{const r=e.filter,u=new hA(r.count||0);t=new G0(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return yt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?yt.min():u.readTime?li(u.readTime):yt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=xa(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=F_(p)?{documents:Q0(i,p)}:{query:sg(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=gA(i,u.resumeToken):u.snapshotVersion.compareTo(yt.min())>0&&(c.readTime=K_(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function bM(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=xa(this.M),t.removeTarget=e,this.Lo(t)}}class DR extends qM{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function CM(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let u=li(r.updateTime?r.updateTime:i);return u.isEqual(yt.min())&&(u=li(i)),new dA(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.tu(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=xa(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cf(this.M,r))};this.Lo(t)}}class AR extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(le.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(le.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class SR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Sr(t),this.uu=!1):Le("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class xR{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,me.Z)(function*(){var y;wf(c)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,me.Z)(function*(C){const A=Ge(C);A.wu.add(4),yield uy(A),A.yu.set("Unknown"),A.wu.delete(4),yield vw(A)}),function(C){return y.apply(this,arguments)})(c))}))}),this.yu=new SR(r,i)}}function vw(n){return HA.apply(this,arguments)}function HA(){return HA=(0,me.Z)(function*(n){if(wf(n))for(const e of n.mu)yield e(!0)}),HA.apply(this,arguments)}function uy(n){return $A.apply(this,arguments)}function $A(){return $A=(0,me.Z)(function*(n){for(const e of n.mu)yield e(!1)}),$A.apply(this,arguments)}function MI(n,e){const t=Ge(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),zA(t)?WA(t):cy(t).Mo()&&GA(t,e))}function ww(n,e){const t=Ge(n),r=cy(t);t._u.delete(e),r.Mo()&&HM(t,e),0===t._u.size&&(r.Mo()?r.$o():wf(t)&&t.yu.set("Unknown"))}function GA(n,e){n.pu.Z(e.targetId),cy(n).Ho(e)}function HM(n,e){n.pu.Z(e),cy(n).Jo(e)}function WA(n){n.pu=new YE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),cy(n).start(),n.yu.au()}function zA(n){return wf(n)&&!cy(n).ko()&&n._u.size>0}function wf(n){return 0===Ge(n).wu.size}function $M(n){n.pu=void 0}function MR(n){return KA.apply(this,arguments)}function KA(){return KA=(0,me.Z)(function*(n){n._u.forEach((e,t)=>{GA(n,e)})}),KA.apply(this,arguments)}function OR(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,me.Z)(function*(n,e){$M(n),zA(n)?(n.yu.lu(e),WA(n)):n.yu.set("Unknown")}),YA.apply(this,arguments)}function PR(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,me.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof W0&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i._u.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i._u.delete(p),i.pu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield OI(n,r)}else if(e instanceof z_?n.pu.ut(e):e instanceof G0?n.pu._t(e):n.pu.ht(e),!t.isEqual(yt.min()))try{const r=yield Ee(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const C=i._u.get(y);C&&i._u.set(y,C.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i._u.get(p);if(!y)return;i._u.set(p,y.withResumeToken(Rr.EMPTY_BYTE_STRING,y.snapshotVersion)),HM(i,p);const C=new fd(y.target,p,1,y.sequenceNumber);GA(i,C)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield OI(n,r)}var r}),QA.apply(this,arguments)}function OI(n,e,t){return JA.apply(this,arguments)}function JA(){return JA=(0,me.Z)(function*(n,e,t){if(!Bl(e))throw e;n.wu.add(1),yield uy(n),n.yu.set("Offline"),t||(t=()=>Ee(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield vw(n)}))}),JA.apply(this,arguments)}function GM(n,e){return e().catch(t=>OI(n,t,e))}function ly(n){return XA.apply(this,arguments)}function XA(){return XA=(0,me.Z)(function*(n){const e=Ge(n),t=Cf(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;kR(e);)try{const i=yield fn(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,NR(e,i)}catch(i){yield OI(e,i)}WM(e)&&zM(e)}),XA.apply(this,arguments)}function kR(n){return wf(n)&&n.du.length<10}function NR(n,e){n.du.push(e);const t=Cf(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function WM(n){return wf(n)&&!Cf(n).ko()&&n.du.length>0}function zM(n){Cf(n).start()}function RR(n){return eS.apply(this,arguments)}function eS(){return eS=(0,me.Z)(function*(n){Cf(n).nu()}),eS.apply(this,arguments)}function FR(n){return tS.apply(this,arguments)}function tS(){return tS=(0,me.Z)(function*(n){const e=Cf(n);for(const t of n.du)e.Zo(t.mutations)}),tS.apply(this,arguments)}function LR(n,e,t){return nS.apply(this,arguments)}function nS(){return nS=(0,me.Z)(function*(n,e,t){const r=n.du.shift(),i=iw.from(r,e,t);yield GM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ly(n)}),nS.apply(this,arguments)}function UR(n,e){return rS.apply(this,arguments)}function rS(){return rS=(0,me.Z)(function*(n,e){var t;e&&Cf(n).Xo&&(yield(t=(0,me.Z)(function*(r,i){if(q0(u=i.code)&&u!==le.ABORTED){const c=r.du.shift();Cf(r).Fo(),yield GM(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ly(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),WM(n)&&zM(n)}),rS.apply(this,arguments)}function KM(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,me.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=wf(t);t.wu.add(3),yield uy(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield vw(t)}),iS.apply(this,arguments)}function sS(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t.wu.delete(2),yield vw(t)):e||(t.wu.add(2),yield uy(t),t.yu.set("Unknown"))}),oS.apply(this,arguments)}function cy(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ge(e);return i.iu(),new TR(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:MR.bind(null,n),eo:OR.bind(null,n),zo:PR.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Fo(),zA(n)?WA(n):n.yu.set("Unknown")):(yield n.Iu.stop(),$M(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Cf(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ge(e);return i.iu(),new DR(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:RR.bind(null,n),eo:UR.bind(null,n),eu:FR.bind(null,n),tu:LR.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),yield ly(n)):(yield n.Tu.stop(),n.du.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class aS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new aS(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(n,e){if(Sr("AsyncQueue",`${e}: ${n}`),Bl(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class hy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=$0(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new hy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YM{constructor(){this.Eu=new pr(He.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ot():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class fy{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new fy(e,t,hy.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class VR{constructor(){this.Ru=void 0,this.listeners=[]}}class BR{constructor(){this.queries=new Sa(e=>B_(e),ad),this.onlineState="Unknown",this.bu=new Set}}function uS(n,e){return lS.apply(this,arguments)}function lS(){return lS=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new VR),i)try{u.Ru=yield t.onListen(r)}catch(c){const p=dy(c,`Initialization of query '${Z_(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&hS(t)}),lS.apply(this,arguments)}function cS(n,e){return dS.apply(this,arguments)}function dS(){return dS=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dS.apply(this,arguments)}function ZR(n,e){const t=Ge(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Vu(i)&&(r=!0);c.Ru=i}}r&&hS(t)}function jR(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function hS(n){n.bu.forEach(e=>{e.next()})}class fS{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new fy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=fy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class qR{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class QM{constructor(e){this.M=e}wi(e){return xs(this.M,e)}mi(e){return e.metadata.exists?rI(this.M,e.document,!1):jn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return li(e)}}class HR{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=$t.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new QM(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||ln()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function gw(n,e,t,r){return pg.apply(this,arguments)}(e.localStore,new QM(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield mw(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function JM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class XM{constructor(e){this.key=e}}class eO{constructor(e){this.key=e}}class tO{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=ln(),this.mutatedKeys=ln(),this.Gu=VE(e),this.Qu=new hy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new YM,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,C="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,S)=>{const k=i.get(A),V=ng(this.query,S)?S:null,K=!!k&&this.mutatedKeys.has(k.key),ve=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ue=!1;k&&V?k.data.isEqual(V.data)?K!==ve&&(r.track({type:3,doc:V}),Ue=!0):this.Hu(k,V)||(r.track({type:2,doc:V}),Ue=!0,(y&&this.Gu(V,y)>0||C&&this.Gu(V,C)<0)&&(p=!0)):!k&&V?(r.track({type:0,doc:V}),Ue=!0):k&&!V&&(r.track({type:1,doc:k}),Ue=!0,(y||C)&&(p=!0)),Ue&&(V?(c=c.add(V),u=ve?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:c,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,A)=>function(S,k){const V=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return V(S)-V(k)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,y=p!==this.qu;return this.qu=p,0!==u.length||y?{snapshot:new fy(this.query,e.Qu,i,u,e.mutatedKeys,0===p,y,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new YM,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ln(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new eO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new XM(r))}),t}ta(e){this.Uu=e._i,this.Ku=ln();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return fy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class $R{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GR{constructor(e){this.key=e,this.na=!1}}class WR{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Sa(p=>B_(p),ad),this.ra=new Map,this.oa=new Set,this.ua=new pr(He.comparator),this.aa=new Map,this.ca=new LA,this.ha={},this.la=new Map,this.fa=md.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function zR(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,me.Z)(function*(n,e){const t=LS(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield Gr(t.localStore,po(e));t.isPrimaryClient&&MI(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield gS(t,e,r,"current"===p)}return i}),pS.apply(this,arguments)}function gS(n,e,t,r){return mS.apply(this,arguments)}function mS(){return mS=(0,me.Z)(function*(n,e,t,r){n._a=(A,S,k)=>{return(V=(0,me.Z)(function*(K,ve,Ue,st){let It=ve.view.Wu(Ue);It.ii&&(It=yield vf(K.localStore,ve.query,!1).then(({documents:Zt})=>ve.view.Wu(Zt,It)));const vt=st&&st.targetChanges.get(ve.targetId),wt=ve.view.applyChanges(It,K.isPrimaryClient,vt);return DS(K,ve.targetId,wt.Xu),wt.snapshot}),function(K,ve,Ue,st){return V.apply(this,arguments)})(n,A,S,k);var V};const i=yield vf(n.localStore,e,!0),u=new tO(e,i._i),c=u.Wu(i.documents),p=lf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);DS(n,t,y.Xu);const C=new $R(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),y.snapshot}),mS.apply(this,arguments)}function KR(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!ad(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield go(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ww(t.remoteStore,r.targetId),py(t,r.targetId)}).catch(_d))):(py(t,r.targetId),yield go(t.localStore,r.targetId,!0))}),_S.apply(this,arguments)}function yS(){return yS=(0,me.Z)(function*(n,e,t){const r=US(n);try{const i=yield function(u,c){const p=Ge(u),y=Kn.now(),C=c.reduce((S,k)=>S.add(k.key),ln());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.fi.Ks(S,C).next(k=>{A=k;const V=[];for(const K of c){const ve=HE(K,A.get(K.key));null!=ve&&V.push(new Ll(K.key,ve,DE(ve.value.mapValue),Fr.exists(!0)))}return p.Bs.addMutationBatch(S,y,V,c)})).then(S=>(S.applyToLocalDocumentSet(A),{batchId:S.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.ha[u.currentUser.toKey()];y||(y=new pr(kt)),y=y.insert(c,p),u.ha[u.currentUser.toKey()]=y}(r,i.batchId,t),yield yd(r,i.changes),yield ly(r.remoteStore)}catch(i){const u=dy(i,"Failed to persist write");t.reject(u)}}),yS.apply(this,arguments)}function nO(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield ft(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Dt(c.na):i.removedDocuments.size>0&&(Dt(c.na),c.na=!1))}),yield yd(t,r,e)}catch(r){yield _d(r)}}),vS.apply(this,arguments)}function rO(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ge(u);p.onlineState=c;let y=!1;p.queries.forEach((C,A)=>{for(const S of A.listeners)S.Pu(c)&&(y=!0)}),y&&hS(p)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QR(n,e,t){return wS.apply(this,arguments)}function wS(){return wS=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new pr(He.comparator);c=c.insert(u,jn.newNoDocument(u,yt.min()));const p=ln().add(u),y=new ig(yt.min(),new Map,new Rn(kt),c,p);yield nO(r,y),r.ua=r.ua.remove(u),r.aa.delete(e),AS(r)}else yield go(r.localStore,e,!1).then(()=>py(r,e,t)).catch(_d)}),wS.apply(this,arguments)}function JR(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield rt(t.localStore,e);TS(t,r,null),IS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yd(t,i)}catch(i){yield _d(i)}}),CS.apply(this,arguments)}function XR(n,e,t){return bS.apply(this,arguments)}function bS(){return bS=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(u,c){const p=Ge(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let C;return p.Bs.lookupMutationBatch(y,c).next(A=>(Dt(null!==A),C=A.keys(),p.Bs.removeMutationBatch(y,A))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.fi.Ks(y,C))})}(r.localStore,e);TS(r,e,t),IS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yd(r,i)}catch(i){yield _d(i)}}),bS.apply(this,arguments)}function ES(){return ES=(0,me.Z)(function*(n,e){const t=Ge(n);wf(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ge(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=dy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ES.apply(this,arguments)}function IS(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function TS(n,e,t){const r=Ge(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||iO(n,r)})}function iO(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(ww(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),AS(n))}function DS(n,e,t){for(const r of t)r instanceof XM?(n.ca.addReference(r.key,e),tF(n,r)):r instanceof eO?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||iO(n,r.key)):ot()}function tF(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.oa.add(r),AS(n))}function AS(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new He($t.fromString(e)),r=n.fa.next();n.aa.set(r,new GR(t)),n.ua=n.ua.insert(t,r),MI(n.remoteStore,new fd(po(sf(t.path)),r,2,Ss.A))}}function yd(n,e,t){return SS.apply(this,arguments)}function SS(){return SS=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,y)=>{c.push(r._a(y,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,C.fromCache?"not-current":"current"),i.push(C);const A=L.Ys(y.targetId,C);u.push(A)}}))}),yield Promise.all(c),r.sa.zo(i),yield(p=(0,me.Z)(function*(y,C){const A=Ge(y);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(C,k=>de.forEach(k.Hs,V=>A.persistence.referenceDelegate.addReference(S,k.targetId,V)).next(()=>de.forEach(k.Js,V=>A.persistence.referenceDelegate.removeReference(S,k.targetId,V)))))}catch(S){if(!Bl(S))throw S;Le("LocalStore","Failed to update sequence numbers: "+S)}for(const S of C){const k=S.targetId;if(!S.fromCache){const V=A.ui.get(k),ve=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);A.ui=A.ui.insert(k,ve)}}}),function(y,C){return p.apply(this,arguments)})(r.localStore,u))}),SS.apply(this,arguments)}function nF(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield Ve(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(p=>{p.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yd(t,r.di)}var i}),xS.apply(this,arguments)}function rF(n,e){const t=Ge(n),r=t.aa.get(e);if(r&&r.na)return ln().add(r.key);{let i=ln();const u=t.ra.get(e);if(!u)return i;for(const c of u){const p=t.ia.get(c);i=i.unionWith(p.view.ju)}return i}}function iF(n,e){return MS.apply(this,arguments)}function MS(){return MS=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield vf(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&DS(t,e.targetId,i.Xu),i}),MS.apply(this,arguments)}function sF(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,me.Z)(function*(n,e){const t=Ge(n);return oy(t.localStore,e).then(r=>yd(t,r))}),OS.apply(this,arguments)}function oF(n,e,t,r){return PS.apply(this,arguments)}function PS(){return PS=(0,me.Z)(function*(n,e,t,r){const i=Ge(n),u=yield function(c,p){const y=Ge(c),C=Ge(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.fn(A,p).next(S=>S?y.fi.Ks(A,S):de.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield ly(i.remoteStore):"acknowledged"===t||"rejected"===t?(TS(i,e,r||null),IS(i,e),p=e,Ge(Ge(i.localStore).Bs)._n(p)):ot(),yield yd(i,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),PS.apply(this,arguments)}function kS(){return kS=(0,me.Z)(function*(n,e){const t=Ge(n);if(LS(t),US(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield sO(t,r.toArray());t.da=!0,yield sS(t.remoteStore,!0);for(const u of i)MI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(py(t,c),go(t.localStore,c,!0))),ww(t.remoteStore,c)}),yield i,yield sO(t,r),function(u){const c=Ge(u);c.aa.forEach((p,y)=>{ww(c.remoteStore,y)}),c.ca.Si(),c.aa=new Map,c.ua=new pr(He.comparator)}(t),t.da=!1,yield sS(t.remoteStore,!1)}}),kS.apply(this,arguments)}function sO(n,e,t){return NS.apply(this,arguments)}function NS(){return NS=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[];for(const c of e){let p;const y=r.ra.get(c);if(y&&0!==y.length){p=yield Gr(r.localStore,po(y[0]));for(const C of y){const A=r.ia.get(C),S=yield iF(r,A);S.snapshot&&u.push(S.snapshot)}}else{const C=yield sy(r.localStore,c);p=yield Gr(r.localStore,C),yield gS(r,oO(C),c,!1)}i.push(p)}return r.sa.zo(u),i}),NS.apply(this,arguments)}function oO(n){return LE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uF(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Fs()}function lF(n,e,t,r){return RS.apply(this,arguments)}function RS(){return RS=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);if(i.da)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield oy(i.localStore,j_(u[0])),p=ig.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield yd(i,c,p);break}case"rejected":yield go(i.localStore,e,!0),py(i,e,r);break;default:ot()}}),RS.apply(this,arguments)}function cF(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,me.Z)(function*(n,e,t){const r=LS(n);if(r.da){for(const i of e){if(r.ra.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const u=yield sy(r.localStore,i),c=yield Gr(r.localStore,u);yield gS(r,oO(u),c.targetId,!1),MI(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield go(r.localStore,i,!1).then(()=>{ww(r.remoteStore,i),py(r,i)}).catch(_d))}}),FS.apply(this,arguments)}function LS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QR.bind(null,e),e.sa.zo=ZR.bind(null,e.eventManager),e.sa.wa=jR.bind(null,e.eventManager),e}function US(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XR.bind(null,e),e}class aO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=yw(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return ye(this.persistence,new q,e.initialUser,this.M)}ya(e){return new vR(UA.Yi,this.M)}ga(e){return new BM}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uO extends aO{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield US(r.Ta.syncEngine),yield ly(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return ye(this.persistence,new q,e.initialUser,this.M)}pa(e){return new kM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=x(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Os.withCacheSize(this.cacheSizeBytes):Os.DEFAULT;return new v(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jM(),xI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new BM}}class hF extends uO{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof jA&&(r.sharedClientState.syncEngine={$r:oF.bind(null,i),Br:lF.bind(null,i),Lr:cF.bind(null,i),Fs:uF.bind(null,i),Fr:sF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,me.Z)(function*(c){yield function aF(n,e){return kS.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=jM();if(!jA.vt(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=x(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class VS{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>rO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nF.bind(null,r.syncEngine),yield sS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new BR}createDatastore(e){const t=yw(e.databaseInfo.databaseId),r=new IR(e.databaseInfo);return new AR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>rO(this.syncEngine,p,0),c=ZM.vt()?new ZM:new CR,new xR(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,C){const A=new WR(r,i,u,c,p,y);return C&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Le("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield uy(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lO(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class PI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fF{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new $r,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,me.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new qR(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,me.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const p=Ge(u),y=xa(p.M)+"/documents",C={documents:c.map(V=>Y_(p.M,V))},A=yield p._o("BatchGetDocuments",y,C),S=new Map;A.forEach(V=>{const K=function Y0(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=xs(t,r.found.name),u=li(r.found.updateTime),c=new oi({mapValue:{fields:r.found.fields}});return jn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=xs(t,r.missing),u=li(r.readTime);return jn.newNoDocument(i,u)}(n,e):ot()}(p.M,V);S.set(K.key.toString(),K)});const k=[];return c.forEach(V=>{const K=S.get(V.toString());Dt(!!K),k.push(K)}),k}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=He.fromPath(i);e.mutations.push(new G_(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=Ge(i),p=xa(c.M)+"/documents",y={writes:u.map(C=>cf(c.M,C))};yield c.co("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Fr.updateTime(t):Fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fr.updateTime(t)}return Fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gF{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new qA(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,me.Z)(function*(){const t=new pF(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Xh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!q0(t)}return!1}}class mF{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=si.UNAUTHENTICATED,this.clientId=A0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(p){Le("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Le("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=dy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function cO(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield Ve(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),BS.apply(this,arguments)}function dO(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield jS(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>KM(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>KM(e.remoteStore,u)),n.onlineComponents=e}),ZS.apply(this,arguments)}function jS(n){return qS.apply(this,arguments)}function qS(){return qS=(0,me.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield cO(n,new aO)),n.offlineComponents}),qS.apply(this,arguments)}function kI(n){return HS.apply(this,arguments)}function HS(){return HS=(0,me.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield dO(n,new VS)),n.onlineComponents}),HS.apply(this,arguments)}function hO(n){return jS(n).then(e=>e.persistence)}function $S(n){return jS(n).then(e=>e.localStore)}function fO(n){return kI(n).then(e=>e.remoteStore)}function GS(n){return kI(n).then(e=>e.syncEngine)}function gy(n){return WS.apply(this,arguments)}function WS(){return WS=(0,me.Z)(function*(n){const e=yield kI(n),t=e.eventManager;return t.onListen=zR.bind(null,e.syncEngine),t.onUnlisten=KR.bind(null,e.syncEngine),t}),WS.apply(this,arguments)}function pO(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,p,y){const C=new PI({next:S=>{u.enqueueAndForget(()=>cS(i,A));const k=S.docs.has(c);!k&&S.fromCache?y.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&p&&"server"===p.source?y.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new fS(sf(c.path),C,{includeMetadataChanges:!0,ku:!0});return uS(i,A)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}function gO(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,p,y){const C=new PI({next:S=>{u.enqueueAndForget(()=>cS(i,A)),S.fromCache&&"server"===p.source?y.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new fS(c,C,{includeMetadataChanges:!0,ku:!0});return uS(i,A)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}const mO=new Map;function zS(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _O(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yO(n){if(!He.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vO(n){if(He.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=NI(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wO(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_O("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CO({}),this._settingsFrozen=!1,e instanceof xl?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(i.options.projectId)}(e))}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new WD;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new QD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mO.get(e);t&&(Le("ComponentProvider","Removing Datastore"),mO.delete(e),t.terminate())}(this),Promise.resolve()}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class ss{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class $l extends ss{constructor(e,t,r){super(e,t,sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new He(e))}withConverter(e){return new $l(this.firestore,e,this._path)}}function bO(n,e,...t){if(n=(0,N.m9)(n),zS("collection","path",e),n instanceof Cw){const r=$t.fromString(e,...t);return vO(r),new $l(n,null,r)}{if(!(n instanceof Yn||n instanceof $l))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($t.fromString(e,...t));return vO(r),new $l(n.firestore,null,r)}}function RI(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=A0.R()),zS("doc","path",e),n instanceof Cw){const r=$t.fromString(e,...t);return yO(r),new Yn(n,null,new He(r))}{if(!(n instanceof Yn||n instanceof $l))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($t.fromString(e,...t));return yO(r),new Yn(n.firestore,n instanceof $l?n.converter:null,new He(r))}}function EO(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof Yn||n instanceof $l)&&(e instanceof Yn||e instanceof $l)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IO(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof ss&&e instanceof ss&&n.firestore===e.firestore&&ad(n._query,e._query)&&n.converter===e.converter}class AF{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new qA(this,"async_queue_retry"),this.Qa=()=>{const t=xI();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=xI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=xI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new $r;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,me.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Bl(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Sr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=aS.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&ot()}verifyOperationInProgress(){}Ja(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function KS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class SF{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sr extends Cw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new AF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||TO(this),this._firestoreClient.terminate()}}function Wr(n){return n._firestoreClient||TO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TO(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new tA(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new mF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function DO(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield cO(n,t),yield dO(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function AO(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gl(Rr.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gl(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mg{constructor(e){this._methodName=e}}class FI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const UF=/^__.*__$/;class VF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms):new dd(e,this.data,t,this.fieldTransforms)}}class SO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class LI{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new LI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return BI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(xO(this.ec)&&UF.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class BF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||yw(e)}lc(e,t,r,i=!1){return new LI({ec:e,methodName:t,hc:r,path:xr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function _g(n){const e=n._freezeSettings(),t=yw(n._databaseId);return new BF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function UI(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);XS("Data must be an object, but it was:",c,r);const p=PO(r,c);let y,C;if(u.merge)y=new Jh(c.fieldMask),C=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const S of u.mergeFields){const k=ex(e,S,t);if(!c.contains(k))throw new xe(le.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);NO(A,k)||A.push(k)}y=new Jh(A),C=c.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,C=c.fieldTransforms;return new VF(new oi(p),y,C)}class bw extends mg{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bw}}function MO(n,e,t){return new LI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class YS extends mg{_toFieldTransform(e){return new Aa(e.path,new ud)}isEqual(e){return e instanceof YS}}class ZF extends mg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=MO(this,e,!0),r=this.fc.map(u=>yg(u,t)),i=new ld(r);return new Aa(e.path,i)}isEqual(e){return this===e}}class jF extends mg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=MO(this,e,!0),r=this.fc.map(u=>yg(u,t)),i=new Rl(r);return new Aa(e.path,i)}isEqual(e){return this===e}}class qF extends mg{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new cd(e.M,F0(e.M,this.dc));return new Aa(e.path,t)}isEqual(e){return this===e}}function QS(n,e,t,r){const i=n.lc(1,e,t);XS("Data must be an object, but it was:",i,r);const u=[],c=oi.empty();Tu(r,(y,C)=>{const A=VI(e,y,t);C=(0,N.m9)(C);const S=i.oc(A);if(C instanceof bw)u.push(A);else{const k=yg(C,S);null!=k&&(u.push(A),c.set(A,k))}});const p=new Jh(u);return new SO(c,p,i.fieldTransforms)}function JS(n,e,t,r,i,u){const c=n.lc(1,e,t),p=[ex(e,r,t)],y=[i];if(u.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<u.length;k+=2)p.push(ex(e,u[k])),y.push(u[k+1]);const C=[],A=oi.empty();for(let k=p.length-1;k>=0;--k)if(!NO(C,p[k])){const V=p[k];let K=y[k];K=(0,N.m9)(K);const ve=c.oc(V);if(K instanceof bw)C.push(V);else{const Ue=yg(K,ve);null!=Ue&&(C.push(V),A.set(V,Ue))}}const S=new Jh(C);return new SO(A,S,c.fieldTransforms)}function OO(n,e,t,r=!1){return yg(t,n.lc(r?4:3,e))}function yg(n,e){if(kO(n=(0,N.m9)(n)))return XS("Unsupported field value:",e,n),PO(n,e);if(n instanceof mg)return function(t,r){if(!xO(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=yg(c,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return F0(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Kn.fromDate(t);return{timestampValue:K_(r.M,i)}}if(t instanceof Kn){const i=new Kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:K_(r.M,i)}}if(t instanceof FI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gl)return{bytesValue:gA(r.M,t._byteString)};if(t instanceof Yn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${NI(t)}`)}(n,e)}function PO(n,e){const t={};return yE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tu(n,(r,i)=>{const u=yg(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function kO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof FI||n instanceof Gl||n instanceof Yn||n instanceof mg)}function XS(n,e,t){if(!kO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=NI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function ex(n,e,t){if((e=(0,N.m9)(e))instanceof vd)return e._internalPath;if("string"==typeof e)return VI(n,e);throw BI("Field path arguments must be of type string or ",n,!1,void 0,t)}const HF=new RegExp("[~\\*/\\[\\]]");function VI(n,e,t){if(e.search(HF)>=0)throw BI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vd(...e.split("."))._internalPath}catch(r){throw BI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BI(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new xe(le.INVALID_ARGUMENT,p+n+y)}function NO(n,e){return n.some(t=>t.isEqual(e))}class Ew{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $F(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $F extends Ew{data(){return super.data()}}function ZI(n,e){return"string"==typeof e?VI(n,e):e instanceof vd?e._internalPath:e._delegate._internalPath}class vg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wd extends Ew{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Iw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Iw extends wd{data(e={}){return super.data(e)}}class bf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Iw(this._firestore,this._userDataWriter,r.key,r,new vg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Iw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new Iw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,C=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),C=u.indexOf(c.doc.key)),{type:GF(c.type),doc:p,oldIndex:y,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function RO(n,e){return n instanceof wd&&e instanceof wd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bf&&e instanceof bf&&n._firestore===e._firestore&&IO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function FO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tw{}function Ef(n,...e){for(const t of e)n=t._apply(n);return n}class WF extends Tw{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=_g(e.firestore),r=function(i,u,c,p,y,C,A){let S;if(y.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){jO(A,C);const V=[];for(const K of A)V.push(ZO(p,i,K));S={arrayValue:{values:V}}}else S=ZO(p,i,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||jO(A,C),S=OO(c,"where",A,"in"===C||"not-in"===C);const k=ui.create(y,C,S);return function(V,K){if(K.S()){const Ue=tg(V);if(null!==Ue&&!Ue.isEqual(K.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${K.field.toString()}'`);const st=U_(V);null!==st&&qO(0,K.field,st)}const ve=function(Ue,st){for(const It of Ue.filters)if(st.indexOf(It.op)>=0)return It.op;return null}(V,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==ve)throw new xe(le.INVALID_ARGUMENT,ve===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${ve.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ss(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class KF extends Tw{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new rf(i,u);return function(p,y){if(null===U_(p)){const C=tg(p);null!==C&&qO(0,C,y.field)}}(r,c),c}(e._query,this._c,this.gc);return new ss(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new fo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class LO extends Tw{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new ss(e.firestore,e.converter,aA(e._query,this.yc,this.Ic))}}class UO extends Tw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=BO(e,this.type,this.Tc,this.Ec);return new ss(e.firestore,e.converter,(i=t,new fo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class VO extends Tw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=BO(e,this.type,this.Tc,this.Ec);return new ss(e.firestore,e.converter,(i=t,new fo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function BO(n,e,t,r){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof Ew)return function(i,u,c,p,y){if(!p)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const C=[];for(const A of of(i))if(A.field.isKeyField())C.push(sd(u,p.key));else{const S=p.data.field(A.field);if(x0(S))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=A.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}C.push(S)}return new ho(C,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_g(n.firestore);return function(u,c,p,y,C,A){const S=u.explicitOrderBy;if(C.length>S.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let V=0;V<C.length;V++){const K=C[V];if(S[V].field.isKeyField()){if("string"!=typeof K)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof K}`);if(!V_(u)&&-1!==K.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${K}' contains a slash.`);const ve=u.path.child($t.fromString(K));if(!He.isDocumentKey(ve))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ve}' is not because it contains an odd number of segments.`);const Ue=new He(ve);k.push(sd(c,Ue))}else{const ve=OO(p,y,K);k.push(ve)}}return new ho(k,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ZO(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($t.fromString(t));if(!He.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sd(n,new He(r))}if(t instanceof Yn)return sd(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${NI(t)}.`)}function jO(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function qO(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const rL={maxAttempts:5};class tx{convertValue(e,t="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return Tu(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new FI(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rd(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){const t=nd(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$t.fromString(e);Dt(sI(r));const i=new xl(r.get(1),r.get(3)),u=new He(r.popFirst(5));return i.isEqual(t)||Sr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function jI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iL extends tx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}class HO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_g(e)}set(e,t,r){this._verifyNotCommitted();const i=If(e,this._firestore),u=jI(i.converter,t,r),c=UI(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=If(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof vd?JS(this._dataReader,"WriteBatch.update",u._key,t,r,i):QS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=If(e,this._firestore);return this._mutations=this._mutations.concat(new $_(t._key,Fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function If(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wg extends tx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function $O(n,e,t){n=Jt(n,Yn);const r=Jt(n.firestore,sr),i=jI(n.converter,e,t);return my(r,[UI(_g(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Fr.none())])}function GO(n,e,t,...r){n=Jt(n,Yn);const i=Jt(n.firestore,sr),u=_g(i);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof vd?JS(u,"updateDoc",n._key,e,t,r):QS(u,"updateDoc",n._key,e),my(i,[c.toMutation(n._key,Fr.exists(!0))])}function WO(n,...e){var t,r,i;n=(0,N.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||KS(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(KS(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let y,C,A;if(n instanceof Yn)C=Jt(n.firestore,sr),A=sf(n._key.path),y={next:S=>{e[c]&&e[c](nx(C,n,S))},error:e[c+1],complete:e[c+2]};else{const S=Jt(n,ss);C=Jt(S.firestore,sr),A=S._query;const k=new wg(C);y={next:V=>{e[c]&&e[c](new bf(C,k,S,V))},error:e[c+1],complete:e[c+2]},FO(n._query)}return function(S,k,V,K){const ve=new PI(K),Ue=new fS(k,ve,V);return S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return uS(yield gy(S),Ue)})),()=>{ve.Aa(),S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return cS(yield gy(S),Ue)}))}}(Wr(C),A,p,y)}function my(n,e){return function(t,r){const i=new $r;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function YR(n,e,t){return yS.apply(this,arguments)}(yield GS(t),r,i)})),i.promise}(Wr(n),e)}function nx(n,e,t){const r=t.docs.get(e._key),i=new wg(n);return new wd(n,i,e._key,r,new vg(t.hasPendingWrites,t.fromCache),e.converter)}class pL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_g(e)}get(e){const t=If(e,this._firestore),r=new iL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ot();const u=i[0];if(u.isFoundDocument())return new Ew(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Ew(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const i=If(e,this._firestore),u=jI(i.converter,t,r),c=UI(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=If(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof vd?JS(this._dataReader,"Transaction.update",u._key,t,r,i):QS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=If(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=If(e,this._firestore),r=new wg(this._firestore);return super.get(e).then(i=>new wd(this._firestore,r,t._key,i._document,new vg(!1,!1),t.converter))}}function rx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KO(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function YO(){if(!function vE(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){td=wi.SDK_VERSION,(0,wi._registerComponent)(new ns.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new sr(i,new KD(t.getProvider("auth-internal")),new mE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,wi.registerVersion)(D0,"3.4.9",n),(0,wi.registerVersion)(D0,"3.4.9","esm2017")}();class Dw{constructor(e){this._delegate=e}static fromBase64String(e){return YO(),new Dw(Gl.fromBase64String(e))}static fromUint8Array(e){return KO(),new Dw(Gl.fromUint8Array(e))}toBase64(){return YO(),this._delegate.toBase64()}toUint8Array(){return KO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ix(n){return function EL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class IL{enableIndexedDbPersistence(e,t){return function MF(n,e){AO(n=Jt(n,sr));const t=Wr(n),r=n._freezeSettings(),i=new VS;return DO(t,i,new uO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function OF(n){AO(n=Jt(n,sr));const e=Wr(n),t=n._freezeSettings(),r=new VS;return DO(e,r,new hF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function PF(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ms.vt())return Promise.resolve();const i=r+"main";yield Ms.delete(i)}),function(r){return t.apply(this,arguments)})(x(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function TF(n,e,t,r={}){var i;const u=(n=Jt(n,Cw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Yh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=si.MOCK_USER;else{c=(0,N.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new si(y)}n._authCredentials=new zD(new pE(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function NF(n){return function _F(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield hO(n),t=yield fO(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i.wu.delete(0),vw(i)}(t)}))}(Wr(n=Jt(n,sr)))}(this._delegate)}disableNetwork(){return function RF(n){return function yF(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield hO(n),t=yield fO(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=Ge(i);u.wu.add(0),yield uy(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Wr(n=Jt(n,sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_O("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kF(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function eF(n,e){return ES.apply(this,arguments)}(yield GS(e),t)})),t.promise}(Wr(n=Jt(n,sr)))}(this._delegate)}onSnapshotsInSync(e){return function fL(n,e){return function CF(n,e){const t=new PI(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield gy(n),i=t,Ge(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield gy(n),i=t,void Ge(r).bu.delete(i);var r,i}))}}(Wr(n=Jt(n,sr)),KS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _y(this,bO(this._delegate,e))}catch(t){throw Ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,RI(this._delegate,e))}catch(t){throw Ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ks(this,function DF(n,e){if(n=Jt(n,Cw),zS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ss(n,null,(t=e,new fo($t.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gL(n,e,t){n=Jt(n,sr);const r=Object.assign(Object.assign({},rL),t);return function(i){if(i.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function bF(n,e,t){const r=new $r;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const i=yield(u=n,kI(u).then(c=>c.datastore));var u;new gF(n.asyncQueue,i,t,e,r).run()})),r.promise}(Wr(n),i=>e(new pL(n,i)),r)}(this._delegate,t=>e(new JO(this,t)))}batch(){return Wr(this._delegate),new XO(new HO(this._delegate,e=>my(this._delegate,e)))}loadBundle(e){return function FF(n,e){const t=Wr(n=Jt(n,sr)),r=new SF;return function EF(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,C){if(y instanceof Uint8Array)return lO(y,C);if(y instanceof ArrayBuffer)return lO(new Uint8Array(y),C);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new fF(y,c);var y}(t,yw(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function dF(n,e,t){const r=Ge(n);var i;(i=(0,me.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(k,V){const K=Ge(k),ve=li(V.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",Ue=>K._s.getBundleMetadata(Ue,V.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(ve)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(k=y).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);p._updateProgress(JM(y));const C=new HR(y,u.localStore,c.M);let A=yield c.ma();for(;A;){const k=yield C.Fu(A);k&&p._updateProgress(k),A=yield c.ma()}const S=yield C.complete();return yield yd(u,S.Lu,void 0),yield function(k,V){const K=Ge(k);return K.persistence.runTransaction("Save bundle","readwrite",ve=>K._s.saveBundleMetadata(ve,V))}(u.localStore,y),p._completeWith(S.progress),Promise.resolve(S.Bu)}catch(y){return Yh("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var k}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield GS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function LF(n,e){return function IF(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield $S(n),e)}))}(Wr(n=Jt(n,sr)),e).then(t=>t?new ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ks(this,t):null)}}class qI extends tx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dw(new Gl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class JO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qI(e)}get(e){const t=bg(e);return this._delegate.get(t).then(r=>new Aw(this._firestore,new wd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=bg(e);return r?(rx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=bg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=bg(e);return this._delegate.delete(t),this}}class XO{constructor(e){this._delegate=e}set(e,t,r){const i=bg(e);return r?(rx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=bg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=bg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Iw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Cg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Cg(e,new qI(e),t),i.set(t,u)),u}}Cg.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new Yn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new Pa(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _y(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _y(this.firestore,bO(this._delegate,e))}catch(t){throw Ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof Yn&&EO(this._delegate,e)}set(e,t){t=rx("DocumentReference.set",t);try{return t?$O(this._delegate,e,t):$O(this._delegate,e)}catch(r){throw Ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GO(this._delegate,e):GO(this._delegate,e,t,...r)}catch(i){throw Ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function dL(n){return my(Jt(n.firestore,sr),[new $_(n._key,Fr.none())])}(this._delegate)}onSnapshot(...e){const t=eP(e),r=tP(e,i=>new Aw(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function oL(n){n=Jt(n,Yn);const e=Jt(n.firestore,sr),t=Wr(e),r=new wg(e);return function vF(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const p=yield function(y,C){const A=Ge(y);return A.persistence.runTransaction("read document","readonly",S=>A.fi.Ls(S,C))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=dy(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield $S(n),e,t);var r})),t.promise}(t,n._key).then(i=>new wd(e,r,n._key,i,new vg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function aL(n){n=Jt(n,Yn);const e=Jt(n.firestore,sr);return pO(Wr(e),n._key,{source:"server"}).then(t=>nx(e,n,t))}(this._delegate):function sL(n){n=Jt(n,Yn);const e=Jt(n.firestore,sr);return pO(Wr(e),n._key).then(t=>nx(e,n,t))}(this._delegate),t.then(r=>new Aw(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}function Ps(n,e,t){return n.message=n.message.replace(e,t),n}function eP(n){for(const e of n)if("object"==typeof e&&!ix(e))return e;return{}}function tP(n,e){var t,r;let i;return i=ix(n[0])?n[0]:ix(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Aw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RO(this._delegate,e._delegate)}}class Sw extends Aw{data(e){const t=this._delegate.data(e);return function GD(n,e){n||ot()}(void 0!==t),t}}class ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qI(e)}where(e,t,r){try{return new ks(this.firestore,Ef(this._delegate,function zF(n,e,t){const r=e,i=ZI("where",n);return new WF(i,r,t)}(e,t,r)))}catch(i){throw Ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ks(this.firestore,Ef(this._delegate,function YF(n,e="asc"){const t=e,r=ZI("orderBy",n);return new KF(r,t)}(e,t)))}catch(r){throw Ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ks(this.firestore,Ef(this._delegate,function QF(n){return wO("limit",n),new LO("limit",n,"F")}(e)))}catch(t){throw Ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ks(this.firestore,Ef(this._delegate,function JF(n){return wO("limitToLast",n),new LO("limitToLast",n,"L")}(e)))}catch(t){throw Ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ks(this.firestore,Ef(this._delegate,function XF(...n){return new UO("startAt",n,!0)}(...e)))}catch(t){throw Ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ks(this.firestore,Ef(this._delegate,function eL(...n){return new UO("startAfter",n,!1)}(...e)))}catch(t){throw Ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ks(this.firestore,Ef(this._delegate,function tL(...n){return new VO("endBefore",n,!1)}(...e)))}catch(t){throw Ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ks(this.firestore,Ef(this._delegate,function nL(...n){return new VO("endAt",n,!0)}(...e)))}catch(t){throw Ps(t,"endAt()","Query.endAt()")}}isEqual(e){return IO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function lL(n){n=Jt(n,ss);const e=Jt(n.firestore,sr),t=Wr(e),r=new wg(e);return function wF(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const p=yield vf(i,u,!0),y=new tO(u,p._i),C=y.Wu(p.documents),A=y.applyChanges(C,!1);c.resolve(A.snapshot)}catch(p){const y=dy(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield $S(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function cL(n){n=Jt(n,ss);const e=Jt(n.firestore,sr),t=Wr(e),r=new wg(e);return gO(t,n._query,{source:"server"}).then(i=>new bf(e,r,n,i))}(this._delegate):function uL(n){n=Jt(n,ss);const e=Jt(n.firestore,sr),t=Wr(e),r=new wg(e);return FO(n._query),gO(t,n._query).then(i=>new bf(e,r,n,i))}(this._delegate),t.then(r=>new sx(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eP(e),r=tP(e,i=>new sx(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WO(this._delegate,t,r)}withConverter(e){return new ks(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}class DL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sw(this._firestore,r))})}isEqual(e){return RO(this._delegate,e._delegate)}}class _y extends ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?RI(this._delegate):RI(this._delegate,e))}catch(t){throw Ps(t,"doc()","CollectionReference.doc()")}}add(e){return function hL(n,e){const t=Jt(n.firestore,sr),r=RI(n),i=jI(n.converter,e);return my(t,[UI(_g(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return EO(this._delegate,e._delegate)}withConverter(e){return new _y(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}function bg(n){return Jt(n,Yn)}class ox{constructor(...e){this._delegate=new vd(...e)}static documentId(){return new ox(xr.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof vd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _L(){return new YS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Eg(e)}static delete(){const e=function mL(){return new bw("deleteField")}();return e._methodName="FieldValue.delete",new Eg(e)}static arrayUnion(...e){const t=function yL(...n){return new ZF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Eg(t)}static arrayRemove(...e){const t=function vL(...n){return new jF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Eg(t)}static increment(e){const t=function wL(n){return new qF("increment",n)}(e);return t._methodName="FieldValue.increment",new Eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const AL={Firestore:QO,GeoPoint:FI,Timestamp:Kn,Blob:Dw,Transaction:JO,WriteBatch:XO,DocumentReference:Pa,DocumentSnapshot:Aw,Query:ks,QueryDocumentSnapshot:Sw,QuerySnapshot:sx,CollectionReference:_y,FieldPath:ox,FieldValue:Eg,setLogLevel:function TL(n){!function $D(n){Sl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function xL(n){(function SL(n,e){n.INTERNAL.registerComponent(new ns.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},AL)))})(n,(e,t)=>new QO(e,t,new IL)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(jc.Z);var ax=R(6451),HI=R(5363),ML=R(6063);class OL extends ms.x{constructor(e=1/0,t=1/0,r=ML.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var nP=R(3099);function rP(n,e,t){var r,i;let u,c=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,nP.B)({connector:()=>new OL(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function iP(n,e){return(0,Yd.m)(e)?er(()=>n,e):er(()=>n)}var ux=R(9468);R(5867);const oP=new Map,FL={activated:!1,tokenObservers:[]},LL={initialized:!1,enabled:!1};function Ii(n){return oP.get(n)||FL}function Su(n,e){oP.set(n,e)}function GI(){return LL}class jL{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function qL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ns=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function uP(n){if(!Ii(n).activated)throw Ns.create("use-before-activation",{appName:n.name})}function hx(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(S){throw Ns.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Ns.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(S){throw Ns.create("fetch-parse-error",{originalErrorMessage:S.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const C=1e3*Number(y[1]),A=Date.now();return{token:p.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}}),fx.apply(this,arguments)}function zL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const xw="firebase-app-check-store";let KI=null;function cP(){return KI||(KI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ns.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(xw,{keyPath:"compositeKey"})}}catch(t){e(Ns.create("storage-open",{originalErrorMessage:t.message}))}}),KI)}function px(){return px=(0,me.Z)(function*(n,e){const r=(yield cP()).transaction(xw,"readwrite"),u=r.objectStore(xw).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var C;p(Ns.create("storage-set",{originalErrorMessage:null===(C=y.target.error)||void 0===C?void 0:C.message}))}})}),px.apply(this,arguments)}const Mw=new Ci.Yd("@firebase/app-check");function pP(n,e){return(0,N.hl)()?function JL(n,e){return function dP(n,e){return px.apply(this,arguments)}(function fP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Mw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gP(){return GI().enabled}function mP(){return yx.apply(this,arguments)}function yx(){return yx=(0,me.Z)(function*(){const n=GI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),yx.apply(this,arguments)}const i2={error:"UNKNOWN_ERROR"};function s2(n){return N.US.encodeString(JSON.stringify(n),!1)}function YI(n){return vx.apply(this,arguments)}function vx(){return vx=(0,me.Z)(function*(n,e=!1){const t=n.app;uP(t);const r=Ii(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&QI(y)&&(i=y)}if(!e&&i&&QI(i))return{token:i.token};let p,c=!1;if(gP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hx(zL(t,yield mP()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),c=!0);const y=yield r.exchangeTokenPromise;return yield pP(t,y),Su(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Mw.warn(y.message):Mw.error(y),u=y}return i?(p={token:i.token},Su(t,Object.assign(Object.assign({},r),{token:i})),yield pP(t,i)):p=a2(u),c&&yP(t,p),p}),vx.apply(this,arguments)}function Cx(n,e){const t=Ii(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Su(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function _P(n){const{app:e}=n,t=Ii(e);let r=t.tokenRefresher;r||(r=function o2(n){const{app:e}=n;return new jL((0,me.Z)(function*(){let r;if(r=Ii(e).token?yield YI(n,!0):yield YI(n),r.error)throw r.error}),()=>!0,()=>{const t=Ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Su(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yP(n,e){const t=Ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function QI(n){return n.expireTimeMillis-Date.now()>0}function a2(n){return{token:s2(i2),error:n}}class u2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ii(this.app);for(const t of e)Cx(this.app,t.next);return Promise.resolve()}}const DP="app-check-internal";!function b2(){(0,wi._registerComponent)(new ns.wA("app-check",n=>function l2(n,e){return new u2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DP).initialize()})),(0,wi._registerComponent)(new ns.wA(DP,n=>function c2(n){return{getToken:e=>YI(n,e),addTokenListener:e=>function wx(n,e,t,r){const{app:i}=n,u=Ii(i),c={next:t,error:r,type:e};if(Su(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&QI(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),_P(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>_P(n))}(n,"INTERNAL",e),removeTokenListener:e=>Cx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wi.registerVersion)("@firebase/app-check","0.5.8")}();class XI{constructor(){return(0,vn.vb)("app-check")}}"undefined"!=typeof window&&window;var SP=R(127);const Dx=new a.OlP("angularfire2.auth.use-emulator"),Ax=new a.OlP("angularfire2.auth.settings"),Sx=new a.OlP("angularfire2.auth.tenant-id"),xx=new a.OlP("angularfire2.auth.langugage-code"),Mx=new a.OlP("angularfire2.auth.use-device-language"),Ox=new a.OlP("angularfire.auth.persistence"),Px=(n,e,t,r,i,u,c,p)=>(0,Dr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[C,A]of Object.entries(c))y.settings[C]=A;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let kx=(()=>{class n{constructor(t,r,i,u,c,p,y,C,A,S,k,V){const K=new ms.x,ve=Xe(void 0).pipe((0,HI.Q)(c.outsideAngular),er(()=>u.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,8125)))),(0,dt.U)(()=>(0,Dr.on)(t,u,r)),(0,dt.U)(Ue=>Px(Ue,u,p,C,A,S,y,k)),rP({bufferSize:1,refCount:!1}));if($a(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{ve.pipe(ko()).subscribe();const st=ve.pipe(er(wt=>wt.getRedirectResult().then(Zt=>Zt,()=>null)),vn.iC,rP({bufferSize:1,refCount:!1})),It=ve.pipe(er(wt=>new Xn.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>wt.onAuthStateChanged(_n=>Zt.next(_n),_n=>Zt.error(_n),()=>Zt.complete()))})))),vt=ve.pipe(er(wt=>new Xn.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>wt.onIdTokenChanged(_n=>Zt.next(_n),_n=>Zt.error(_n),()=>Zt.complete()))}))));this.authState=st.pipe(iP(It),(0,ux.R)(c.outsideAngular),(0,HI.Q)(c.insideAngular)),this.user=st.pipe(iP(vt),(0,ux.R)(c.outsideAngular),(0,HI.Q)(c.insideAngular)),this.idToken=this.user.pipe(er(wt=>wt?(0,Tn.D)(wt.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(er(wt=>wt?(0,Tn.D)(wt.getIdTokenResult()):Xe(null))),this.credential=(0,ax.T)(st,K,this.authState.pipe(Er(wt=>!wt))).pipe((0,dt.U)(wt=>(null==wt?void 0:wt.user)?wt:null),(0,ux.R)(c.outsideAngular),(0,HI.Q)(c.insideAngular))}return(0,Dr.pX)(this,ve,u,{spy:{apply:(Ue,st,It)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&It.then(vt=>K.next(vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Dr.Dh),a.LFG(Dr.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(vn.HU),a.LFG(Dx,8),a.LFG(Ax,8),a.LFG(Sx,8),a.LFG(xx,8),a.LFG(Mx,8),a.LFG(Ox,8),a.LFG(XI,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function xP(n,e){return function S2(n,e=wl.z){return new Xn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Nx(n,e){return xP(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function eT(n,e){return Nx(n,e).pipe(ys(void 0),ts(),(0,dt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(A=>A.doc.ref.isEqual(c.ref)),C=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&C&&JSON.stringify(C.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function MP(n,e,t){return eT(n,t).pipe(Ks((r,i)=>function M2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function O2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Rx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Rx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Rx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),jm(),(0,dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Rx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function OP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class PP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=eT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ys(void 0),ts(),Er(([r,i])=>i.length>0||!r),(0,dt.U)(([r,i])=>i),vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ks((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=OP(e);return MP(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return Nx(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(vn.iC)}add(e){return this.ref.add(e)}doc(e){return new kP(this.ref.doc(e),this.afs)}}class kP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=FP(r,t);return new PP(i,u,this.afs)}snapshotChanges(){return function x2(n,e){return xP(n,e).pipe(ys(void 0),ts(),(0,dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(vn.iC)}}class P2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?eT(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Er(t=>t.length>0),vn.iC):eT(this.query,this.afs.schedulers.outsideAngular).pipe(vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ks((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=OP(e);return MP(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return Nx(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),vn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(vn.iC)}}const NP=new a.OlP("angularfire2.enableFirestorePersistence"),RP=new a.OlP("angularfire2.firestore.persistenceSettings"),k2=new a.OlP("angularfire2.firestore.settings"),N2=new a.OlP("angularfire2.firestore.use-emulator");function FP(n,e=(t=>t)){return{query:e(n),ref:n}}let Ig=(()=>{class n{constructor(t,r,i,u,c,p,y,C,A,S,k,V,K,ve,Ue,st,It){this.schedulers=y;const vt=(0,Dr.on)(t,p,r),wt=A;S&&Px(vt,p,k,K,ve,Ue,V,st),[this.firestore,this.persistenceEnabled$]=(0,Dr.cc)(`${vt.name}.firestore`,"AngularFirestore",vt.name,()=>{const Zt=p.runOutsideAngular(()=>vt.firestore());if(u&&Zt.settings(u),wt&&Zt.useEmulator(...wt),i&&!$a(c)){const _n=()=>{try{return(0,Tn.D)(Zt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(as){return"undefined"!=typeof console&&console.warn(as),Xe(!1)}};return[Zt,p.runOutsideAngular(_n)]}return[Zt,Xe(!1)]},[u,wt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=FP(i,r),p=this.schedulers.ngZone.run(()=>u);return new PP(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new P2(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new kP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Dr.Dh),a.LFG(Dr.xv,8),a.LFG(NP,8),a.LFG(k2,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(vn.HU),a.LFG(RP,8),a.LFG(N2,8),a.LFG(kx,8),a.LFG(Dx,8),a.LFG(Ax,8),a.LFG(Sx,8),a.LFG(xx,8),a.LFG(Mx,8),a.LFG(Ox,8),a.LFG(XI,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),R2=(()=>{class n{constructor(){SP.Z.registerVersion("angularfire",vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:NP,useValue:!0},{provide:RP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Ig]}),n})();function F2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"form",1),a.TgZ(1,"h2"),a._uU(2,"Edit course"),a.qZA(),a.TgZ(3,"div"),a.TgZ(4,"label",2),a._uU(5,"Name"),a.qZA(),a._UZ(6,"input",3),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"label",2),a._uU(9,"Type"),a.qZA(),a._UZ(10,"input",4),a.qZA(),a.TgZ(11,"div"),a.TgZ(12,"label",2),a._uU(13,"Duration"),a.qZA(),a._UZ(14,"input",5),a.qZA(),a.TgZ(15,"div"),a.TgZ(16,"label",2),a._uU(17,"Deadline"),a.qZA(),a._UZ(18,"input",6),a.qZA(),a.TgZ(19,"div"),a.TgZ(20,"label",2),a._uU(21,"Start"),a.qZA(),a._UZ(22,"input",7),a.qZA(),a.TgZ(23,"div"),a.TgZ(24,"label",2),a._uU(25,"Format"),a.qZA(),a._UZ(26,"input",8),a.qZA(),a.TgZ(27,"div"),a.TgZ(28,"label",2),a._uU(29,"Location"),a.qZA(),a._UZ(30,"input",9),a.qZA(),a.TgZ(31,"div"),a.TgZ(32,"label",2),a._uU(33,"Logo"),a.qZA(),a._UZ(34,"input",10),a.qZA(),a.TgZ(35,"div"),a.TgZ(36,"label",2),a._uU(37,"Price"),a.qZA(),a._UZ(38,"input",11),a.qZA(),a.TgZ(39,"div"),a.TgZ(40,"label",2),a._uU(41,"Teacher Name"),a.qZA(),a._UZ(42,"input",12),a.qZA(),a.TgZ(43,"div"),a.TgZ(44,"label",2),a._uU(45,"Teacher Work"),a.qZA(),a._UZ(46,"input",13),a.qZA(),a.TgZ(47,"div"),a.TgZ(48,"label",2),a._uU(49,"Contact phone"),a.qZA(),a._UZ(50,"input",14),a.qZA(),a.TgZ(51,"div"),a.TgZ(52,"label",2),a._uU(53,"Contact email"),a.qZA(),a._UZ(54,"input",15),a.qZA(),a.TgZ(55,"div"),a.TgZ(56,"label",2),a._uU(57,"Company followers"),a.qZA(),a._UZ(58,"input",16),a.qZA(),a.TgZ(59,"div"),a.TgZ(60,"label",2),a._uU(61,"Course path"),a.qZA(),a._UZ(62,"textarea",17),a.qZA(),a.TgZ(63,"div"),a.TgZ(64,"label",2),a._uU(65,"Course advantage"),a.qZA(),a._UZ(66,"textarea",18),a.qZA(),a.TgZ(67,"div"),a.TgZ(68,"label",2),a._uU(69,"About company"),a.qZA(),a._UZ(70,"textarea",19),a.qZA(),a.TgZ(71,"div",20),a.TgZ(72,"button",21),a.NdJ("click",function(){return a.CHM(t),a.oxw().cancel()}),a._uU(73,"Cancel"),a.qZA(),a.TgZ(74,"button",21),a.NdJ("click",function(){return a.CHM(t),a.oxw().deleteCourse()}),a._uU(75,"Delete"),a.qZA(),a.TgZ(76,"button",22),a.NdJ("click",function(){return a.CHM(t),a.oxw().editCourseSubmit()}),a._uU(77,"Update"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const t=a.oxw();a.Q6J("formGroup",t.editCourse)}}function L2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"form",1),a.TgZ(1,"h2"),a._uU(2,"Edit course"),a.qZA(),a.TgZ(3,"div"),a.TgZ(4,"label",2),a._uU(5,"Name"),a.qZA(),a._UZ(6,"input",3),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"label",2),a._uU(9,"Type"),a.qZA(),a._UZ(10,"input",4),a.qZA(),a.TgZ(11,"div"),a.TgZ(12,"label",2),a._uU(13,"Duration"),a.qZA(),a._UZ(14,"input",5),a.qZA(),a.TgZ(15,"div"),a.TgZ(16,"label",2),a._uU(17,"Deadline"),a.qZA(),a._UZ(18,"input",6),a.qZA(),a.TgZ(19,"div"),a.TgZ(20,"label",2),a._uU(21,"Start"),a.qZA(),a._UZ(22,"input",7),a.qZA(),a.TgZ(23,"div"),a.TgZ(24,"label",2),a._uU(25,"Format"),a.qZA(),a._UZ(26,"input",8),a.qZA(),a.TgZ(27,"div"),a.TgZ(28,"label",2),a._uU(29,"Location"),a.qZA(),a._UZ(30,"input",9),a.qZA(),a.TgZ(31,"div"),a.TgZ(32,"label",2),a._uU(33,"Logo"),a.qZA(),a._UZ(34,"input",10),a.qZA(),a.TgZ(35,"div"),a.TgZ(36,"label",2),a._uU(37,"Price"),a.qZA(),a._UZ(38,"input",11),a.qZA(),a.TgZ(39,"div"),a.TgZ(40,"label",2),a._uU(41,"Teacher Name"),a.qZA(),a._UZ(42,"input",12),a.qZA(),a.TgZ(43,"div"),a.TgZ(44,"label",2),a._uU(45,"Teacher Work"),a.qZA(),a._UZ(46,"input",13),a.qZA(),a.TgZ(47,"div"),a.TgZ(48,"label",2),a._uU(49,"Contact phone"),a.qZA(),a._UZ(50,"input",14),a.qZA(),a.TgZ(51,"div"),a.TgZ(52,"label",2),a._uU(53,"Contact email"),a.qZA(),a._UZ(54,"input",15),a.qZA(),a.TgZ(55,"div"),a.TgZ(56,"label",2),a._uU(57,"Company followers"),a.qZA(),a._UZ(58,"input",16),a.qZA(),a.TgZ(59,"div"),a.TgZ(60,"label",2),a._uU(61,"Course path"),a.qZA(),a._UZ(62,"textarea",17),a.qZA(),a.TgZ(63,"div"),a.TgZ(64,"label",2),a._uU(65,"Course advantage"),a.qZA(),a._UZ(66,"textarea",18),a.qZA(),a.TgZ(67,"div"),a.TgZ(68,"label",2),a._uU(69,"About company"),a.qZA(),a._UZ(70,"textarea",19),a.qZA(),a.TgZ(71,"div",20),a.TgZ(72,"button",21),a.NdJ("click",function(){return a.CHM(t),a.oxw().cancel()}),a._uU(73,"Cancel"),a.qZA(),a.TgZ(74,"button",22),a.NdJ("click",function(){return a.CHM(t),a.oxw().addCourseSubmit()}),a._uU(75,"Add"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const t=a.oxw();a.Q6J("formGroup",t.editCourse)}}let U2=(()=>{class n{constructor(t,r,i){this.fb=t,this.httpClient=r,this.firebase=i,this.editCourse=this.fb.group({name:["",ct.required],type:["",ct.required],duration:["",ct.required],deadline:["",ct.required],format:["",ct.required],location:[""],price:["",ct.required],logo:["",ct.required],start:["",ct.required],course:["",ct.required],advantage:["",ct.required],about:["",ct.required],contactsPhone:["",ct.required],contactsEmail:["",ct.required],teacherName:["",ct.required],teacherWork:["",ct.required],companySubs:["",ct.required]}),this.courseEditForm=!1,this.courseAddForm=!1,this.courseValue=this.editCourse.value,this.newItemEvent=new a.vpe}ngOnInit(){}ngOnChanges(){this.editCourse.patchValue(this.courseValue)}editCourseSubmit(){const t={id:this.currentCourse.id,name:this.editCourse.value.name,type:this.editCourse.value.type,duration:this.editCourse.value.duration,deadline:this.editCourse.value.deadline,format:this.editCourse.value.format,location:this.editCourse.value.location,price:this.editCourse.value.price,logo:this.editCourse.value.logo,start:this.editCourse.value.start,contacts:{phone:this.editCourse.value.contactsPhone,email:this.editCourse.value.contactsEmail},teacher:{work:this.editCourse.value.teacherWork,name:this.editCourse.value.teacherName,img:this.currentCourse.teacher.img},course:this.editCourse.value.course.split("\n"),advantage:this.editCourse.value.advantage.split("\n"),about:this.editCourse.value.about,companySubs:this.editCourse.value.companySubs};this.httpClient.put(`http://localhost:3000/courses/${this.currentCourse.id}`,t).subscribe(()=>this.newItemEvent.emit("course"))}deleteCourse(){this.httpClient.delete(`http://localhost:3000/courses/${this.currentCourse.id}`).subscribe(()=>this.newItemEvent.emit("course"))}addCourseSubmit(){const t={id:Date.now()+"",name:this.editCourse.value.name,type:this.editCourse.value.type,duration:this.editCourse.value.duration,deadline:this.editCourse.value.deadline,format:this.editCourse.value.format,location:this.editCourse.value.location,price:this.editCourse.value.price,logo:this.editCourse.value.logo,start:this.editCourse.value.start,contacts:{phone:this.editCourse.value.contactsPhone,email:this.editCourse.value.contactsEmail},teacher:{work:this.editCourse.value.teacherWork,name:this.editCourse.value.teacherName,img:"assets/design/teacher.png"},course:this.editCourse.value.course.split("\n"),advantage:this.editCourse.value.advantage.split("\n"),about:this.editCourse.value.about,companySubs:this.editCourse.value.companySubs};return this.firebase.collection("courses").add(t).then(r=>{console.log(r),this.newItemEvent.emit("course")}).catch(r=>{console.log(r)})}cancel(){this.newItemEvent.emit("course")}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Lm),a.Y36(xp),a.Y36(Ig))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-course-form"]],inputs:{courseEditForm:"courseEditForm",courseAddForm:"courseAddForm",currentCourse:"currentCourse",courseValue:"courseValue"},outputs:{newItemEvent:"newItemEvent"},features:[a.TTD],decls:2,vars:2,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["for",""],["formControlName","name"],["formControlName","type"],["formControlName","duration"],["formControlName","deadline"],["formControlName","start"],["formControlName","format"],["formControlName","location"],["formControlName","logo"],["formControlName","price"],["type","text","formControlName","teacherName"],["type","text","formControlName","teacherWork"],["type","text","formControlName","contactsPhone"],["type","text","formControlName","contactsEmail"],["type","text","formControlName","companySubs"],["rows","10","cols","50","formControlName","course"],["rows","10","cols","50","formControlName","advantage"],["rows","10","cols","50","formControlName","about"],[1,"action"],["type","button",3,"click"],["type","submit",3,"click"]],template:function(t,r){1&t&&(a.YNc(0,F2,78,1,"form",0),a.YNc(1,L2,76,1,"form",0)),2&t&&(a.Q6J("ngIf",r.courseEditForm),a.xp6(1),a.Q6J("ngIf",r.courseAddForm))},directives:[cn,bp,Sh,yu,pl,mp,yl],styles:["form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;position:relative}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:32px;color:#424242;margin-bottom:25px}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:80%;margin-bottom:15px;display:flex;align-items:center;justify-content:space-between}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:22px;color:#424242}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:20px;color:#424242;padding:10px}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{max-width:70%}form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;max-width:70%}form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30%;padding:10px 20px;transition:.3s;border:1px solid #7834BE;border-radius:10px;cursor:pointer;background-color:#f7f6f9;color:#7834be}form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#7834be;color:#f7f6f9}"]}),n})();function V2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"form",1),a.TgZ(1,"h2"),a._uU(2,"Edit work"),a.qZA(),a.TgZ(3,"div"),a.TgZ(4,"label",2),a._uU(5,"Name"),a.qZA(),a._UZ(6,"input",3),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"label",2),a._uU(9,"Degree"),a.qZA(),a._UZ(10,"input",4),a.qZA(),a.TgZ(11,"div"),a.TgZ(12,"label",2),a._uU(13,"Deadline"),a.qZA(),a._UZ(14,"input",5),a.qZA(),a.TgZ(15,"div"),a.TgZ(16,"label",2),a._uU(17,"Format"),a.qZA(),a._UZ(18,"input",6),a.qZA(),a.TgZ(19,"div"),a.TgZ(20,"label",2),a._uU(21,"Logo"),a.qZA(),a._UZ(22,"input",7),a.qZA(),a.TgZ(23,"div"),a.TgZ(24,"label",2),a._uU(25,"Company Location"),a.qZA(),a._UZ(26,"input",8),a.qZA(),a.TgZ(27,"div"),a.TgZ(28,"label",2),a._uU(29,"Company Name"),a.qZA(),a._UZ(30,"input",9),a.qZA(),a.TgZ(31,"div"),a.TgZ(32,"label",2),a._uU(33,"Company Address"),a.qZA(),a._UZ(34,"input",10),a.qZA(),a.TgZ(35,"div"),a.TgZ(36,"label",2),a._uU(37,"Company Email"),a.qZA(),a._UZ(38,"input",11),a.qZA(),a.TgZ(39,"div"),a.TgZ(40,"label",2),a._uU(41,"Company Phone"),a.qZA(),a._UZ(42,"input",12),a.qZA(),a.TgZ(43,"div"),a.TgZ(44,"label",2),a._uU(45,"Required Skills"),a.qZA(),a._UZ(46,"textarea",13),a.qZA(),a.TgZ(47,"div"),a.TgZ(48,"label",2),a._uU(49,"Nice Skills"),a.qZA(),a._UZ(50,"textarea",14),a.qZA(),a.TgZ(51,"div",15),a.TgZ(52,"button",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().cancel()}),a._uU(53,"Cancel"),a.qZA(),a.TgZ(54,"button",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().deleteCourse()}),a._uU(55,"Delete"),a.qZA(),a.TgZ(56,"button",17),a.NdJ("click",function(){return a.CHM(t),a.oxw().editWorkSubmit()}),a._uU(57,"Update"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const t=a.oxw();a.Q6J("formGroup",t.editWork)}}function B2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"form",1),a.TgZ(1,"h2"),a._uU(2,"Add work"),a.qZA(),a.TgZ(3,"div"),a.TgZ(4,"label",2),a._uU(5,"Name"),a.qZA(),a._UZ(6,"input",3),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"label",2),a._uU(9,"Degree"),a.qZA(),a._UZ(10,"input",4),a.qZA(),a.TgZ(11,"div"),a.TgZ(12,"label",2),a._uU(13,"Deadline"),a.qZA(),a._UZ(14,"input",5),a.qZA(),a.TgZ(15,"div"),a.TgZ(16,"label",2),a._uU(17,"Format"),a.qZA(),a._UZ(18,"input",6),a.qZA(),a.TgZ(19,"div"),a.TgZ(20,"label",2),a._uU(21,"Logo"),a.qZA(),a._UZ(22,"input",7),a.qZA(),a.TgZ(23,"div"),a.TgZ(24,"label",2),a._uU(25,"Company Location"),a.qZA(),a._UZ(26,"input",8),a.qZA(),a.TgZ(27,"div"),a.TgZ(28,"label",2),a._uU(29,"Company Name"),a.qZA(),a._UZ(30,"input",9),a.qZA(),a.TgZ(31,"div"),a.TgZ(32,"label",2),a._uU(33,"Company Address"),a.qZA(),a._UZ(34,"input",10),a.qZA(),a.TgZ(35,"div"),a.TgZ(36,"label",2),a._uU(37,"Company Email"),a.qZA(),a._UZ(38,"input",11),a.qZA(),a.TgZ(39,"div"),a.TgZ(40,"label",2),a._uU(41,"Company Phone"),a.qZA(),a._UZ(42,"input",12),a.qZA(),a.TgZ(43,"div"),a.TgZ(44,"label",2),a._uU(45,"Required Skills"),a.qZA(),a._UZ(46,"textarea",13),a.qZA(),a.TgZ(47,"div"),a.TgZ(48,"label",2),a._uU(49,"Nice Skills"),a.qZA(),a._UZ(50,"textarea",14),a.qZA(),a.TgZ(51,"div",15),a.TgZ(52,"button",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().cancel()}),a._uU(53,"Cancel"),a.qZA(),a.TgZ(54,"button",17),a.NdJ("click",function(){return a.CHM(t),a.oxw().addCourseSubmit()}),a._uU(55,"Add"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const t=a.oxw();a.Q6J("formGroup",t.editWork)}}let Z2=(()=>{class n{constructor(t,r){this.fb=t,this.httpClient=r,this.editWork=this.fb.group({name:["",ct.required],degree:["",ct.required],deadline:["",ct.required],requiredSkills:["",ct.required],niceSkills:["",ct.required],format:["",ct.required],logo:["",ct.required],companyLocation:["",ct.required],companyName:["",ct.required],companyAddress:["",ct.required],companyEmail:["",ct.required],companyPhone:["",ct.required]}),this.workEditForm=!1,this.workAddForm=!1,this.workValue=this.editWork.value,this.newItemEvent=new a.vpe}ngOnInit(){}ngOnChanges(){this.editWork.patchValue(this.workValue)}editWorkSubmit(){const t={id:this.currentWork.id,name:this.editWork.value.name,degree:this.editWork.value.degree,deadline:this.editWork.value.deadline,requiredSkills:this.editWork.value.requiredSkills.split("\n"),niceSkills:this.editWork.value.niceSkills.split("\n"),format:this.editWork.value.format,logo:this.editWork.value.logo,company:{location:this.editWork.value.companyLocation,address:this.editWork.value.companyAddress,name:this.editWork.value.companyName,email:this.editWork.value.companyEmail,phone:this.editWork.value.companyPhone}};this.httpClient.put(`http://localhost:3000/work/${this.currentWork.id}`,t).subscribe(()=>this.newItemEvent.emit("work"))}deleteCourse(){this.httpClient.delete(`http://localhost:3000/work/${this.currentWork.id}`).subscribe(()=>this.newItemEvent.emit("work"))}addCourseSubmit(){const t={id:this.currentWork.id,name:this.editWork.value.name,degree:this.editWork.value.degree,deadline:this.editWork.value.deadline,requiredSkills:this.editWork.value.requiredSkills.split("\n"),niceSkills:this.editWork.value.niceSkills.split("\n"),format:this.editWork.value.format,logo:this.editWork.value.logo,company:{location:this.editWork.value.companyLocation,address:this.editWork.value.companyAddress,name:this.editWork.value.companyName,email:this.editWork.value.companyEmail,phone:this.editWork.value.companyPhone}};this.httpClient.post("http://localhost:3000/work",t).subscribe(()=>this.newItemEvent.emit("work"))}cancel(){this.newItemEvent.emit("work")}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Lm),a.Y36(xp))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-work-form"]],inputs:{workEditForm:"workEditForm",workAddForm:"workAddForm",currentWork:"currentWork",workValue:"workValue"},outputs:{newItemEvent:"newItemEvent"},features:[a.TTD],decls:2,vars:2,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["for",""],["formControlName","name"],["formControlName","degree"],["formControlName","deadline"],["formControlName","format"],["formControlName","logo"],["formControlName","companyLocation"],["formControlName","companyName"],["formControlName","companyAddress"],["formControlName","companyEmail"],["formControlName","companyPhone"],["rows","10","cols","50","formControlName","requiredSkills"],["rows","10","cols","50","formControlName","niceSkills"],[1,"action"],["type","button",3,"click"],["type","submit",3,"click"]],template:function(t,r){1&t&&(a.YNc(0,V2,58,1,"form",0),a.YNc(1,B2,56,1,"form",0)),2&t&&(a.Q6J("ngIf",r.workEditForm),a.xp6(1),a.Q6J("ngIf",r.workAddForm))},directives:[cn,bp,Sh,yu,pl,mp,yl],styles:["form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;position:relative}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:32px;color:#424242;margin-bottom:25px}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:80%;margin-bottom:15px;display:flex;align-items:center;justify-content:space-between}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:22px;color:#424242}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:20px;color:#424242;padding:10px}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{max-width:70%}form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;max-width:70%}form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30%;padding:10px 20px;transition:.3s;border:1px solid #7834BE;border-radius:10px;cursor:pointer;background-color:#f7f6f9;color:#7834be}form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#7834be;color:#f7f6f9}"]}),n})();function j2(n,e){1&n&&(a.TgZ(0,"span"),a._uU(1,"Wrong login or password"),a.qZA())}function q2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",2),a.TgZ(1,"form",3),a.NdJ("ngSubmit",function(){return a.CHM(t),a.oxw().login()}),a.TgZ(2,"h3"),a._uU(3,"Admin"),a.qZA(),a._UZ(4,"input",4),a._UZ(5,"input",5),a.YNc(6,j2,2,0,"span",6),a.TgZ(7,"button"),a._uU(8,"login"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const t=a.oxw();a.xp6(1),a.Q6J("formGroup",t.form),a.xp6(5),a.Q6J("ngIf",t.error)}}function H2(n,e){1&n&&(a.TgZ(0,"div",10),a._UZ(1,"span"),a.qZA())}function $2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"p",14),a.NdJ("click",function(){const u=a.CHM(t).$implicit;return a.oxw(3).openCourseEdit(u)}),a._uU(1),a.TgZ(2,"span"),a._uU(3,"Edit"),a.qZA(),a.qZA()}if(2&n){const t=e.$implicit;a.xp6(1),a.AsE("",t.name,": ",t.start,"")}}function G2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"p",14),a.NdJ("click",function(){const u=a.CHM(t).$implicit;return a.oxw(3).openWorkEdit(u)}),a._uU(1),a.qZA()}if(2&n){const t=e.$implicit;a.xp6(1),a.AsE("",t.name,": ",t.degree,"")}}function W2(n,e){if(1&n&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t.name)}}function z2(n,e){if(1&n&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t.title)}}function K2(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",11),a.TgZ(1,"div",12),a.TgZ(2,"h2"),a._uU(3,"DATABASE"),a.qZA(),a.TgZ(4,"div",13),a.TgZ(5,"h3",14),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return i.coursesShow=!i.coursesShow}),a._uU(6,"Courses "),a.O4$(),a.TgZ(7,"svg",15),a._UZ(8,"path",16),a.qZA(),a.qZA(),a.kcU(),a.TgZ(9,"button",14),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).openCourseAdd()}),a._uU(10,"+ Add course"),a.qZA(),a.TgZ(11,"div"),a.YNc(12,$2,4,2,"p",17),a.qZA(),a.qZA(),a.TgZ(13,"div",13),a.TgZ(14,"h3",14),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return i.workShow=!i.workShow}),a._uU(15,"Work "),a.O4$(),a.TgZ(16,"svg",15),a._UZ(17,"path",16),a.qZA(),a.qZA(),a.kcU(),a.TgZ(18,"button",14),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).openWorkAdd()}),a._uU(19,"+ Add work"),a.qZA(),a.TgZ(20,"div"),a.YNc(21,G2,2,2,"p",17),a.qZA(),a.qZA(),a.TgZ(22,"div",13),a.TgZ(23,"h3",14),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return i.eventsShow=!i.eventsShow}),a._uU(24,"Events "),a.O4$(),a.TgZ(25,"svg",15),a._UZ(26,"path",16),a.qZA(),a.qZA(),a.kcU(),a.TgZ(27,"button"),a._uU(28,"+ Add event"),a.qZA(),a.TgZ(29,"div"),a.YNc(30,W2,2,1,"p",18),a.qZA(),a.qZA(),a.TgZ(31,"div",13),a.TgZ(32,"h3",14),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return i.newsShow=!i.newsShow}),a._uU(33,"News "),a.O4$(),a.TgZ(34,"svg",15),a._UZ(35,"path",16),a.qZA(),a.qZA(),a.kcU(),a.TgZ(36,"button"),a._uU(37,"+ Add news"),a.qZA(),a.TgZ(38,"div"),a.YNc(39,z2,2,1,"p",18),a.qZA(),a.qZA(),a.qZA(),a.TgZ(40,"div",19),a.TgZ(41,"app-course-form",20),a.NdJ("newItemEvent",function(i){return a.CHM(t),a.oxw(2).close(i)}),a.qZA(),a.TgZ(42,"app-work-form",21),a.NdJ("newItemEvent",function(i){return a.CHM(t),a.oxw(2).close(i)}),a.qZA(),a.qZA(),a.qZA()}if(2&n){const t=a.oxw(2);a.xp6(5),a.Tol(t.coursesShow?"opened":""),a.xp6(6),a.Tol(t.coursesShow?"opened":""),a.xp6(1),a.Q6J("ngForOf",t.courses),a.xp6(2),a.Tol(t.workShow?"opened":""),a.xp6(6),a.Tol(t.workShow?"opened":""),a.xp6(1),a.Q6J("ngForOf",t.work),a.xp6(2),a.Tol(t.eventsShow?"opened":""),a.xp6(6),a.Tol(t.eventsShow?"opened":""),a.xp6(1),a.Q6J("ngForOf",t.events),a.xp6(2),a.Tol(t.newsShow?"opened":""),a.xp6(6),a.Tol(t.newsShow?"opened":""),a.xp6(1),a.Q6J("ngForOf",t.news),a.xp6(2),a.Q6J("courseAddForm",t.courseAddForm)("courseEditForm",t.courseEditForm)("currentCourse",t.currentCourse)("courseValue",t.courseValue),a.xp6(1),a.Q6J("workAddForm",t.workAddForm)("workEditForm",t.workEditForm)("currentWork",t.currentWork)("workValue",t.workValue)}}function Y2(n,e){if(1&n&&(a.TgZ(0,"div",7),a.YNc(1,H2,2,0,"div",8),a.YNc(2,K2,43,28,"ng-template",null,9,a.W1O),a.qZA()),2&n){const t=a.MAs(3),r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.loading)("ngIfElse",t)}}let Q2=(()=>{class n{constructor(t,r,i){this.fb=t,this.httpClient=r,this.firebase=i,this.adminLoged=!1,this.error=!1,this.loading=!1,this.news=[],this.courses=[],this.work=[],this.events=[],this.coursesShow=!1,this.workShow=!1,this.newsShow=!1,this.eventsShow=!1,this.form=this.fb.group({login:"",password:""}),this.editCourse=this.fb.group({name:["",ct.required],type:["",ct.required],duration:["",ct.required],deadline:["",ct.required],format:["",ct.required],location:[""],price:["",ct.required],logo:["",ct.required],start:["",ct.required],course:["",ct.required],advantage:["",ct.required],about:["",ct.required],contactsPhone:["",ct.required],contactsEmail:["",ct.required],teacherName:["",ct.required],teacherWork:["",ct.required],companySubs:["",ct.required]}),this.courseEditForm=!1,this.courseAddForm=!1,this.courseValue=this.editCourse.value,this.editWork=this.fb.group({name:["",ct.required],degree:["",ct.required],deadline:["",ct.required],requiredSkills:["",ct.required],niceSkills:["",ct.required],format:["",ct.required],logo:["",ct.required],companyLocation:["",ct.required],companyName:["",ct.required],companyAddress:["",ct.required],companyEmail:["",ct.required],companyPhone:["",ct.required]}),this.workEditForm=!1,this.workAddForm=!1,this.workValue=this.editWork.value}ngOnInit(){}login(){this.firebase.collection("admin").snapshotChanges().subscribe(t=>{t.map(i=>{const u=i.payload.doc.data();return{login:u.login,password:u.password,privilege:u.privilege}}).find(i=>{i.login==this.form.value.login&&i.password==this.form.value.password&&(this.adminLoged=!0,this.loading=!0,this.getFullData())}),0==this.adminLoged&&(this.error=!0)})}getCourses(){this.firebase.collection("courses").snapshotChanges().subscribe(t=>{const r=t.map(i=>{const u=i.payload.doc.data();return{id:i.payload.doc.id,name:u.name,type:u.type,duration:u.duration,deadline:u.deadline,format:u.format,location:u.location,price:u.price,logo:u.logo,start:u.start,contacts:u.contacts,teacher:u.teacher,course:u.course,advantage:u.advantage,about:u.about,companySubs:u.companySubs}});this.courses=r})}getWork(){this.firebase.collection("work").snapshotChanges().subscribe(t=>{const r=t.map(i=>{const u=i.payload.doc.data();return{id:i.payload.doc.id,name:u.name,degree:u.degree,deadline:u.deadline,requiredSkills:u.requiredSkills,niceSkills:u.niceSkills,format:u.format,logo:u.logo,company:u.company}});this.work=r})}openCourseEdit(t){this.courseEditForm=!0,this.courseAddForm=!1,this.currentCourse=t,this.courseValue={name:t.name,type:t.type,duration:t.duration,deadline:t.deadline,format:t.format,location:t.location,price:t.price,logo:t.logo,start:t.start,contactsPhone:t.contacts.phone,contactsEmail:t.contacts.email,teacherName:t.teacher.name,teacherWork:t.teacher.work,course:t.course.join("\n"),advantage:t.advantage.join("\n"),about:t.about,companySubs:t.companySubs}}openCourseAdd(){this.courseEditForm=!1,this.courseAddForm=!0,this.courseValue={name:"",type:"",duration:"",deadline:"",format:"",location:"",price:"",logo:"",start:"",contactsPhone:"",contactsEmail:"",teacherName:"",teacherWork:"",course:"",advantage:"",about:"",companySubs:""}}openWorkEdit(t){this.workEditForm=!0,this.workAddForm=!1,this.currentWork=t,this.workValue={name:t.name,degree:t.degree,deadline:t.deadline,requiredSkills:t.requiredSkills.join("\n"),niceSkills:t.niceSkills.join("\n"),format:t.format,logo:t.logo,companyLocation:t.company.location,companyName:t.company.name,companyAddress:t.company.address,companyEmail:t.company.email,companyPhone:t.company.phone}}openWorkAdd(){this.workEditForm=!1,this.workAddForm=!0,this.workValue={name:"",degree:"",deadline:"",requiredSkills:"",niceSkills:"",format:"",logo:"",companyLocation:"",companyName:"",companyAddress:"",companyEmail:"",companyPhone:""}}close(t){"course"==t?this.getCourses():"work"==t&&this.getWork(),this.courseEditForm=!1,this.courseAddForm=!1,this.workAddForm=!1,this.workEditForm=!1}getFullData(){this.getCourses(),this.getWork(),setTimeout(()=>{this.loading=!1},500)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Lm),a.Y36(xp),a.Y36(Ig))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-admin"]],decls:4,vars:2,consts:[["loginview",""],["class","admin",4,"ngIf","ngIfElse"],[1,"login"],[1,"login__form",3,"formGroup","ngSubmit"],["type","text","placeholder","login","formControlName","login"],["type","password","placeholder","password","formControlName","password"],[4,"ngIf"],[1,"admin"],["class","loading",4,"ngIf","ngIfElse"],["adminPanel",""],[1,"loading"],[1,"admin__panel","panel"],[1,"panel__leftside"],[1,"panel__leftside-resource"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-right"],["fill-rule","evenodd","d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"],[3,"click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"panel__rightside"],[3,"courseAddForm","courseEditForm","currentCourse","courseValue","newItemEvent"],[3,"workAddForm","workEditForm","currentWork","workValue","newItemEvent"]],template:function(t,r){if(1&t&&(a.YNc(0,q2,9,2,"ng-template",null,0,a.W1O),a.YNc(2,Y2,4,2,"div",1),a._uU(3,".")),2&t){const i=a.MAs(1);a.xp6(2),a.Q6J("ngIf",r.adminLoged)("ngIfElse",i)}},directives:[bp,Sh,yu,pl,mp,yl,cn,on,U2,Z2],styles:[".login[_ngcontent-%COMP%]{z-index:1000;position:fixed;background-color:#7834be;background-image:url(bg.3eb4230ac3c2f553.png);background-size:cover;background-position:center;background-repeat:no-repeat;height:100vh;width:100vw;top:0;left:0}.login[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#7834be;margin-bottom:20px;font-size:28px;font-weight:400}.login__form[_ngcontent-%COMP%]{position:absolute;width:500px;padding:30px;border-radius:15px;background-color:#f7f6f9;left:50%;top:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:0 0 5px #f7f6f9}.login__form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:20px;padding:10px 20px;border-radius:10px;font-size:23px;border:1px solid #7834BE}.login__form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#424242}.login__form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:translateY(-15px);height:0;color:red}.login__form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;margin-top:10px;padding:5px 20px;border:1px solid #7834BE;background-color:transparent;cursor:pointer;font-size:20px;color:#424242;transition:.3s}.login__form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#f7f6f9;background-color:#7834be}.admin[_ngcontent-%COMP%]{z-index:10000;position:fixed;background-color:#7834be;background-image:url(bg.3eb4230ac3c2f553.png);background-size:cover;background-position:center;background-repeat:no-repeat;height:100vh;width:100vw;padding:20px;top:0;left:0}.admin[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:60px;width:60px;border:3px solid #f7f6f9;border-left:3px solid transparent;border-radius:50%;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);animation:loading 2s linear;animation-iteration-count:infinite}.admin[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:100%}.admin[_ngcontent-%COMP%]   .panel__leftside[_ngcontent-%COMP%]{flex:1;height:100%;border-radius:15px;background-color:#f7f6f9;margin-right:10px;overflow:auto;padding:20px}.admin[_ngcontent-%COMP%]   .panel__leftside[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:32px;color:#424242}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:5px 30px 5px 0;font-size:28px;color:#424242;cursor:pointer;display:flex;align-items:center}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   h3.opened[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(90deg)}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(0);transition:.3s;width:20px;margin-left:10px}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px 0 5px 20px;padding:10px;font-size:22px;border:1px solid #7834BE;color:#7834be;border-radius:10px;cursor:pointer;background-color:transparent}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:10px;font-size:22px;border:1px solid #424242;color:#424242;border-radius:10px;margin:5px 0 5px 20px;cursor:pointer;position:relative}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:#008cff;cursor:pointer}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:0;overflow:hidden;transition:.3s;display:flex;flex-direction:column}.admin[_ngcontent-%COMP%]   .panel__leftside-resource[_ngcontent-%COMP%]   div.opened[_ngcontent-%COMP%]{height:inherit}.admin[_ngcontent-%COMP%]   .panel__rightside[_ngcontent-%COMP%]{flex:1;height:100%;border-radius:15px;margin-left:10px;padding:20px;background-color:#f7f6f9;overflow:auto}@keyframes loading{0%{transform:translate(-50%,-50%) rotate(0)}50%{transform:translate(-50%,-50%) rotate(180deg)}to{transform:translate(-50%,-50%) rotate(360deg)}}"]}),n})(),J2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-about-us"]],decls:65,vars:0,consts:[[1,"about"],["src","assets/icons/logo.png","alt","",1,"logo"],[1,"about__section"],[1,"about__text"],[1,"about__title"],[1,"about__img"],["src","assets/design/about-us.png"],[1,"footer"],[1,"footer__el"],["href",""],["target","_blank","href","https://www.freepik.com"],["target","_blank","href","https://storyset.com/happy"],["target","_blank","href","https://www.flaticon.com/ru/"],["target","_blank","href","https://icons8.com"],[1,"footer__icons"],["href","https://www.facebook.com/"],["src","assets/icons/facebook.png"],["href","https://www.instagram.com/"],["src","assets/icons/instagram.png"],["href","https://www.telegram.org/"],["src","assets/icons/telegram.png"],["href","https://www.twitter.com/"],["src","assets/icons/twitter.png"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"img",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h2",4),a._uU(5,"ABOUT US"),a.qZA(),a.TgZ(6,"p"),a._uU(7,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Non, corrupti voluptatem. Iste debitis sunt aliquid, illo harum, dolores eveniet laudantium voluptas eius, illum modi perspiciatis repellat iure ducimus veritatis veniam! "),a.qZA(),a.qZA(),a.TgZ(8,"div",5),a._UZ(9,"img",6),a.qZA(),a.qZA(),a.TgZ(10,"footer",7),a.TgZ(11,"div",8),a.TgZ(12,"h3"),a._uU(13,"TEAM"),a.qZA(),a.TgZ(14,"ul"),a.TgZ(15,"li"),a.TgZ(16,"a",9),a._uU(17,"Ararat Barsegyan"),a.qZA(),a.qZA(),a.TgZ(18,"li"),a.TgZ(19,"a",9),a._uU(20,"Arman Mkrtchyan"),a.qZA(),a.qZA(),a.TgZ(21,"li"),a.TgZ(22,"a",9),a._uU(23,"Gor"),a.qZA(),a.qZA(),a.TgZ(24,"li"),a.TgZ(25,"a",9),a._uU(26,"Samvel Saroyan"),a.qZA(),a.qZA(),a.TgZ(27,"li"),a.TgZ(28,"a",9),a._uU(29,"Telman Poloyan"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(30,"div",8),a.TgZ(31,"h3"),a._uU(32,"LINKS"),a.qZA(),a.TgZ(33,"ul"),a.TgZ(34,"li"),a.TgZ(35,"a",10),a._uU(36,"Freepik Company"),a.qZA(),a.qZA(),a.TgZ(37,"li"),a.TgZ(38,"a",11),a._uU(39,"Happy illustrations by Storyset"),a.qZA(),a.qZA(),a.TgZ(40,"li"),a.TgZ(41,"a",12),a._uU(42,"Icons from Freepik - Flaticon"),a.qZA(),a.qZA(),a.TgZ(43,"li"),a.TgZ(44,"a",13),a._uU(45,"Icons by Icons8"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(46,"div",8),a.TgZ(47,"h3"),a._uU(48,"HELP"),a.qZA(),a.TgZ(49,"ul"),a.TgZ(50,"li"),a.TgZ(51,"a",9),a._uU(52,"Support"),a.qZA(),a.qZA(),a.TgZ(53,"li"),a.TgZ(54,"a",9),a._uU(55,"Contract"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(56,"div",14),a.TgZ(57,"a",15),a._UZ(58,"img",16),a.qZA(),a.TgZ(59,"a",17),a._UZ(60,"img",18),a.qZA(),a.TgZ(61,"a",19),a._UZ(62,"img",20),a.qZA(),a.TgZ(63,"a",21),a._UZ(64,"img",22),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA())},styles:[".about[_ngcontent-%COMP%]{padding:150px 50px 15px 120px;background-image:url(mainbg1.fae3f826e5d138d5.png);background-size:cover;background-position:center -280px;background-repeat:no-repeat;min-height:100vh;background-color:#f7f6f9}.about[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{border-radius:15px;width:200px;position:absolute;left:50%;transform:translate(-50%);will-change:transform;top:45px}.about__title[_ngcontent-%COMP%]{font-size:40px;color:#7834be;margin-bottom:50px;letter-spacing:2px}.about__section[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-content:center;flex-direction:row;align-items:center;min-height:50vh}.about__text[_ngcontent-%COMP%]{width:50%}.about__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#424242}.about__img[_ngcontent-%COMP%]{width:40%}.about__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:30px;border-radius:15px;background-color:#7834be}.footer__el[_ngcontent-%COMP%]{width:20%}.footer[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f9d065;margin-bottom:10px}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#f7f6f9}.footer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transition:.3s;text-decoration:underline}.footer__icons[_ngcontent-%COMP%]{display:flex;margin-top:15px}.footer__icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;width:40px;height:40px;margin:0 2.5px}.footer__icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}"]}),n})();function X2(n,e){if(1&n&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2,"Location:"),a.qZA(),a.TgZ(3,"th"),a._uU(4),a.qZA(),a.qZA()),2&n){const t=a.oxw();a.xp6(4),a.Oqu(t.course.location)}}function eU(n,e){if(1&n&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2,"Course format:"),a.qZA(),a.TgZ(3,"th"),a._uU(4),a.qZA(),a.qZA()),2&n){const t=a.oxw();a.xp6(4),a.Oqu(t.course.format)}}function tU(n,e){if(1&n&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}function nU(n,e){if(1&n&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}let rU=(()=>{class n{constructor(){this.modalOpened=!1,this.newItemEvent=new a.vpe}ngOnInit(){}closeModal(){this.newItemEvent.emit(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-course-view"]],inputs:{modalOpened:"modalOpened",course:"course"},outputs:{newItemEvent:"newItemEvent"},decls:72,vars:19,consts:[[1,"main"],[1,"main-flex"],[1,"leftside"],["alt","",3,"src"],["alt","",1,"course-icon-logo",3,"src"],[4,"ngIf"],[1,"rightside"],[4,"ngFor","ngForOf"],[1,"register"],["href",""],[1,"close",3,"click"],[1,"close-btn"],[1,"back",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h3"),a._uU(2),a.qZA(),a.TgZ(3,"div",1),a.TgZ(4,"div",2),a._UZ(5,"img",3),a._UZ(6,"img",4),a.TgZ(7,"h4"),a._uU(8),a.qZA(),a.TgZ(9,"span"),a._uU(10),a.qZA(),a.TgZ(11,"table"),a.TgZ(12,"tr"),a.TgZ(13,"td"),a._uU(14,"Course fee:"),a.qZA(),a.TgZ(15,"th"),a._uU(16),a.qZA(),a.qZA(),a.TgZ(17,"tr"),a.TgZ(18,"td"),a._uU(19,"Course duration:"),a.qZA(),a.TgZ(20,"th"),a._uU(21),a.qZA(),a.qZA(),a.YNc(22,X2,5,1,"tr",5),a.YNc(23,eU,5,1,"tr",5),a.TgZ(24,"tr"),a.TgZ(25,"td"),a._uU(26,"Deadline to apply:"),a.qZA(),a.TgZ(27,"th"),a._uU(28),a.qZA(),a.qZA(),a.TgZ(29,"tr"),a.TgZ(30,"td"),a._uU(31,"Course starts:"),a.qZA(),a.TgZ(32,"th"),a._uU(33),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(34,"div",6),a.TgZ(35,"h5"),a._uU(36,"Course path"),a.qZA(),a.TgZ(37,"ul"),a.YNc(38,tU,2,1,"li",7),a.qZA(),a.TgZ(39,"h5"),a._uU(40,"Course advantage"),a.qZA(),a.TgZ(41,"ul"),a.YNc(42,nU,2,1,"li",7),a.qZA(),a.TgZ(43,"h5"),a._uU(44,"About company"),a.qZA(),a.TgZ(45,"p"),a._uU(46),a.qZA(),a.TgZ(47,"table"),a.TgZ(48,"tr"),a.TgZ(49,"th"),a._uU(50,"Students:"),a.qZA(),a.TgZ(51,"td"),a._uU(52),a.qZA(),a.qZA(),a.TgZ(53,"tr"),a.TgZ(54,"th"),a._uU(55,"Graduted students:"),a.qZA(),a.TgZ(56,"td"),a._uU(57,"80%"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(58,"div",8),a.TgZ(59,"div"),a.TgZ(60,"p"),a._uU(61),a.qZA(),a.TgZ(62,"a",9),a._uU(63),a.qZA(),a.qZA(),a.TgZ(64,"div"),a.TgZ(65,"button"),a._uU(66,"REGISTER"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(67,"button",10),a.NdJ("click",function(){return r.closeModal()}),a.TgZ(68,"div",11),a._UZ(69,"span"),a._UZ(70,"span"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(71,"div",12),a.NdJ("click",function(){return r.closeModal()}),a.qZA()),2&t&&(a.Tol(r.modalOpened?"opened":""),a.xp6(2),a.Oqu(r.course.name),a.xp6(3),a.Q6J("src",r.course.teacher.img,a.LSH),a.xp6(1),a.Q6J("src","assets/course-icons/"+r.course.logo+".png",a.LSH),a.xp6(2),a.Oqu(r.course.teacher.name),a.xp6(2),a.Oqu(r.course.teacher.work),a.xp6(6),a.hij("",r.course.price," AMD"),a.xp6(5),a.Oqu(r.course.duration),a.xp6(1),a.Q6J("ngIf",r.course.location),a.xp6(1),a.Q6J("ngIf","Offline"!==r.course.format),a.xp6(5),a.Oqu(r.course.deadline),a.xp6(5),a.Oqu(r.course.start),a.xp6(5),a.Q6J("ngForOf",r.course.course),a.xp6(4),a.Q6J("ngForOf",r.course.advantage),a.xp6(4),a.Oqu(r.course.about),a.xp6(6),a.Oqu(r.course.companySubs),a.xp6(9),a.Oqu(r.course.contacts.phone),a.xp6(2),a.Oqu(r.course.contacts.email))},directives:[cn,on],styles:[".main[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;overflow:hidden;height:0;width:0;padding:20px;background-color:#f7f6f9;border:3px solid #7834BE;border-radius:15px;transition:.3s;z-index:1000}.main.opened[_ngcontent-%COMP%]{opacity:1;height:80vh;width:700px;min-height:756px;padding-bottom:150px}.main.opened[_ngcontent-%COMP%] + .back[_ngcontent-%COMP%]{opacity:1;z-index:1}.main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#7834be;font-size:28px;margin-bottom:15px}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{width:100%;position:absolute;border-radius:15px 15px 0 0;padding:20px;border-top:2px solid #7834BE;bottom:0;left:0;display:flex;align-items:center;justify-content:space-between;background-color:#f7f6f9}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:17px}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#7834be;background-color:#f7f6f9;border-radius:15px;padding:10px 25px;font-size:17px;cursor:pointer;transition:.3s}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#f7f6f9;background-color:#7834be}.main[_ngcontent-%COMP%]   .main-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;overflow-y:auto}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]{width:45%;position:relative}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   .course-icon-logo[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:50px;will-change:transform;transform:scale(1.001)}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7834be;font-size:22px;text-align:center}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{will-change:transform;transform:scale(1.001);width:100%}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:15px;color:#424242;text-align:center}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-spacing:10px 5px;padding:20px 0 0}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;color:#7834be;font-weight:500}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#424242}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]{width:50%;padding-top:30px;color:#424242}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#7834be;font-size:22px;font-weight:400;text-align:center;margin-bottom:15px}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:20px}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:10px;width:100%}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;color:#7834be;font-weight:500}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right;color:#424242}.back[_ngcontent-%COMP%]{position:fixed;opacity:0;top:0;left:0;overflow:hidden;height:100vh;width:100vw;transition:opacity .3s;background-color:#00000086;z-index:-1}.close[_ngcontent-%COMP%]{position:absolute;display:block;cursor:pointer;right:20px;top:10px;height:50px;width:41px;background:transparent;border:none}.close-btn[_ngcontent-%COMP%]{position:relative}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:3px;width:40px;position:absolute;display:block;background-color:#7834be;left:0;top:50%;transform:translateY(-50%)}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg)}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-45deg)}@media screen and (max-height: 756px){.main.opened[_ngcontent-%COMP%]{min-height:100vh}.main-flex[_ngcontent-%COMP%]{height:calc(100vh - 166px)!important}}@media screen and (max-width: 750px){.main.opened[_ngcontent-%COMP%]{width:600px}}@media screen and (max-width: 600px){.main.opened[_ngcontent-%COMP%]{width:100%}.main-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:center;height:590px}.main-flex[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%], .main-flex[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]{width:80%}}"]}),n})(),iU=(()=>{class n{constructor(){this.modalState=!1}ngOnInit(){}openModal(){this.modalState=!0}emitFunc(t){this.modalState=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-course"]],inputs:{course:"course"},decls:16,vars:8,consts:[[1,"course",3,"click"],[1,"course__info"],[1,"course__img"],["alt","",1,"course__img-icon",3,"src"],["src","assets/course-icons/gitc.png","alt","",1,"companyLogo"],[3,"modalOpened","course","newItemEvent"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.NdJ("click",function(){return r.openModal()}),a.TgZ(1,"div",1),a.TgZ(2,"h3"),a._uU(3),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA(),a.TgZ(8,"p"),a._uU(9),a.qZA(),a.TgZ(10,"span"),a._uU(11),a.qZA(),a.qZA(),a.TgZ(12,"div",2),a._UZ(13,"img",3),a.qZA(),a._UZ(14,"img",4),a.qZA(),a.TgZ(15,"app-course-view",5),a.NdJ("newItemEvent",function(u){return r.emitFunc(u)}),a.qZA()),2&t&&(a.xp6(3),a.Oqu(r.course.name),a.xp6(2),a.Oqu(r.course.duration),a.xp6(2),a.Oqu(r.course.location),a.xp6(2),a.Oqu(r.course.format),a.xp6(2),a.hij("Price ",r.course.price," AMD"),a.xp6(2),a.Q6J("src","assets/course-icons/"+r.course.logo+".png",a.LSH),a.xp6(2),a.Q6J("modalOpened",r.modalState)("course",r.course))},directives:[rU],styles:[".course[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-between;padding:15px;border-radius:15px;background-color:#7834be;transition:.3s;position:relative;cursor:pointer;background-image:url(newbg1.6ba3115ac13491a6.png);background-size:250px 100%;background-position:right bottom;background-repeat:no-repeat}.course[_ngcontent-%COMP%]:hover   .course__img-icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.3)}.course__info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f9d065;font-size:24px;margin-bottom:15px}.course__info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f7f6f9}.course__info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-top:15px;color:#aaa}.course__img[_ngcontent-%COMP%]{height:150px;width:150px;min-width:150px;position:relative}.course__img-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:30%;transform:translate(-50%,-50%) scale(1.001);width:60px;height:60px;transition:.3s;will-change:transform}.companyLogo[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;width:40px;z-index:0}"]}),n})();function sU(n,e){1&n&&a._UZ(0,"div",36)}function oU(n,e){if(1&n&&(a.TgZ(0,"div",34),a.YNc(1,sU,1,0,"div",35),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.array)}}function aU(n,e){if(1&n&&(a.TgZ(0,"div",40),a._UZ(1,"app-course",41),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Q6J("course",t)}}function uU(n,e){if(1&n&&(a.TgZ(0,"a",37),a.TgZ(1,"p"),a._uU(2,"+"),a.qZA(),a.TgZ(3,"span"),a._uU(4,"ADD COURSE"),a.qZA(),a.qZA(),a.TgZ(5,"a",38),a.TgZ(6,"p"),a._uU(7,"+"),a.qZA(),a.TgZ(8,"span"),a._uU(9,"ORDER COURSE"),a.qZA(),a.qZA(),a.YNc(10,aU,2,1,"div",39)),2&n){const t=a.oxw();a.xp6(10),a.Q6J("ngForOf",t.filteredCourses)}}function lU(n,e){1&n&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"label",42),a._uU(3,"Location"),a.qZA(),a.qZA(),a.TgZ(4,"td"),a.TgZ(5,"div",19),a.TgZ(6,"select",43),a.TgZ(7,"option",21),a._uU(8,"All"),a.qZA(),a.TgZ(9,"option",44),a._uU(10,"Gyumri"),a.qZA(),a.TgZ(11,"option",45),a._uU(12,"Erevan"),a.qZA(),a.TgZ(13,"option",46),a._uU(14,"Vanadzor"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA())}const cU=function(n){return{boxShadow:n}};let dU=(()=>{class n{constructor(t,r,i){this.fb=t,this.httpClient=r,this.firebase=i,this.filtersState=!1,this.orderCourse=!1,this.loaded=!1,this.form=this.fb.group({course:["All",ct.required],location:["All",ct.required],format:["all",ct.required]}),this.myCourse=[],this.filteredCourses=this.myCourse}ngOnInit(){this.firebase.collection("courses").snapshotChanges().subscribe(t=>{const r=t.map(i=>{const u=i.payload.doc.data();return{id:i.payload.doc.id,name:u.name,type:u.type,duration:u.duration,deadline:u.deadline,format:u.format,location:u.location,price:u.price,logo:u.logo,start:u.start,contacts:u.contacts,teacher:u.teacher,course:u.course,advantage:u.advantage,about:u.about,companySubs:u.companySubs}});this.myCourse=r,this.filteredCourses=this.myCourse}),setTimeout(()=>{this.loaded=!0},500)}openFilters(){this.filtersState=!this.filtersState}get array(){return[...Array(16).keys()]}filter(){this.filteredCourses=this.myCourse.filter(t=>!(t.location!=this.form.value.location&&"All"!=this.form.value.location||t.type!=this.form.value.course&&"All"!=this.form.value.course||t.format!=this.form.value.format&&"all"!=this.form.value.format)),this.filtersState=!1}addCourse(t){this.orderCourse=t}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Lm),a.Y36(xp),a.Y36(Ig))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-courses"]],decls:58,vars:16,consts:[[1,"course-page"],[1,"course__section"],[1,"title"],[1,"courses"],[1,"courses__view"],["class","loading courses__view",4,"ngIf","ngIfElse"],["courses",""],[1,"courses__filter"],[1,"courses__filter__block"],[3,"formGroup","ngSubmit"],["for","format"],[1,"format"],["for","all"],["value","all","type","radio","checked","","name","format","id","all","formControlName","format"],["for","online"],["value","Online","type","radio","name","format","id","online","formControlName","format"],["for","offline"],["value","Offline","type","radio","name","format","id","offline","formControlName","format"],["for","course"],[1,"select"],["id","course","formControlName","course"],["value","All"],["value","Frontend"],["value","Backend"],["value","AI"],["value","Design"],["value","QA"],["value","SMM"],[4,"ngIf"],[1,"courses__filter-btn",3,"click"],["src","assets/icons/filter.png","alt",""],[1,"order-course__block"],[1,"order-course__back",3,"click"],[1,"back"],[1,"loading","courses__view"],["class","course__block gradient",4,"ngFor","ngForOf"],[1,"course__block","gradient"],["href","https://forms.gle/nJ9Dst5rwf9q89yj6","target","_blank",1,"course__block","add-course"],["href","https://forms.gle/D59uzQUyht14ebr38","target","_blank",1,"course__block","add-course"],["class","course__block",4,"ngFor","ngForOf"],[1,"course__block"],[3,"course"],["for","location"],["id","location","formControlName","location"],["value","Gyumri"],["value","Erevan"],["value","Vanadzor"]],template:function(t,r){if(1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h2",2),a._uU(3,"COURSES"),a.qZA(),a.qZA(),a.TgZ(4,"div",3),a.TgZ(5,"div",4),a.YNc(6,oU,2,1,"div",5),a.YNc(7,uU,11,1,"ng-template",null,6,a.W1O),a.qZA(),a.TgZ(9,"div",7),a.TgZ(10,"div",8),a.TgZ(11,"h3"),a._uU(12,"Filters"),a.qZA(),a.TgZ(13,"form",9),a.NdJ("ngSubmit",function(){return r.filter()}),a.TgZ(14,"table"),a.TgZ(15,"tr"),a.TgZ(16,"td"),a.TgZ(17,"label",10),a._uU(18,"Format"),a.qZA(),a.qZA(),a.TgZ(19,"td",11),a.TgZ(20,"label",12),a._uU(21," All "),a._UZ(22,"input",13),a.qZA(),a.TgZ(23,"label",14),a._uU(24," Online "),a._UZ(25,"input",15),a.qZA(),a.TgZ(26,"label",16),a._uU(27," Offline "),a._UZ(28,"input",17),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"tr"),a.TgZ(30,"td"),a.TgZ(31,"label",18),a._uU(32,"Course"),a.qZA(),a.qZA(),a.TgZ(33,"td"),a.TgZ(34,"div",19),a.TgZ(35,"select",20),a.TgZ(36,"option",21),a._uU(37,"All"),a.qZA(),a.TgZ(38,"option",22),a._uU(39,"Frontend"),a.qZA(),a.TgZ(40,"option",23),a._uU(41,"Backend"),a.qZA(),a.TgZ(42,"option",24),a._uU(43,"AI"),a.qZA(),a.TgZ(44,"option",25),a._uU(45,"Design"),a.qZA(),a.TgZ(46,"option",26),a._uU(47,"QA"),a.qZA(),a.TgZ(48,"option",27),a._uU(49,"SMM"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(50,lU,15,0,"tr",28),a.qZA(),a.TgZ(51,"button"),a._uU(52,"Filter"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(53,"button",29),a.NdJ("click",function(){return r.openFilters()}),a._UZ(54,"img",30),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(55,"div",31),a.TgZ(56,"div",32),a.NdJ("click",function(){return r.addCourse(!1)}),a.qZA(),a._UZ(57,"div",33)),2&t){const i=a.MAs(8);a.xp6(6),a.Q6J("ngIf",!r.loaded)("ngIfElse",i),a.xp6(3),a.Tol(r.filtersState?"opened":""),a.xp6(1),a.Akn(a.VKq(14,cU,r.filtersState?"":"none")),a.xp6(3),a.Q6J("formGroup",r.form),a.xp6(37),a.Q6J("ngIf","Online"!==r.form.value.format),a.xp6(3),a.Tol(r.filtersState?"active":""),a.xp6(2),a.Tol(r.orderCourse?"opened":""),a.xp6(1),a.Tol(r.orderCourse?"opened":"")}},directives:[cn,on,iU,bp,Sh,yu,vv,pl,mp,yl,Nh,XT,Ev],styles:['@charset "UTF-8";.back[_ngcontent-%COMP%]{background-image:url(bg2.f261763fa9a5f6d9.png);background-position:center;background-size:cover;background-repeat:no-repeat;height:100vh;width:100%;background-color:#f7f6f9;position:fixed;left:0;top:0;z-index:-1}.course-page[_ngcontent-%COMP%]{padding-left:120px}.course__section[_ngcontent-%COMP%]{padding-top:50px}.title[_ngcontent-%COMP%]{font-size:40px;color:#7834be;text-align:center;margin-bottom:50px;letter-spacing:2px}.course__block[_ngcontent-%COMP%]{min-width:300px;width:22%;height:180px;margin:0 1.5% 15px;background-color:#7834be;border-radius:15px}.courses__view[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;width:100%}.courses[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.courses__filter[_ngcontent-%COMP%]{width:320px;height:100vh;position:fixed;right:-325px;top:0;transition:.3s;z-index:0;padding:15px 15px 15px 0}.courses__filter.opened[_ngcontent-%COMP%]{z-index:10000;right:0}.courses__filter__block[_ngcontent-%COMP%]{background-color:#7834be;height:100%;width:100%;border-radius:15px;box-shadow:-5px 0 #f7f6f9;display:flex;flex-direction:column;align-items:center;padding:200px 15px 15px}.courses__filter__block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:25px;color:#f9d065;margin-bottom:70px}.courses__filter__block[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.courses__filter__block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-spacing:0 15px}.courses__filter__block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#f9d065;font-size:18px;width:45%}.courses__filter__block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.format[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer;margin-bottom:5px}.courses__filter__block[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:pointer}.courses__filter__block[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:after{width:15px;height:15px;border-radius:15px;top:-2px;left:-1px;position:relative;background-color:#424242;content:"";display:inline-block;visibility:visible;border:2px solid #424242}.courses__filter__block[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked:after{width:15px;height:15px;border-radius:15px;top:-2px;left:-1px;position:relative;background-color:#f9d065;content:"";display:inline-block;visibility:visible;border:2px solid #424242}.courses__filter__block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:0 auto;padding:10px 25px;background-color:#7834be;border-radius:15px;border:2px solid #F9D065;cursor:pointer;color:#f9d065;transition:.3s}.courses__filter__block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#7834be;background-color:#f9d065}.courses__filter-btn[_ngcontent-%COMP%]{height:50px;width:50px;position:absolute;left:-50px;top:80px;border:none;outline:none;background-color:#7834be;border-radius:15px 0 0 15px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.3s}.courses__filter-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;will-change:transform}.courses__filter-btn.active[_ngcontent-%COMP%]{left:10px;border-radius:0}.icon[_ngcontent-%COMP%]{font-size:100px;color:#f9d065;margin:15px}select[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;outline:0;border:0;box-shadow:none;flex:1;padding:0 1em;color:#424242;background-color:#f9d065;background-image:none;cursor:pointer}select[_ngcontent-%COMP%]::-ms-expand{display:none}.select[_ngcontent-%COMP%]{position:relative;display:flex;height:45px;border-radius:15px;overflow:hidden}.select[_ngcontent-%COMP%]:after{content:"\\25bc";position:absolute;top:50%;transform:translate(-10px,-50%);color:#424242;right:0;transition:.25s all ease;pointer-events:none}.loading[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.loading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-radius:15px}.add-course[_ngcontent-%COMP%]{min-width:600px;width:47%;display:flex;align-items:center;justify-content:center;flex-direction:column;color:#f7f6f9;text-decoration:none;cursor:pointer}.add-course[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:40px}.add-course[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;font-size:25px}.order-course__block[_ngcontent-%COMP%]{overflow:hidden;width:0;height:0;position:absolute;z-index:10;left:50%;top:50%;transform:translate(-50%,-50%);background-color:#7834be;transition:.3s;border-radius:15px;box-shadow:0 0 5px #f7f6f9}.gradient[_ngcontent-%COMP%]{animation-duration:7s;animation-iteration-count:infinite;animation-name:placeHolderShimmer;animation-timing-function:ease-in-out;background:#7834be;background:linear-gradient(to right,#7834be 8%,#b366ff 38%,#7834be 54%);background-size:100% 100%;position:relative}@keyframes placeHolderShimmer{0%{background-position:-468px 0}50%{background-position:468px 0}to{background-position:-468px 0}}@media screen and (max-width: 1600px){.course__block[_ngcontent-%COMP%]{min-width:340px;width:30%}}@media screen and (max-width: 1275px){.course__block[_ngcontent-%COMP%]{width:45%;margin:0 0 15px}.courses__view[_ngcontent-%COMP%]{justify-content:space-around}}@media screen and (max-width: 1024px){.course-page[_ngcontent-%COMP%]{padding:0}}@media screen and (max-width: 768px){.course__block[_ngcontent-%COMP%]{min-width:300px;height:200px}}@media screen and (max-width: 650px){.course__block[_ngcontent-%COMP%]{width:85%;height:180px}}']}),n})();function hU(n,e){if(1&n&&(a.TgZ(0,"div",7),a.TgZ(1,"div",8),a.TgZ(2,"h2"),a._uU(3),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA(),a.TgZ(6,"h5"),a._uU(7,"Place: "),a.TgZ(8,"em"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"h5"),a._uU(11,"Date: "),a.TgZ(12,"em"),a._uU(13),a.qZA(),a.qZA(),a.TgZ(14,"button"),a._uU(15,"REGISTER"),a.qZA(),a.qZA(),a.TgZ(16,"div",9),a._UZ(17,"img",10),a.qZA(),a.qZA()),2&n){const t=e.$implicit;a.xp6(3),a.Oqu(t.name),a.xp6(2),a.Oqu(t.about),a.xp6(4),a.Oqu(t.place),a.xp6(4),a.Oqu(t.date),a.xp6(4),a.Q6J("src",t.img,a.LSH)}}const fU=function(n,e){return{width:n,left:e}};let pU=(()=>{class n{constructor(t){this.firebase=t,this.loaded=!1,this.events=[],this.pos=0}ngOnInit(){this.firebase.collection("events").snapshotChanges().subscribe(t=>{const r=t.map(i=>{const u=i.payload.doc.data();return{id:i.payload.doc.id,name:u.name,about:u.about,date:u.date,phone:u.phone,place:u.place,img:u.img}});this.events=r,setTimeout(()=>{this.loaded=!0},500)})}next(){this.pos++,this.pos==this.events.length&&(this.pos=0)}prev(){this.pos--,-1==this.pos&&(this.pos=this.events.length-1)}get position(){return`-${100*this.pos}%`}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Ig))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-events"]],decls:10,vars:7,consts:[[1,"slider"],[1,"events"],["class","events__block",4,"ngFor","ngForOf"],[1,"navigation"],[3,"click"],["src","assets/design/arrow.png","alt","",1,"navigation__prev"],["src","assets/design/arrow.png","alt","",1,"navigation__next"],[1,"events__block"],[1,"events__info"],[1,"events__img"],["alt","",3,"src"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.YNc(2,hU,18,5,"div",2),a.qZA(),a.TgZ(3,"div",3),a.TgZ(4,"button",4),a.NdJ("click",function(){return r.prev()}),a._UZ(5,"img",5),a.qZA(),a.TgZ(6,"span"),a._uU(7),a.qZA(),a.TgZ(8,"button",4),a.NdJ("click",function(){return r.next()}),a._UZ(9,"img",6),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.Akn(a.WLB(4,fU,100*r.events.length+"%",r.position)),a.xp6(1),a.Q6J("ngForOf",r.events),a.xp6(5),a.Oqu(r.pos+1))},directives:[on],styles:[".slider[_ngcontent-%COMP%]{width:100%;overflow:hidden;position:relative}.events[_ngcontent-%COMP%]{height:100vh;position:relative;transition:left .3s;left:0;display:flex;color:#f7f6f9}.events__block[_ngcontent-%COMP%]{height:100%;width:100%;padding:50px 50px 50px 130px;display:flex;align-items:center;justify-content:space-evenly;background-image:url(bg.3eb4230ac3c2f553.png);background-size:cover;background-position:center;background-repeat:no-repeat}.events__info[_ngcontent-%COMP%]{width:45%}.events__info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:45px}.events__info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;margin:25px 0;font-weight:300}.events__info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.events__info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-weight:400}.events__info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:10px;margin-top:15px;font-size:21px;background-color:transparent;border:2px solid;cursor:pointer;transition:.3s;transform:translateY(10px);box-shadow:0 2px 5px #f7f6f9;color:#f7f6f9;border-color:#f7f6f9}.events__info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(0)}.events__img[_ngcontent-%COMP%]{width:35%;display:flex}.events__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;will-change:transform;transform:scale(1.0001);width:100%}.navigation[_ngcontent-%COMP%]{text-align:center;display:flex;align-items:center;justify-content:center;position:absolute;bottom:5vh;width:100%}.navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;width:60px;cursor:pointer}.navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.navigation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.navigation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:20px;width:20px;border-radius:50%;background-color:#7834be;color:#f7f6f9;font-weight:500;margin:0 15px}.navigation__prev[_ngcontent-%COMP%]{transform:rotate(-90deg)}.navigation__next[_ngcontent-%COMP%]{transform:rotate(90deg)}"]}),n})();function gU(n,e){1&n&&a._UZ(0,"div",20)}function mU(n,e){1&n&&(a.TgZ(0,"div",21),a.TgZ(1,"h1"),a.TgZ(2,"span"),a._uU(3,"in"),a.qZA(),a._uU(4,"IT"),a.qZA(),a.TgZ(5,"p"),a._uU(6,"your career"),a.qZA(),a.qZA())}function _U(n,e){1&n&&(a.O4$(),a.TgZ(0,"svg",22),a._UZ(1,"path",23),a._UZ(2,"path",24),a._UZ(3,"ellipse",25),a._UZ(4,"ellipse",26),a._UZ(5,"ellipse",27),a._UZ(6,"rect",28),a._UZ(7,"rect",29),a.qZA())}const yU=function(n){return{left:n}};let vU=(()=>{class n{constructor(){this.pos=0,this.loaded=!1}ngOnInit(){this.sliderInterval=setInterval(()=>{3==this.pos?this.pos=0:this.pos++},7e3),sessionStorage.getItem("siteInit")?this.loaded=!0:setTimeout(()=>{sessionStorage.setItem("siteInit","true"),this.loaded=!0},2900)}carousel(t){clearInterval(this.sliderInterval),this.sliderInterval=setInterval(()=>{3==this.pos?this.pos=0:this.pos++},7e3),this.pos=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-main"]],decls:56,vars:17,consts:[[1,"main-section"],["src","assets/icons/logo.png","alt","",1,"logo"],[1,"main__carousel"],[1,"main__carousel-body"],[1,"main__block"],[1,"main__block-info"],["routerLink","/courses"],[1,"main__block-img"],["src","assets/design/course.png","alt",""],["routerLink","/work"],["src","assets/design/work.png","alt",""],["routerLink","/events"],["src","assets/design/events.png","alt",""],["routerLink","/news"],["src","assets/design/news.png","alt",""],[1,"slider"],[1,"slider-navigation",3,"click"],["class","background",4,"ngIf"],["class","animation",4,"ngIf"],["width","200px","class","animation-logo","viewBox","0 0 3696 1515","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],[1,"background"],[1,"animation"],["width","200px","viewBox","0 0 3696 1515","fill","none","xmlns","http://www.w3.org/2000/svg",1,"animation-logo"],["d","M187.257 1228.47C187.257 1236.75 185.185 1242.71 181.041 1246.34C176.897 1249.45 170.422 1251 161.616 1251H52.059C44.289 1251 38.85 1249.45 35.742 1246.34C33.152 1243.23 31.857 1238.31 31.857 1231.57V857.061C31.857 845.147 36.778 839.19 46.62 839.19H173.271C182.595 839.19 187.257 844.37 187.257 854.73V1228.47ZM187.257 782.469C187.257 797.491 178.71 805.002 161.616 805.002H52.059C44.289 805.002 38.85 803.448 35.742 800.34C33.152 796.714 31.857 791.534 31.857 784.8V692.337C31.857 680.423 36.778 674.466 46.62 674.466H173.271C182.595 674.466 187.257 679.905 187.257 690.783V782.469ZM271.349 1251C257.881 1251 251.147 1244.52 251.147 1231.57V857.061C251.147 845.147 256.068 839.19 265.91 839.19H391.007C400.331 839.19 404.993 844.37 404.993 854.73V889.695C404.993 892.803 405.77 894.875 407.324 895.911C409.396 896.947 411.986 895.911 415.094 892.803C425.972 880.889 437.886 870.27 450.836 860.946C463.786 851.622 477.513 844.37 492.017 839.19C507.039 834.01 522.579 831.42 538.637 831.42C574.897 831.42 604.164 842.816 626.438 865.608C649.23 888.4 660.626 918.962 660.626 957.294V1227.69C660.626 1243.23 652.856 1251 637.316 1251H523.097C516.363 1251 511.701 1249.7 509.111 1247.11C506.521 1244.01 505.226 1238.83 505.226 1231.57V978.273C505.226 966.359 501.341 957.294 493.571 951.078C486.319 944.344 476.477 940.977 464.045 940.977C456.275 940.977 448.764 942.531 441.512 945.639C434.778 948.229 428.562 952.373 422.864 958.071C417.166 963.769 411.727 971.021 406.547 979.827V1228.47C406.547 1243.49 398 1251 380.906 1251H271.349Z","fill","white"],["d","M761.11 1264V221.68H1095.93V1264H761.11ZM1585.48 1264V488.32H1243.09V221.68H2261.17V488.32H1920.3V1264H1585.48Z","fill","#F9D065"],["cx","2719.16","cy","451.505","rx","368.5","ry","361","transform","rotate(10 2719.16 451.505)","fill","white"],["cx","2719.16","cy","451.505","rx","245.421","ry","240.426","transform","rotate(10 2719.16 451.505)","fill","#7834BE"],["cx","2619.24","cy","339.802","rx","147.4","ry","144.4","transform","rotate(10 2619.24 339.802)","fill","white"],["x","3108.85","y","731.65","width","666","height","300","rx","150","transform","rotate(52 3108.85 731.65)","fill","white"],["x","2944.06","y","603.951","width","404","height","197","transform","rotate(52 2944.06 603.951)","fill","white"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"img",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a.TgZ(6,"h3"),a._uU(7,"Courses"),a.qZA(),a.TgZ(8,"p"),a._uU(9,"Up-to-date knowledge from recognized market experts for beginners and practitioners. Our teachers help to fully master the profession from scratch, build a portfolio and allows you to get a specific skill."),a.qZA(),a.TgZ(10,"button",6),a._uU(11,"Show"),a.qZA(),a.qZA(),a.TgZ(12,"div",7),a._UZ(13,"img",8),a.qZA(),a.qZA(),a.TgZ(14,"div",4),a.TgZ(15,"div",5),a.TgZ(16,"h3"),a._uU(17,"Work"),a.qZA(),a.TgZ(18,"p"),a._uU(19,"If IT sounds like the place you want to be, you're in luck because there's a place for you. We collect the best vacancies in the industry we are looking for Professionals with the right skill set available endless IT job opportunities."),a.qZA(),a.TgZ(20,"button",9),a._uU(21,"Show"),a.qZA(),a.qZA(),a.TgZ(22,"div",7),a._UZ(23,"img",10),a.qZA(),a.qZA(),a.TgZ(24,"div",4),a.TgZ(25,"div",5),a.TgZ(26,"h3"),a._uU(27,"Events"),a.qZA(),a.TgZ(28,"p"),a._uU(29,"We publicize events in the field of information technology, events - a poster of all major business events in the IT market in Armenia Free specialized IT conferences, seminars, master classes, webinars on actual topics"),a.qZA(),a.TgZ(30,"button",11),a._uU(31,"Show"),a.qZA(),a.qZA(),a.TgZ(32,"div",7),a._UZ(33,"img",12),a.qZA(),a.qZA(),a.TgZ(34,"div",4),a.TgZ(35,"div",5),a.TgZ(36,"h3"),a._uU(37,"News"),a.qZA(),a.TgZ(38,"p"),a._uU(39,"Get the latest it news videos, articles and the latest top stories in IT from all the world "),a.qZA(),a.TgZ(40,"button",13),a._uU(41,"Show"),a.qZA(),a.qZA(),a.TgZ(42,"div",7),a._UZ(43,"img",14),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"div",15),a.TgZ(45,"button",16),a.NdJ("click",function(){return r.carousel(0)}),a._UZ(46,"span"),a.qZA(),a.TgZ(47,"button",16),a.NdJ("click",function(){return r.carousel(1)}),a._UZ(48,"span"),a.qZA(),a.TgZ(49,"button",16),a.NdJ("click",function(){return r.carousel(2)}),a._UZ(50,"span"),a.qZA(),a.TgZ(51,"button",16),a.NdJ("click",function(){return r.carousel(3)}),a._UZ(52,"span"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(53,gU,1,0,"div",17),a.YNc(54,mU,7,0,"div",18),a.YNc(55,_U,8,0,"svg",19)),2&t&&(a.Tol(r.loaded?"":"loading"),a.xp6(3),a.Akn(a.VKq(15,yU,-100*r.pos+"%")),a.xp6(42),a.Tol(0==r.pos?"active":""),a.xp6(2),a.Tol(1==r.pos?"active":""),a.xp6(2),a.Tol(2==r.pos?"active":""),a.xp6(2),a.Tol(3==r.pos?"active":""),a.xp6(2),a.Q6J("ngIf",!r.loaded),a.xp6(1),a.Q6J("ngIf",!r.loaded),a.xp6(1),a.Q6J("ngIf",!r.loaded))},directives:[Nc,cn],styles:[".main-section[_ngcontent-%COMP%]{padding:50px 50px 50px 130px;height:100vh;background-image:url(mainbg1.fae3f826e5d138d5.png);background-size:cover;background-position:center -30vh;background-repeat:no-repeat;background-color:#f7f6f9;opacity:1;transition:opacity .3s}.main-section.loading[_ngcontent-%COMP%]{opacity:0}.main-section[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{border-radius:15px;width:200px;position:absolute;left:50%;transform:translate(-50%);will-change:transform;top:45px}.main__carousel[_ngcontent-%COMP%]{overflow:hidden;width:100%;padding:18vh 0 40px;position:relative}.main__carousel-body[_ngcontent-%COMP%]{width:400%;position:relative;transition:.5s ease-in-out;display:flex;align-items:center}.main__block[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;text-align:left;width:100%}.main__block.right[_ngcontent-%COMP%]{text-align:right}.main__block-info[_ngcontent-%COMP%]{max-width:600px}.main__block-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:45px;color:#7834be}.main__block-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#424242;margin:30px 0}.main__block-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;color:#7834be;font-weight:500;font-size:23px;letter-spacing:2px;border:2px solid #7834BE;padding:12px 24px;border-radius:15px;background-image:linear-gradient(to right,#f7f6f9 50%,#7834BE 50%);background-size:200% 100%;background-position:left top;cursor:pointer;transition:.3s ease-out;font-size:16px}.main__block-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-position:right top;color:#f7f6f9}.main__block-img[_ngcontent-%COMP%]{max-width:500px}.main__block-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;will-change:transform}.animation[_ngcontent-%COMP%]{position:fixed;left:50%;transform:translate(-50%) scale(4);top:70vh;display:flex;align-items:flex-end;animation:loading 1.5s;opacity:0}.animation[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f9d065;line-height:.8}.animation[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f7f6f9}.animation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transform-origin:top left;animation:slogan 1.5s;color:#f7f6f9}.animation-logo[_ngcontent-%COMP%]{position:fixed;left:50%;transform:translate(-50%) scale(2);width:200px;top:50vh;opacity:0;animation:logo 3s}.background[_ngcontent-%COMP%]{height:100vh;width:100vw;background-color:#7834be;position:fixed;top:0;left:0;animation:bg 3s;opacity:0}@keyframes bg{0%{opacity:1}98%{opacity:1}to{opacity:0}}@keyframes logo{35%{opacity:0;transform:translate(-50%) scale(2);top:50vh}50%{opacity:1;transform:translate(-50%) scale(2);top:50vh}to{opacity:1;transform:translate(-50%) scale(1);top:45px}}@keyframes slogan{65%{opacity:1;transform:scaleX(1)}to{opacity:0;transform:scaleX(0)}}@keyframes loading{0%{top:80vh}50%{opacity:1;top:50vh}65%{letter-spacing:0}70%{top:50vh;opacity:1}to{top:50vh;letter-spacing:-10px;opacity:0}}.slider[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);bottom:0;display:flex;align-items:center}.slider-navigation[_ngcontent-%COMP%]{width:60px;height:15px;background-color:transparent;margin:0 5px;border:none;cursor:pointer;transition:.3s;display:flex;align-items:center}.slider-navigation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:60px;height:3px;background-color:#7834be;display:block;transition:.3s}.slider-navigation.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:translateY(-2px);background-color:#f9d065}@media screen and (max-width: 1024px){.main-section[_ngcontent-%COMP%]{padding:50px}.main__carousel[_ngcontent-%COMP%]{padding-top:200px}}@media screen and (max-width: 768px){.main-section[_ngcontent-%COMP%]{padding:30px}.main__block-info[_ngcontent-%COMP%]{text-align:center}.main__block-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}}"]}),n})(),wU=(()=>{class n{constructor(){this.modalOpened=!1,this.newItemEvent=new a.vpe}ngOnInit(){}closeModal(){this.newItemEvent.emit(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-news-view"]],inputs:{modalOpened:"modalOpened",news:"news"},outputs:{newItemEvent:"newItemEvent"},decls:13,vars:6,consts:[[1,"main"],["alt","",1,"news__img",3,"src"],[1,"news__title"],[1,"news__blog"],[1,"news__date"],[1,"close",3,"click"],[1,"close-btn"],[1,"back",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"img",1),a.TgZ(2,"h2",2),a._uU(3),a.qZA(),a.TgZ(4,"pre",3),a._uU(5),a.qZA(),a.TgZ(6,"em",4),a._uU(7),a.qZA(),a.TgZ(8,"button",5),a.NdJ("click",function(){return r.closeModal()}),a.TgZ(9,"div",6),a._UZ(10,"span"),a._UZ(11,"span"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"div",7),a.NdJ("click",function(){return r.closeModal()}),a.qZA()),2&t&&(a.Tol(r.modalOpened?"opened":""),a.xp6(1),a.Q6J("src",r.news.img,a.LSH),a.xp6(2),a.Oqu(r.news.title),a.xp6(2),a.Oqu(r.news.blog),a.xp6(2),a.hij("Publish date: ",r.news.date,""))},styles:[".main[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;overflow:hidden;height:0;width:0;padding:20px;background-color:#f7f6f9;border:3px solid #7834BE;border-radius:15px;transition:.3s;z-index:1000}.main[_ngcontent-%COMP%]   .news__img[_ngcontent-%COMP%]{width:100%}.main[_ngcontent-%COMP%]   .news__title[_ngcontent-%COMP%]{color:#7834be;margin:15px 0}.main[_ngcontent-%COMP%]   .news__blog[_ngcontent-%COMP%]{white-space:break-spaces;max-width:100%;color:#424242}.main[_ngcontent-%COMP%]   .news__date[_ngcontent-%COMP%]{display:inline-block;font-size:15px;margin-top:15px;color:#a3a3a3}.main.opened[_ngcontent-%COMP%]{opacity:1;height:80vh;width:700px;min-height:756px;padding-right:20px;overflow-y:auto}.main.opened[_ngcontent-%COMP%] + .back[_ngcontent-%COMP%]{opacity:1;z-index:1}.back[_ngcontent-%COMP%]{position:fixed;opacity:0;top:0;left:0;overflow:hidden;height:100vh;width:100vw;transition:opacity .3s;background-color:#00000086;z-index:-1}.close[_ngcontent-%COMP%]{position:absolute;display:block;cursor:pointer;right:20px;top:10px;height:50px;width:41px;background:transparent;border:none}.close-btn[_ngcontent-%COMP%]{position:relative}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:3px;width:40px;position:absolute;display:block;background-color:#f7f6f9;left:0;top:50%;transform:translateY(-50%)}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg)}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-45deg)}@media screen and (max-height: 800px){.main[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(.9)}}@media screen and (max-height: 700px){.main[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(.7)}}@media screen and (max-width: 750px){.main.opened[_ngcontent-%COMP%]{width:600px}}@media screen and (max-width: 650px){.main[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.main.opened[_ngcontent-%COMP%]{width:100%;height:100vh}}"]}),n})();function CU(n,e){1&n&&(a.TgZ(0,"div"),a.TgZ(1,"div",6),a._UZ(2,"div",7),a.TgZ(3,"div",8),a._UZ(4,"div",9),a._UZ(5,"div",9),a.qZA(),a.qZA(),a.TgZ(6,"div",10),a._UZ(7,"div",9),a._UZ(8,"div",9),a._UZ(9,"div",9),a._UZ(10,"div",9),a._UZ(11,"div",9),a._UZ(12,"div",9),a.qZA(),a.qZA())}const Fx=function(n){return{backgroundImage:n}};function bU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",13),a.NdJ("click",function(){const u=a.CHM(t).$implicit;return a.oxw(2).openModal(u)}),a.TgZ(1,"h2"),a._uU(2),a.qZA(),a.TgZ(3,"p"),a._uU(4),a.qZA(),a.TgZ(5,"em"),a._uU(6),a.qZA(),a.qZA()}if(2&n){const t=e.$implicit,r=a.oxw(2);a.Akn(a.VKq(5,Fx,r.newsImage(t.img))),a.xp6(2),a.Oqu(t.title),a.xp6(2),a.Oqu(t.blog),a.xp6(2),a.Oqu(t.date)}}function EU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",13),a.NdJ("click",function(){const u=a.CHM(t).$implicit;return a.oxw(2).openModal(u)}),a.TgZ(1,"h2"),a._uU(2),a.qZA(),a.TgZ(3,"p"),a._uU(4),a.qZA(),a.TgZ(5,"em"),a._uU(6),a.qZA(),a.qZA()}if(2&n){const t=e.$implicit,r=a.oxw(2);a.Akn(a.VKq(5,Fx,r.newsImage(t.img))),a.xp6(2),a.Oqu(t.title),a.xp6(2),a.Oqu(t.blog),a.xp6(2),a.Oqu(t.date)}}function IU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",6),a.TgZ(1,"div",11),a.NdJ("click",function(){a.CHM(t);const i=a.oxw();return i.openModal(i.bigNews)}),a.TgZ(2,"h2"),a._uU(3),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA(),a.TgZ(6,"em"),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"div",8),a.YNc(9,bU,7,7,"div",12),a.qZA(),a.qZA(),a.TgZ(10,"div",10),a.YNc(11,EU,7,7,"div",12),a.qZA()}if(2&n){const t=a.oxw();a.xp6(1),a.Akn(a.VKq(7,Fx,t.newsImage(t.bigNews.img))),a.xp6(2),a.Oqu(t.bigNews.title),a.xp6(2),a.Oqu(t.bigNews.blog),a.xp6(2),a.Oqu(t.bigNews.date),a.xp6(2),a.Q6J("ngForOf",t.smallNews),a.xp6(2),a.Q6J("ngForOf",t.otherNews)}}let TU=(()=>{class n{constructor(t){this.firebase=t,this.loaded=!1,this.modalState=!1,this.bigModalState=!1,this.news=[],this.bigNews={id:"-999",title:"Loading...",blog:"Loading...",date:"Loading...",img:"assets/news/microsoft.png"},this.smallNews=[],this.otherNews=[],this.currentNews=this.bigNews}ngOnInit(){this.firebase.collection("news").snapshotChanges().subscribe(t=>{const r=t.map(i=>{const u=i.payload.doc.data();return{id:i.payload.doc.id,title:u.title,blog:u.blog,date:u.date,img:u.img}});this.news=r,this.bigNews=this.news[0],this.smallNews=this.news.slice(1,3),this.otherNews=this.news.slice(3),setTimeout(()=>{this.loaded=!0},500)})}newsImage(t){return`url(${t})`}openModal(t){this.currentNews=t,this.modalState=!0}emitFunc(t){this.modalState=!1}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Ig))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-news"]],decls:8,vars:4,consts:[[1,"news"],[1,"news__title"],[4,"ngIf","ngIfElse"],["news",""],[3,"modalOpened","news","newItemEvent"],[1,"back"],[1,"news__section"],[1,"news__big","gradient"],[1,"news__small"],[1,"gradient"],[1,"news__normal"],[1,"news__big",3,"click"],[3,"style","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){if(1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h2",1),a._uU(2,"NEWS"),a.qZA(),a.YNc(3,CU,13,0,"div",2),a.YNc(4,IU,12,9,"ng-template",null,3,a.W1O),a.qZA(),a.TgZ(6,"app-news-view",4),a.NdJ("newItemEvent",function(u){return r.emitFunc(u)}),a.qZA(),a._UZ(7,"div",5)),2&t){const i=a.MAs(5);a.xp6(3),a.Q6J("ngIf",!r.loaded)("ngIfElse",i),a.xp6(3),a.Q6J("modalOpened",r.modalState)("news",r.currentNews)}},directives:[cn,on,wU],styles:[".back[_ngcontent-%COMP%]{background-image:url(bg2.f261763fa9a5f6d9.png);background-position:center;background-size:cover;background-repeat:no-repeat;height:100vh;width:100%;background-color:#f7f6f9;position:fixed;left:0;top:0;z-index:-1}.news[_ngcontent-%COMP%]{padding:50px 0 50px 120px}.news__title[_ngcontent-%COMP%]{font-size:40px;color:#7834be;text-align:center;margin-bottom:50px;letter-spacing:2px}.news__section[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.news__big[_ngcontent-%COMP%]{width:45%;height:400px;border-radius:15px;padding:25px;background-size:cover;background-position:center;display:flex;flex-direction:column;justify-content:flex-end;box-shadow:0 0 5px #424242;cursor:pointer}.news__big[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f9d065;text-shadow:0 0 5px #424242}.news__big[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:80%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#f7f6f9}.news__big[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{color:#bebebe}.news__small[_ngcontent-%COMP%]{width:45%;height:400px;display:flex;flex-wrap:wrap;justify-content:space-between;align-content:space-between}.news__small[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:180px;background-color:#7834be;border-radius:15px;padding:25px;background-size:cover;background-position:center;display:flex;flex-direction:column;justify-content:flex-end;box-shadow:0 0 5px #424242;cursor:pointer}.news__small[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f9d065;text-shadow:0 0 5px #424242}.news__small[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:80%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#f7f6f9}.news__small[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{color:#bebebe}.news__normal[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.news__normal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:30px;width:45%;height:180px;border-radius:15px;padding:25px;background-size:cover;background-position:center;display:flex;flex-direction:column;justify-content:flex-end;box-shadow:0 0 5px #424242;cursor:pointer}.news__normal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f9d065;text-shadow:0 0 5px #424242}.news__normal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:80%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#f7f6f9}.news__normal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{color:#bebebe}.gradient[_ngcontent-%COMP%]{animation-duration:7s;animation-iteration-count:infinite;animation-name:placeHolderShimmer;animation-timing-function:ease-in-out;background:#7834be;background:linear-gradient(to right,#7834be 8%,#b366ff 38%,#7834be 54%);background-size:100% 100%;position:relative}@keyframes placeHolderShimmer{0%{background-position:-468px 0}50%{background-position:468px 0}to{background-position:-468px 0}}"]}),n})();function DU(n,e){if(1&n&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}function AU(n,e){if(1&n&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}let SU=(()=>{class n{constructor(){this.modalOpened=!1,this.newItemEvent=new a.vpe}ngOnInit(){}closeModal(){this.newItemEvent.emit(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-work-view"]],inputs:{modalOpened:"modalOpened",work:"work"},outputs:{newItemEvent:"newItemEvent"},decls:60,vars:13,consts:[[1,"main"],[1,"main-flex"],[1,"leftside"],[1,"block"],[1,"rightside"],[4,"ngFor","ngForOf"],[1,"register"],["href",""],[1,"close",3,"click"],[1,"close-btn"],[1,"back",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h3"),a._uU(2),a.qZA(),a.TgZ(3,"div",1),a.TgZ(4,"div",2),a.TgZ(5,"div",3),a.TgZ(6,"h5"),a._uU(7,"Work:"),a.qZA(),a.TgZ(8,"h6"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"div",3),a.TgZ(11,"h5"),a._uU(12,"Deadline to apply:"),a.qZA(),a.TgZ(13,"h6"),a._uU(14),a.qZA(),a.qZA(),a.TgZ(15,"div",3),a.TgZ(16,"h5"),a._uU(17,"Work format:"),a.qZA(),a.TgZ(18,"h6"),a._uU(19),a.qZA(),a.qZA(),a.TgZ(20,"div",3),a.TgZ(21,"h5"),a._uU(22,"Location:"),a.qZA(),a.TgZ(23,"h6"),a._uU(24),a.qZA(),a.qZA(),a.TgZ(25,"div",3),a.TgZ(26,"h5"),a._uU(27,"Company:"),a.qZA(),a.TgZ(28,"h6"),a._uU(29),a.qZA(),a.qZA(),a.qZA(),a.TgZ(30,"div",4),a.TgZ(31,"div"),a.TgZ(32,"h5"),a._uU(33,"Required skills"),a.qZA(),a.TgZ(34,"ul"),a.YNc(35,DU,2,1,"li",5),a.qZA(),a.qZA(),a.TgZ(36,"div"),a.TgZ(37,"h5"),a._uU(38,"Nice to have skills"),a.qZA(),a.TgZ(39,"ul"),a.YNc(40,AU,2,1,"li",5),a.qZA(),a.qZA(),a.TgZ(41,"div"),a.TgZ(42,"h5"),a._uU(43,"Work address:"),a.qZA(),a.TgZ(44,"h6"),a._uU(45),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(46,"div",6),a.TgZ(47,"div"),a.TgZ(48,"p"),a._uU(49),a.qZA(),a.TgZ(50,"a",7),a._uU(51),a.qZA(),a.qZA(),a.TgZ(52,"div"),a.TgZ(53,"button"),a._uU(54,"REGISTER"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(55,"button",8),a.NdJ("click",function(){return r.closeModal()}),a.TgZ(56,"div",9),a._UZ(57,"span"),a._UZ(58,"span"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(59,"div",10),a.NdJ("click",function(){return r.closeModal()}),a.qZA()),2&t&&(a.Tol(r.modalOpened?"opened":""),a.xp6(2),a.Oqu(r.work.name),a.xp6(7),a.Oqu(r.work.degree),a.xp6(5),a.Oqu(r.work.deadline),a.xp6(5),a.Oqu(r.work.format),a.xp6(5),a.Oqu(r.work.company.location),a.xp6(5),a.Oqu(r.work.company.name),a.xp6(6),a.Q6J("ngForOf",r.work.requiredSkills),a.xp6(5),a.Q6J("ngForOf",r.work.niceSkills),a.xp6(5),a.Oqu(r.work.company.address),a.xp6(4),a.Oqu(r.work.company.phone),a.xp6(2),a.Oqu(r.work.company.email))},directives:[on],styles:[".main[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;overflow:hidden;height:0;width:0;padding:20px;background-color:#f7f6f9;border:3px solid #7834BE;border-radius:15px;transition:.3s;z-index:1000}.main.opened[_ngcontent-%COMP%]{opacity:1;height:80vh;min-height:656px;width:700px;padding-bottom:120px}.main.opened[_ngcontent-%COMP%] + .back[_ngcontent-%COMP%]{opacity:1;z-index:1}.main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#7834be;font-size:28px;margin-bottom:15px}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{width:100%;position:absolute;border-radius:15px 15px 0 0;padding:20px;border-top:2px solid #7834BE;bottom:0;left:0;display:flex;align-items:center;justify-content:space-between}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:17px}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#7834be;background-color:#f7f6f9;border-radius:15px;padding:10px 25px;font-size:17px;cursor:pointer;transition:.3s}.main[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#f7f6f9;background-color:#7834be}.main[_ngcontent-%COMP%]   .main-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;overflow-y:auto;height:500px}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]{flex:1;padding-top:30px;position:relative;margin-right:20px}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   .work-icon-logo[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:50px;will-change:transform;transform:scale(1.001)}.main[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7834be;font-size:22px;text-align:center}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]{width:45%;padding-top:30px;color:#424242}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #7834BE;border-radius:15px;padding:15px}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:22px;font-weight:400;color:#424242;min-width:210px;margin-bottom:15px}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#7834be;margin-bottom:5px}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none}.main[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#7834be;margin-bottom:5px}.back[_ngcontent-%COMP%]{position:fixed;opacity:0;top:0;left:0;overflow:hidden;height:100vh;width:100vw;transition:opacity .3s;background-color:#00000086;z-index:-1}.close[_ngcontent-%COMP%]{position:absolute;display:block;cursor:pointer;right:20px;top:10px;height:50px;width:41px;background:transparent;border:none}.close-btn[_ngcontent-%COMP%]{position:relative}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:3px;width:40px;position:absolute;display:block;background-color:#7834be;left:0;top:50%;transform:translateY(-50%)}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg)}.close-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){transform:rotate(-45deg)}.block[_ngcontent-%COMP%]{display:flex;margin-bottom:15px;border:1px solid #7834BE;border-radius:15px;padding:15px;align-items:center;justify-content:space-between}.block[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:21px;font-weight:400;color:#424242}.block[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:17px;font-weight:400;color:#7834be}@media screen and (max-height: 656px){.main.opened[_ngcontent-%COMP%]{min-height:100vh}.main-flex[_ngcontent-%COMP%]{height:calc(100vh - 166px)!important}}@media screen and (max-width: 700px){.main.opened[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 570px){.main-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.main-flex[_ngcontent-%COMP%]   .leftside[_ngcontent-%COMP%], .main-flex[_ngcontent-%COMP%]   .rightside[_ngcontent-%COMP%]{width:80%;margin:0;padding:0}}"]}),n})(),xU=(()=>{class n{constructor(){this.modalState=!1}ngOnInit(){}openModal(){this.modalState=!0}emitFunc(t){this.modalState=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-work-block"]],inputs:{work:"work"},decls:14,vars:7,consts:[[1,"work",3,"click"],[1,"work__info"],[1,"work__img"],["alt","",1,"work__img-icon",3,"src"],["src","assets/course-icons/gitc.png","alt","",1,"companyLogo"],[3,"modalOpened","work","newItemEvent"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.NdJ("click",function(){return r.openModal()}),a.TgZ(1,"div",1),a.TgZ(2,"h3"),a._uU(3),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA(),a.TgZ(8,"span"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"div",2),a._UZ(11,"img",3),a.qZA(),a._UZ(12,"img",4),a.qZA(),a.TgZ(13,"app-work-view",5),a.NdJ("newItemEvent",function(u){return r.emitFunc(u)}),a.qZA()),2&t&&(a.xp6(3),a.Oqu(r.work.name),a.xp6(2),a.Oqu(r.work.degree),a.xp6(2),a.Oqu(r.work.deadline),a.xp6(2),a.Oqu(r.work.company.location),a.xp6(2),a.Q6J("src","assets/course-icons/"+r.work.logo+".png",a.LSH),a.xp6(2),a.Q6J("modalOpened",r.modalState)("work",r.work))},directives:[SU],styles:[".work[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-between;padding:15px;border-radius:15px;background-color:#7834be;transition:.3s;position:relative;cursor:pointer;background-image:url(newbg1.6ba3115ac13491a6.png);background-size:250px 100%;background-position:right bottom;background-repeat:no-repeat}.work[_ngcontent-%COMP%]:hover   .work__img-icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.3)}.work__info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f9d065;font-size:24px;margin-bottom:15px}.work__info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f7f6f9}.work__info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-top:15px;color:#aaa}.work__img[_ngcontent-%COMP%]{height:150px;width:150px;min-width:150px;position:relative}.work__img-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:30%;transform:translate(-50%,-50%) scale(1.001);width:60px;height:60px;transition:.3s;will-change:transform}.companyLogo[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;width:40px;z-index:0}"]}),n})();function MU(n,e){1&n&&a._UZ(0,"div",10)}function OU(n,e){if(1&n&&(a.TgZ(0,"div",8),a.YNc(1,MU,1,0,"div",9),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.array)}}function PU(n,e){if(1&n&&(a.TgZ(0,"div",12),a._UZ(1,"app-work-block",13),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.Q6J("work",t)}}function kU(n,e){if(1&n&&a.YNc(0,PU,2,1,"div",11),2&n){const t=a.oxw();a.Q6J("ngForOf",t.filteredWork)}}const NU=[{path:"",component:vU},{path:"courses",component:dU},{path:"work",component:(()=>{class n{constructor(t,r){this.httpClient=t,this.firebase=r,this.loaded=!1,this.myWork=[],this.filteredWork=this.myWork}ngOnInit(){this.firebase.collection("work").snapshotChanges().subscribe(t=>{const r=t.map(i=>{const u=i.payload.doc.data();return{id:i.payload.doc.id,name:u.name,degree:u.degree,deadline:u.deadline,requiredSkills:u.requiredSkills,niceSkills:u.niceSkills,format:u.format,logo:u.logo,company:u.company}});this.myWork=r,this.filteredWork=this.myWork,setTimeout(()=>{this.loaded=!0},500)})}get array(){return[...Array(16).keys()]}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(xp),a.Y36(Ig))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-work"]],decls:10,vars:2,consts:[[1,"work-page"],[1,"work__section"],[1,"title"],[1,"works"],[1,"works__view"],["class","loading works__view",4,"ngIf","ngIfElse"],["work",""],[1,"back"],[1,"loading","works__view"],["class","work__block gradient",4,"ngFor","ngForOf"],[1,"work__block","gradient"],["class","work__block",4,"ngFor","ngForOf"],[1,"work__block"],[3,"work"]],template:function(t,r){if(1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h2",2),a._uU(3,"WORK"),a.qZA(),a.qZA(),a.TgZ(4,"div",3),a.TgZ(5,"div",4),a.YNc(6,OU,2,1,"div",5),a.YNc(7,kU,1,1,"ng-template",null,6,a.W1O),a.qZA(),a.qZA(),a.qZA(),a._UZ(9,"div",7)),2&t){const i=a.MAs(8);a.xp6(6),a.Q6J("ngIf",!r.loaded)("ngIfElse",i)}},directives:[cn,on,xU],styles:['@charset "UTF-8";.back[_ngcontent-%COMP%]{background-image:url(bg2.f261763fa9a5f6d9.png);background-position:center;background-size:cover;background-repeat:no-repeat;height:100vh;width:100%;background-color:#f7f6f9;position:fixed;left:0;top:0;z-index:-1}.work-page[_ngcontent-%COMP%]{padding-left:120px}@media screen and (max-width: 1024px){.work-page[_ngcontent-%COMP%]{padding:0}}.work__section[_ngcontent-%COMP%]{padding-top:50px}.title[_ngcontent-%COMP%]{font-size:40px;color:#7834be;text-align:center;margin-bottom:50px;letter-spacing:2px}.work__block[_ngcontent-%COMP%]{min-width:300px;width:22%;height:180px;margin:0 1.5% 15px}.works__view[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;width:100%}.works[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.icon[_ngcontent-%COMP%]{font-size:100px;color:#f9d065;margin:15px}select[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;outline:0;border:0;box-shadow:none;flex:1;padding:0 1em;color:#424242;background-color:#f9d065;background-image:none;cursor:pointer}select[_ngcontent-%COMP%]::-ms-expand{display:none}.select[_ngcontent-%COMP%]{position:relative;display:flex;height:45px;border-radius:15px;overflow:hidden}.select[_ngcontent-%COMP%]:after{content:"\\25bc";position:absolute;top:50%;transform:translate(-10px,-50%);color:#424242;right:0;transition:.25s all ease;pointer-events:none}.loading[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.loading[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-radius:15px}.gradient[_ngcontent-%COMP%]{animation-duration:7s;animation-iteration-count:infinite;animation-name:placeHolderShimmer;animation-timing-function:ease-in-out;background:#7834be;background:linear-gradient(to right,#7834be 8%,#b366ff 38%,#7834be 54%);background-size:100% 100%;position:relative}@keyframes placeHolderShimmer{0%{background-position:-468px 0}50%{background-position:468px 0}to{background-position:-468px 0}}@media screen and (max-width: 1600px){.work__block[_ngcontent-%COMP%]{min-width:340px;width:30%}}@media screen and (max-width: 1275px){.work__block[_ngcontent-%COMP%]{width:45%;margin:0 0 15px}.works__view[_ngcontent-%COMP%]{justify-content:space-around}}@media screen and (max-width: 768px){.work__block[_ngcontent-%COMP%]{min-width:300px;height:200px}}@media screen and (max-width: 650px){.work__block[_ngcontent-%COMP%]{width:85%;height:180px}}']}),n})()},{path:"events",component:pU},{path:"news",component:TU},{path:"aboutus",component:J2},{path:"QmYzcL6JuYNR62Vc",component:Q2}];let RU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[it.forRoot(NU,{scrollPositionRestoration:"enabled"})],it]}),n})();const FU=function(n){return{boxShadow:n}};let LU=(()=>{class n{constructor(){this.menuOpened=!1}ngOnInit(){}openMenu(){this.menuOpened=!this.menuOpened}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-menu"]],decls:64,vars:8,consts:[[1,"main"],[1,"menu"],[1,"menu__ul"],["routerLink","/",1,"menu__li","logo"],["width","60%","viewBox","0 0 3696 1515","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M187.257 1228.47C187.257 1236.75 185.185 1242.71 181.041 1246.34C176.897 1249.45 170.422 1251 161.616 1251H52.059C44.289 1251 38.85 1249.45 35.742 1246.34C33.152 1243.23 31.857 1238.31 31.857 1231.57V857.061C31.857 845.147 36.778 839.19 46.62 839.19H173.271C182.595 839.19 187.257 844.37 187.257 854.73V1228.47ZM187.257 782.469C187.257 797.491 178.71 805.002 161.616 805.002H52.059C44.289 805.002 38.85 803.448 35.742 800.34C33.152 796.714 31.857 791.534 31.857 784.8V692.337C31.857 680.423 36.778 674.466 46.62 674.466H173.271C182.595 674.466 187.257 679.905 187.257 690.783V782.469ZM271.349 1251C257.881 1251 251.147 1244.52 251.147 1231.57V857.061C251.147 845.147 256.068 839.19 265.91 839.19H391.007C400.331 839.19 404.993 844.37 404.993 854.73V889.695C404.993 892.803 405.77 894.875 407.324 895.911C409.396 896.947 411.986 895.911 415.094 892.803C425.972 880.889 437.886 870.27 450.836 860.946C463.786 851.622 477.513 844.37 492.017 839.19C507.039 834.01 522.579 831.42 538.637 831.42C574.897 831.42 604.164 842.816 626.438 865.608C649.23 888.4 660.626 918.962 660.626 957.294V1227.69C660.626 1243.23 652.856 1251 637.316 1251H523.097C516.363 1251 511.701 1249.7 509.111 1247.11C506.521 1244.01 505.226 1238.83 505.226 1231.57V978.273C505.226 966.359 501.341 957.294 493.571 951.078C486.319 944.344 476.477 940.977 464.045 940.977C456.275 940.977 448.764 942.531 441.512 945.639C434.778 948.229 428.562 952.373 422.864 958.071C417.166 963.769 411.727 971.021 406.547 979.827V1228.47C406.547 1243.49 398 1251 380.906 1251H271.349Z","fill","white"],["d","M761.11 1264V221.68H1095.93V1264H761.11ZM1585.48 1264V488.32H1243.09V221.68H2261.17V488.32H1920.3V1264H1585.48Z","fill","#F9D065"],["cx","2719.16","cy","451.505","rx","368.5","ry","361","transform","rotate(10 2719.16 451.505)","fill","white"],["cx","2719.16","cy","451.505","rx","245.421","ry","240.426","transform","rotate(10 2719.16 451.505)","fill","#7834BE"],["cx","2619.24","cy","339.802","rx","147.4","ry","144.4","transform","rotate(10 2619.24 339.802)","fill","white"],["x","3108.85","y","731.65","width","666","height","300","rx","150","transform","rotate(52 3108.85 731.65)","fill","white"],["x","2944.06","y","603.951","width","404","height","197","transform","rotate(52 2944.06 603.951)","fill","white"],[1,"logo__h3"],[1,"it"],["routerLinkActive","active","routerLink","/courses",1,"menu__li"],["src","assets/icons/courses.png","alt",""],["routerLinkActive","active","routerLink","/work",1,"menu__li"],["src","assets/icons/work.png","alt",""],["routerLinkActive","active","routerLink","/events",1,"menu__li"],["src","assets/icons/events.png","alt",""],["routerLinkActive","active","routerLink","/news",1,"menu__li"],["src","assets/icons/news.png","alt",""],["routerLinkActive","active","routerLink","/aboutus",1,"menu__li"],["src","assets/icons/info.png","alt",""],[1,"menu-mobile"],[1,"menu-mobile__ul"],["routerLink","/","src","assets/icons/logo.png","alt","",1,"menu-mobile__logo"],["routerLinkActive","active","routerLink","/courses",1,"menu-mobile__li"],["routerLinkActive","active","routerLink","/work",1,"menu-mobile__li"],["routerLinkActive","active","routerLink","/events",1,"menu-mobile__li"],["routerLinkActive","active","routerLink","/news",1,"menu-mobile__li"],["routerLinkActive","active","routerLink","/aboutus",1,"menu-mobile__li"],[1,"menu-mobile-btn",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"aside"),a.TgZ(2,"div",1),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a._UZ(5,"b"),a.O4$(),a.TgZ(6,"svg",4),a._UZ(7,"path",5),a._UZ(8,"path",6),a._UZ(9,"ellipse",7),a._UZ(10,"ellipse",8),a._UZ(11,"ellipse",9),a._UZ(12,"rect",10),a._UZ(13,"rect",11),a.qZA(),a.kcU(),a.TgZ(14,"div",12),a.TgZ(15,"h3"),a._uU(16,"in"),a.qZA(),a.TgZ(17,"h3",13),a._uU(18,"IT"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"div",14),a._UZ(20,"b"),a.TgZ(21,"span"),a._UZ(22,"img",15),a.qZA(),a._uU(23,"COURSES"),a.qZA(),a.TgZ(24,"div",16),a._UZ(25,"b"),a.TgZ(26,"span"),a._UZ(27,"img",17),a.qZA(),a._uU(28,"WORK"),a.qZA(),a.TgZ(29,"div",18),a._UZ(30,"b"),a.TgZ(31,"span"),a._UZ(32,"img",19),a.qZA(),a._uU(33,"EVENTS"),a.qZA(),a.TgZ(34,"div",20),a._UZ(35,"b"),a.TgZ(36,"span"),a._UZ(37,"img",21),a.qZA(),a._uU(38,"NEWS"),a.qZA(),a.TgZ(39,"div",22),a._UZ(40,"b"),a.TgZ(41,"span"),a._UZ(42,"img",23),a.qZA(),a._uU(43,"ABOUT US"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"div",24),a.TgZ(45,"div",25),a._UZ(46,"img",26),a.TgZ(47,"div",27),a._UZ(48,"b"),a._uU(49,"COURSES"),a.qZA(),a.TgZ(50,"div",28),a._UZ(51,"b"),a._uU(52,"WORK"),a.qZA(),a.TgZ(53,"div",29),a._UZ(54,"b"),a._uU(55,"EVENTS"),a.qZA(),a.TgZ(56,"div",30),a._UZ(57,"b"),a._uU(58,"NEWS"),a.qZA(),a.TgZ(59,"div",31),a._UZ(60,"b"),a._uU(61,"ABOUT US"),a.qZA(),a.TgZ(62,"button",32),a.NdJ("click",function(){return r.openMenu()}),a._UZ(63,"span"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(44),a.Tol(r.menuOpened?"active":""),a.xp6(1),a.Akn(a.VKq(6,FU,r.menuOpened?"":"none")),a.xp6(17),a.Tol(r.menuOpened?"active":""))},directives:[Nc,Eh],styles:['aside[_ngcontent-%COMP%]{padding:15px;height:100vh;position:fixed;z-index:100}.menu[_ngcontent-%COMP%]{width:94px;height:100%;background-color:#7834be;border-radius:15px;box-shadow:5px 0 #f7f6f9;transition:.3s;overflow-x:hidden}.menu[_ngcontent-%COMP%]:hover{width:300px}.menu[_ngcontent-%COMP%]:hover   .menu__li.active[_ngcontent-%COMP%]:before, .menu[_ngcontent-%COMP%]:hover   .menu__li.active[_ngcontent-%COMP%]:after, .menu[_ngcontent-%COMP%]:hover   .menu__li.active[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:after, .menu[_ngcontent-%COMP%]:hover   .menu__li.active[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:before{left:220px}.menu[_ngcontent-%COMP%]:hover   .menu__li.logo[_ngcontent-%COMP%]{width:100%}.menu[_ngcontent-%COMP%]:hover   .menu__li.logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1}.menu[_ngcontent-%COMP%]:hover   .menu__li.logo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{opacity:0}.menu__ul[_ngcontent-%COMP%]{padding-top:70px;margin:0;width:300px;display:flex;flex-direction:column}.menu__li[_ngcontent-%COMP%]{padding:20px 20px 20px 12px;margin:5px 0 5px 10px;cursor:pointer;display:flex;align-items:center;background-color:transparent;width:calc(100% - 10px);position:relative;border-radius:20px 0 0 20px;color:#f7f6f9;outline:none}.menu__li[_ngcontent-%COMP%]:focus{outline:none}.menu__li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:50px;width:50px;border-radius:50%;margin-right:25px}.menu__li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;will-change:transform;transform:scale(1.001)}.menu__li.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;width:94px;transition:.3s;font-size:30px;padding:0;margin:0 0 20px}.menu__li.logo[_ngcontent-%COMP%]   .logo__h3[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;position:absolute;left:15px}.menu__li.logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:0;width:60%;transition:.3s ease-in-out}.menu__li.logo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-weight:300;letter-spacing:1px;font-weight:600;font-size:25px;transition:.3s ease-in-out;will-change:opacity}.menu__li.logo[_ngcontent-%COMP%]   h3.it[_ngcontent-%COMP%]{line-height:38px;font-weight:900;color:#f9d065;font-size:35px}.menu__li.active[_ngcontent-%COMP%]{color:#424242;background-color:#f7f6f9}.menu__li.active[_ngcontent-%COMP%]:after, .menu__li.active[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:70px;height:15px;left:14px;transition:.3s;background-color:#7834be;z-index:1}.menu__li.active[_ngcontent-%COMP%]:before{border-bottom-right-radius:20px;top:-15px}.menu__li.active[_ngcontent-%COMP%]:after{border-top-right-radius:20px;bottom:-15px}.menu__li.active[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:after, .menu__li.active[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:70px;height:15px;left:14px;background-color:#f7f6f9;transition:.3s}.menu__li.active[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:before{top:-15px}.menu__li.active[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:after{bottom:-15px}.menu-mobile[_ngcontent-%COMP%]{width:320px;height:100vh;position:fixed;display:none;top:0;transition:.4s;z-index:100;padding:15px 0 15px 15px;left:-320px}.menu-mobile.active[_ngcontent-%COMP%]{left:0}.menu-mobile-btn[_ngcontent-%COMP%]{height:50px;width:50px;position:absolute;right:-50px;top:80px;border:none;outline:none;background-color:#7834be;border-radius:0 15px 15px 0;cursor:pointer;display:flex;align-items:center;transition:.3s}.menu-mobile-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:9px;width:22px;height:3px;background-color:#f9d065;position:relative;transition:.4s}.menu-mobile-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, .menu-mobile-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;height:3px;width:32px;background-color:#f9d065;transition:.4s}.menu-mobile-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{top:-9px}.menu-mobile-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{bottom:-9px}.menu-mobile-btn.active[_ngcontent-%COMP%]{right:10px;border-radius:0}.menu-mobile-btn.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:transparent}.menu-mobile-btn.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{top:0;transform:rotate(45deg)}.menu-mobile-btn.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{bottom:0;transform:rotate(-45deg)}.menu-mobile__ul[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#7834be;border-radius:15px;box-shadow:5px 0 #f7f6f9;display:flex;flex-direction:column;align-items:center;justify-content:center}.menu-mobile__li[_ngcontent-%COMP%]{font-size:24px;margin:15px 0;color:#f9d065;position:relative;cursor:pointer}.menu-mobile__li[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{position:absolute;bottom:-10px;width:0;left:0;height:2px;background-color:#f7f6f9;transition:.3s}.menu-mobile__li.active[_ngcontent-%COMP%]{color:#f7f6f9}.menu-mobile__li.active[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{width:100%}.menu-mobile__logo[_ngcontent-%COMP%]{will-change:transform;transform:scale(1.001);cursor:pointer;width:60%;margin-bottom:10px}@media screen and (max-width: 1024px){.menu[_ngcontent-%COMP%]{display:none}.menu-mobile[_ngcontent-%COMP%]{display:block}}']}),n})(),UU=(()=>{class n{constructor(){this.title="init_hackaton"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"pages"]],template:function(t,r){1&t&&(a._UZ(0,"app-menu"),a.TgZ(1,"div",0),a._UZ(2,"router-outlet"),a.qZA())},directives:[LU,gh],styles:["@media screen and (max-width: 1024px){.pages[_ngcontent-%COMP%]{padding:0}}"]}),n})();var VU=R(5032);const LP="@firebase/database";let Lx="";function VP(n){Lx=n}class jU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class qU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BP=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jU(e)}}catch(e){}return new qU},Tg=BP("localStorage"),Ux=BP("sessionStorage"),yy=new Ci.Yd("@firebase/database"),ZP=function(){let n=1;return function(){return n++}}(),jP=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const r=t.digest();return N.US.encodeByteArray(r)},Ow=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ow.apply(null,r):e+="object"==typeof r?(0,N.Pz)(r):r,e+=" "}return e};let Dg=null,qP=!0;const HP=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(yy.logLevel=Ci.in.VERBOSE,Dg=yy.log.bind(yy),e&&Ux.set("logging_enabled",!0)):"function"==typeof n?Dg=n:(Dg=null,Ux.remove("logging_enabled"))},Ti=function(...n){if(!0===qP&&(qP=!1,null===Dg&&!0===Ux.get("logging_enabled")&&HP(!0)),Dg){const e=Ow.apply(null,n);Dg(e)}},Pw=function(n){return function(...e){Ti(n,...e)}},Vx=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ow(...n);yy.error(e)},Wl=function(...n){const e=`FIREBASE FATAL ERROR: ${Ow(...n)}`;throw yy.error(e),new Error(e)},os=function(...n){const e="FIREBASE WARNING: "+Ow(...n);yy.warn(e)},tT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Cd="[MIN_NAME]",zl="[MAX_NAME]",Ag=function(n,e){if(n===e)return 0;if(n===Cd||e===zl)return-1;if(e===Cd||n===zl)return 1;{const t=nT(n),r=nT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},GU=function(n,e){return n===e?0:n<e?-1:1},kw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},Bx=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.Pz)(e[r]),t+=":",t+=Bx(n[e[r]]);return t+="}",t},$P=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Di(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const GP=function(n){(0,N.hu)(!tT(n),"Invalid JSON number");const r=1023;let i,u,c,p,y;0===n?(u=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const C=[];for(y=52;y;y-=1)C.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)C.push(u%2?1:0),u=Math.floor(u/2);C.push(i?1:0),C.reverse();const A=C.join("");let S="";for(y=0;y<64;y+=8){let k=parseInt(A.substr(y,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},YU=new RegExp("^-?(0*)\\d{1,10}$"),WP=-2147483648,Zx=2147483647,nT=function(n){if(YU.test(n)){const e=Number(n);if(e>=WP&&e<=Zx)return e}return null},vy=function(n){try{n()}catch(e){setTimeout(()=>{throw os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Nw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class JU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ti("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',os(e)}}let Rw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const JP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tk="websocket",nk="long_polling";class qx{constructor(e,t,r,i,u=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Tg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rk(n,e,t){let r;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===tk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nk)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function eV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Di(t,(u,c)=>{i.push(u+"="+c)}),r+i.join("&")}class tV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const Hx={},$x={};function Gx(n){const e=n.toString();return Hx[e]||(Hx[e]=new tV),Hx[e]}class rV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tf{constructor(e,t,r,i,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pw(e),this.stats_=Gx(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),rk(t,nk,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wx((...u)=>{const[c,p,y,C,A]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&JP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tf.forceAllow_=!0}static forceDisallow(){Tf.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!Tf.forceAllow_&&(Tf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.h$)(t),i=$P(r,1840);for(let u=0;u<i.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Wx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=ZP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Wx.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Ti("frame writing exception"),p.stack&&Ti(p.stack),Ti(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ti("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ti("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let iT=null;"undefined"!=typeof MozWebSocket?iT=MozWebSocket:"undefined"!=typeof WebSocket&&(iT=WebSocket);let wy=(()=>{class n{constructor(t,r,i,u,c,p,y){this.connId=t,this.applicationId=i,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pw(this.connId),this.stats_=Gx(r),this.connURL=n.connectionURL_(r,p,y,u,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,u,c){const p={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&JP.test(location.hostname)&&(p.r="f"),r&&(p.s=r),i&&(p.ls=i),u&&(p.ac=u),c&&(p.p=c),rk(t,tk,p)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tg.set("previous_websocket_failure",!0);try{let i;if((0,N.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${Lx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const p=process.env,y=0===this.connURL.indexOf("wss://")?p.HTTPS_PROXY||p.https_proxy:p.HTTP_PROXY||p.http_proxy;y&&(c.proxy={origin:y})}this.mySock=new iT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const u=i.message||i.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const u=i.message||i.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==iT&&!n.forceDisallow_}static previouslyFailed(){return Tg.isInMemoryStorage||!0===Tg.get("previous_websocket_failure")}markConnectionHealthy(){Tg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$P(r,16384);i.length>1&&this.sendString_(String(i.length));for(let u=0;u<i.length;u++)this.sendString_(i[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),ck=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Tf,wy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=wy&&wy.isAvailable();let i=r&&!wy.previouslyFailed();if(t.webSocketOnly&&(r||os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[wy];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _k{constructor(e,t,r,i,u,c,p,y,C,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=y,this.onKill_=C,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pw("c:"+this.id+":"),this.transportManager_=new ck(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Nw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=kw("t",e),r=kw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=kw("t",e),r=kw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=kw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Vx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Nw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yk{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vk{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let u=0;u<i.length;u++)if(i[u].callback===t&&(!r||r===i[u].context))return void i.splice(u,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class sT extends vk{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new sT}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function pn(){return new wn("")}function qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Df(n){return n.pieces_.length-n.pieceNum_}function Fn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new wn(n.pieces_,e)}function Kx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Fw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bk(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new wn(e,0)}function or(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new wn(t,0)}function Ht(n){return n.pieceNum_>=n.pieces_.length}function Rs(n,e){const t=qt(n),r=qt(e);if(null===t)return e;if(t===r)return Rs(Fn(n),Fn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function TV(n,e){const t=Fw(n,0),r=Fw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const u=Ag(t[i],r[i]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function Yx(n,e){if(Df(n)!==Df(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ka(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Df(n)>Df(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class DV{constructor(e,t){this.errorPrefix_=t,this.parts_=Fw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.ug)(this.parts_[r]);Ek(this)}}function Ek(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Sg(n))}function Sg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Qx extends vk{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Qx}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Lw=1e3;let aT,xg=(()=>{class n extends yk{constructor(t,r,i,u,c,p,y,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=Pw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&sT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,N.Pz)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[u]=i)}get(t){this.initConnection_();const r=new N.BH,i={p:t._path.toString(),q:t._queryObject},u={action:"g",request:i,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||u!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+i+" for "+u);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const C=y.d,A=y.s;n.warnOnListenWarnings_(C,r),(this.listens.get(i)&&this.listens.get(i).get(u))===t&&(this.log_("listen response",y),"ok"!==A&&this.removeListen_(i,u),t.onComplete&&t.onComplete(A,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const i=(0,N.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+u),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,u)&&this.connected_&&this.sendUnlisten_(i,u,t._queryObject,r)}sendUnlisten_(t,r,i,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=i,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,u){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,i,u){this.putInternal("p",t,r,i,u)}merge(t,r,i,u){this.putInternal("m",t,r,i,u)}putInternal(t,r,i,u,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Vx("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Lw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Lw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,C=null;const A=function(){C?C.close():(y=!0,u())};t.realtime_={close:A,sendRequest:function(V){(0,N.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(V)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,K]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);y?Ti("getToken() completed but was canceled"):(Ti("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=K&&K.token,C=new _k(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,u,ve=>{os(ve+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(V){t.log_("Failed to get token: "+V),y||(t.repoInfo_.nodeAdmin&&os(V),A())}}})()}interrupt(t){Ti("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ti("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Lw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>Bx(c)).join("$"):"default";const u=this.removeListen_(t,i);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const i=new wn(t).toString();let u;if(this.listens.has(i)){const c=this.listens.get(i);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else u=void 0;return u}onAuthRevoked_(t,r){Ti("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ti("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Lx.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=sT.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Gt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Gt(e,t)}}class oT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Gt(Cd,e),i=new Gt(Cd,t);return 0!==this.compare(r,i)}minPost(){return Gt.MIN}}class Dk extends oT{static get __EMPTY_NODE(){return aT}static set __EMPTY_NODE(e){aT=e}compare(e,t){return Ag(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Gt.MIN}maxPost(){return new Gt(zl,aT)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Gt(e,aT)}toString(){return".key"}}const Kl=new Dk;class uT{constructor(e,t,r,i,u=null){this.isReverse_=i,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Xx,xu=(()=>{class n{constructor(t,r,i,u,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=u?u:mo.EMPTY_NODE,this.right=null!=c?c:mo.EMPTY_NODE}copy(t,r,i,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let u=this;const c=i(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,i),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,i)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return mo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,u;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return mo.EMPTY_NODE;u=i.right.min_(),i=i.copy(u.key,u.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class mo{constructor(e,t=mo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new mo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xu.BLACK,null,null))}remove(e){return new mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new uT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new uT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new uT(this.root_,null,this.comparator_,!0,e)}}function RV(n,e){return Ag(n.name,e.name)}function Jx(n,e){return Ag(n,e)}mo.EMPTY_NODE=new class NV{copy(e,t,r,i,u){return this}insert(e,t,r){return new xu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ak=function(n){return"number"==typeof n?"number:"+GP(n):"string:"+n},Sk=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===Xx||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===Xx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xk,Mk,Ok,Cy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Sk(this.priorityNode_)}static set __childrenNodeConstructor(t){xk=t}static get __childrenNodeConstructor(){return xk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:".priority"===qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.hu)(".priority"!==i||1===Df(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ak(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?GP(this.value_):this.value_,this.lazyHash_=jP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.hu)(u>=0,"Unknown leaf type: "+r),(0,N.hu)(c>=0,"Unknown leaf type: "+i),u===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const qn=new class VV extends oT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),u=r.compareTo(i);return 0===u?Ag(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Gt.MIN}maxPost(){return new Gt(zl,new Cy("[PRIORITY-POST]",Ok))}makePost(e,t){const r=Mk(e);return new Gt(t,new Cy("[PRIORITY-POST]",r))}toString(){return".priority"}},BV=Math.log(2);class ZV{constructor(e){this.count=parseInt(Math.log(e+1)/BV,10),this.current_=this.count-1;const i=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const lT=function(n,e,t,r){n.sort(e);const i=function(y,C){const A=C-y;let S,k;if(0===A)return null;if(1===A)return S=n[y],k=t?t(S):S,new xu(k,S.node,xu.BLACK,null,null);{const V=parseInt(A/2,10)+y,K=i(y,V),ve=i(V+1,C);return S=n[V],k=t?t(S):S,new xu(k,S.node,xu.BLACK,K,ve)}},p=function(y){let C=null,A=null,S=n.length;const k=function(K,ve){const Ue=S-K,st=S;S-=K;const It=i(Ue+1,st),vt=n[Ue],wt=t?t(vt):vt;V(new xu(wt,vt.node,ve,null,It))},V=function(K){C?(C.left=K,C=K):(A=K,C=K)};for(let K=0;K<y.count;++K){const ve=y.nextBitIsOne(),Ue=Math.pow(2,y.count-(K+1));ve?k(Ue,xu.BLACK):(k(Ue,xu.BLACK),k(Ue,xu.RED))}return A}(new ZV(n.length));return new mo(r||e,p)};let e1;const by={};class bd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(by&&qn,"ChildrenNode.ts has not been loaded"),e1=e1||new bd({".priority":by},{".priority":qn}),e1}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof mo?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Kl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const u=t.getIterator(Gt.Wrap);let p,c=u.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=i?lT(r,e.getCompare()):by;const y=e.toString(),C=Object.assign({},this.indexSet_);C[y]=e;const A=Object.assign({},this.indexes_);return A[y]=p,new bd(A,C)}addToIndexes(e,t){const r=(0,N.UI)(this.indexes_,(i,u)=>{const c=(0,N.DV)(this.indexSet_,u);if((0,N.hu)(c,"Missing index implementation for "+u),i===by){if(c.isDefinedOn(e.node)){const p=[],y=t.getIterator(Gt.Wrap);let C=y.getNext();for(;C;)C.name!==e.name&&p.push(C),C=y.getNext();return p.push(e),lT(p,c.getCompare())}return by}{const p=t.get(e.name);let y=i;return p&&(y=y.remove(new Gt(e.name,p))),y.insert(e,e.node)}});return new bd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.UI)(this.indexes_,i=>{if(i===by)return i;{const u=t.get(e.name);return u?i.remove(new Gt(e.name,u)):i}});return new bd(r,this.indexSet_)}}let Uw,Ft=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Sk(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Uw||(Uw=new n(new mo(Jx),null,bd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Uw:r}}getChild(t){const r=qt(t);return null===r?this:this.getImmediateChild(r).getChild(Fn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Gt(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=u.isEmpty()?Uw:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const i=qt(t);if(null===i)return r;{(0,N.hu)(".priority"!==qt(t)||1===Df(t),".priority must be the last token in a path");const u=this.getImmediateChild(i).updateChild(Fn(t),r);return this.updateImmediateChild(i,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,u=0,c=!0;if(this.forEachChild(qn,(p,y)=>{r[p]=y.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*i){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ak(this.getPriority().val())+":"),this.forEachChild(qn,(r,i)=>{const u=i.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":jP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const u=this.resolveIndex_(i);if(u){const c=u.getPredecessorKey(new Gt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Gt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Gt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Gt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Gt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vw?-1:0}withIndex(t){if(t===Kl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Kl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(qn),u=r.getIterator(qn);let c=i.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===Kl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Vw=new class jV extends Ft{constructor(){super(new mo(Jx),Ft.EMPTY_NODE,bd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ft.EMPTY_NODE}isEmpty(){return!1}};function mr(n,e=null){if(null===n)return Ft.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Cy(n,mr(e));if(n instanceof Array){let t=Ft.EMPTY_NODE;return Di(n,(r,i)=>{if((0,N.r3)(n,r)&&"."!==r.substring(0,1)){const u=mr(i);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(mr(e))}{const t=[];let r=!1;if(Di(n,(c,p)=>{if("."!==c.substring(0,1)){const y=mr(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Gt(c,y)))}}),0===t.length)return Ft.EMPTY_NODE;const u=lT(t,RV,c=>c.name,Jx);if(r){const c=lT(t,qn.getCompare());return new Ft(u,mr(e),new bd({".priority":c},{".priority":qn}))}return new Ft(u,mr(e),bd.Default)}}Object.defineProperties(Gt,{MIN:{value:new Gt(Cd,Ft.EMPTY_NODE)},MAX:{value:new Gt(zl,Vw)}}),Dk.__EMPTY_NODE=Ft.EMPTY_NODE,Cy.__childrenNodeConstructor=Ft,function FV(n){Xx=n}(Vw),function UV(n){Ok=n}(Vw),function LV(n){Mk=n}(mr);class t1 extends oT{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!Ht(e)&&".priority"!==qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),u=r.compareTo(i);return 0===u?Ag(e.name,t.name):u}makePost(e,t){const r=mr(e),i=Ft.EMPTY_NODE.updateChild(this.indexPath_,r);return new Gt(t,i)}maxPost(){const e=Ft.EMPTY_NODE.updateChild(this.indexPath_,Vw);return new Gt(zl,e)}toString(){return Fw(this.indexPath_,0).join("/")}}const n1=new class HV extends oT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ag(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Gt.MIN}maxPost(){return Gt.MAX}makePost(e,t){const r=mr(e);return new Gt(t,r)}toString(){return".value"}},Ey="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$V=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const u=new Array(8);for(i=7;i>=0;i--)u[i]=Ey.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Ey.charAt(e[i]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),Nk=function(n){if(n===""+Zx)return"-";const e=nT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return zl;const u=Ey.charAt(Ey.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},Rk=function(n){if(n===""+WP)return Cd;const e=nT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Zx:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ey.charAt(Ey.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Fk(n){return{type:"value",snapshotNode:n}}function Iy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Bw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Zw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class i1{constructor(e){this.index_=e}updateChild(e,t,r,i,u,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Bw(t,p)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Iy(t,r)):c.trackChildChange(Zw(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(qn,(i,u)=>{t.hasChild(i)||r.trackChildChange(Bw(i,u))}),t.isLeafNode()||t.forEachChild(qn,(i,u)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(u)||r.trackChildChange(Zw(i,u,c))}else r.trackChildChange(Iy(i,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ft.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class jw{constructor(e){this.indexedFilter_=new i1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=jw.getStartPost_(e),this.endPost_=jw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,u,c){return this.matches(new Gt(t,r))||(r=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ft.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ft.EMPTY_NODE);const u=this;return t.forEachChild(qn,(c,p)=>{u.matches(new Gt(c,p))||(i=i.updateImmediateChild(c,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class WV{constructor(e){this.rangedFilter_=new jw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,u,c){return this.rangedFilter_.matches(new Gt(t,r))||(r=Ft.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;i=Ft.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let u,c,p,y;if(i=t.withIndex(this.index_),i=i.updatePriority(Ft.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(k,V)=>S(V,k)}else y=i.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let C=0,A=!1;for(;y.hasNext();){const S=y.getNext();!A&&p(u,S)<=0&&(A=!0),A&&C<this.limit_&&p(S,c)<=0?C++:i=i.updateImmediateChild(S.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,u){let c;if(this.reverse_){const S=this.index_.getCompare();c=(k,V)=>S(V,k)}else c=this.index_.getCompare();const p=e;(0,N.hu)(p.numChildren()===this.limit_,"");const y=new Gt(t,r),C=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),A=this.rangedFilter_.matches(y);if(p.hasChild(t)){const S=p.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=k&&(k.name===t||p.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const V=null==k?1:c(k,y);if(A&&!r.isEmpty()&&V>=0)return null!=u&&u.trackChildChange(Zw(t,r,S)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(Bw(t,S));const ve=p.updateImmediateChild(t,Ft.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=u&&u.trackChildChange(Iy(k.name,k.node)),ve.updateImmediateChild(k.name,k.node)):ve}}return r.isEmpty()?e:A&&c(C,y)>=0?(null!=u&&(u.trackChildChange(Bw(C.name,C.node)),u.trackChildChange(Iy(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(C.name,Ft.EMPTY_NODE)):e}}class cT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qn}copy(){const e=new cT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function s1(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function o1(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function dT(n,e){const t=n.copy();return t.index_=e,t}function Lk(n){const e={};if(n.isDefault())return e;let t;return n.index_===qn?t="$priority":n.index_===n1?t="$value":n.index_===Kl?t="$key":((0,N.hu)(n.index_ instanceof t1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Uk(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==qn&&(e.i=n.index_.toString()),e}class hT extends yk{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Pw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=hT.getListenId_(e,r),p={};this.listens_[c]=p;const y=Lk(e._queryParams);this.restRequest_(u+".json",y,(C,A)=>{let S=A;if(404===C&&(S=null,C=null),null===C&&this.onDataUpdate_(u,S,!1,r),(0,N.DV)(this.listens_,c)===p){let k;k=C?401===C?"permission_denied":"rest_error:"+C:"ok",i(k,null)}})}unlisten(e,t){const r=hT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Lk(e._queryParams),r=e._path.toString(),i=new N.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,u])=>{i&&i.accessToken&&(t.auth=i.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,N.cI)(p.responseText)}catch(C){os("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&os("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class XV{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function fT(){return{value:null,children:new Map}}function Ty(n,e,t){if(Ht(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=qt(e);n.children.has(r)||n.children.set(r,fT()),Ty(n.children.get(r),e=Fn(e),t)}}function a1(n,e){if(Ht(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(qn,(r,i)=>{Ty(n,new wn(r),i)}),a1(n,e)}}if(n.children.size>0){const t=qt(e);return e=Fn(e),n.children.has(t)&&a1(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function u1(n,e,t){null!==n.value?t(e,n.value):function e3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{u1(i,new wn(e.toString()+"/"+r),t)})}class t3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Di(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class i3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new t3(e);const r=1e4+2e4*Math.random();Nw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Di(e,(i,u)=>{u>0&&(0,N.r3)(this.statsToReport_,i)&&(t[i]=u,r=!0)}),r&&this.server_.reportStats(t),Nw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Na=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Na||(Na={})),Na))();function d1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class pT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Na.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ht(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new wn(e));return new pT(pn(),t,this.revert)}}return(0,N.hu)(qt(this.path)===e,"operationForChild called for unrelated child."),new pT(Fn(this.path),this.affectedTree,this.revert)}}class qw{constructor(e,t){this.source=e,this.path=t,this.type=Na.LISTEN_COMPLETE}operationForChild(e){return Ht(this.path)?new qw(this.source,pn()):new qw(this.source,Fn(this.path))}}class Mg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Na.OVERWRITE}operationForChild(e){return Ht(this.path)?new Mg(this.source,pn(),this.snap.getImmediateChild(e)):new Mg(this.source,Fn(this.path),this.snap)}}class Dy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Na.MERGE}operationForChild(e){if(Ht(this.path)){const t=this.children.subtree(new wn(e));return t.isEmpty()?null:t.value?new Mg(this.source,pn(),t.value):new Dy(this.source,pn(),t)}return(0,N.hu)(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Dy(this.source,Fn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Af{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const t=qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class s3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Hw(n,e,t,r,i,u){const c=r.filter(p=>p.type===t);c.sort((p,y)=>function u3(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const r=new Gt(e.childName,e.snapshotNode),i=new Gt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,y)),c.forEach(p=>{const y=function a3(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);i.forEach(C=>{C.respondsTo(p.type)&&e.push(C.createEvent(y,n.query_))})})}function gT(n,e){return{eventCache:n,serverCache:e}}function $w(n,e,t,r){return gT(new Af(e,t,r),n.serverCache)}function Bk(n,e,t,r){return gT(n.eventCache,new Af(e,t,r))}function mT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Og(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let h1;class Hn{constructor(e,t=(()=>(h1||(h1=new mo(GU)),h1))()){this.value=e,this.children=t}static fromObject(e){let t=new Hn(null);return Di(e,(r,i)=>{t=t.set(new wn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:pn(),value:this.value};if(Ht(e))return null;{const r=qt(e),i=this.children.get(r);if(null!==i){const u=i.findRootMostMatchingPathAndValue(Fn(e),t);return null!=u?{path:or(new wn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const t=qt(e),r=this.children.get(t);return null!==r?r.subtree(Fn(e)):new Hn(null)}}set(e,t){if(Ht(e))return new Hn(t,this.children);{const r=qt(e),u=(this.children.get(r)||new Hn(null)).set(Fn(e),t),c=this.children.insert(r,u);return new Hn(this.value,c)}}remove(e){if(Ht(e))return this.children.isEmpty()?new Hn(null):new Hn(null,this.children);{const t=qt(e),r=this.children.get(t);if(r){const i=r.remove(Fn(e));let u;return u=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&u.isEmpty()?new Hn(null):new Hn(this.value,u)}return this}}get(e){if(Ht(e))return this.value;{const t=qt(e),r=this.children.get(t);return r?r.get(Fn(e)):null}}setTree(e,t){if(Ht(e))return t;{const r=qt(e),u=(this.children.get(r)||new Hn(null)).setTree(Fn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Hn(this.value,c)}}fold(e){return this.fold_(pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,u)=>{r[i]=u.fold_(or(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ht(e))return null;{const u=qt(e),c=this.children.get(u);return c?c.findOnPath_(Fn(e),or(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pn(),t)}foreachOnPath_(e,t,r){if(Ht(e))return this;{this.value&&r(t,this.value);const i=qt(e),u=this.children.get(i);return u?u.foreachOnPath_(Fn(e),or(t,i),r):new Hn(null)}}foreach(e){this.foreach_(pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(or(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Mu{constructor(e){this.writeTree_=e}static empty(){return new Mu(new Hn(null))}}function Gw(n,e,t){if(Ht(e))return new Mu(new Hn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let u=r.value;const c=Rs(i,e);return u=u.updateChild(c,t),new Mu(n.writeTree_.set(i,u))}{const i=new Hn(t),u=n.writeTree_.setTree(e,i);return new Mu(u)}}}function f1(n,e,t){let r=n;return Di(t,(i,u)=>{r=Gw(r,or(e,i),u)}),r}function Zk(n,e){if(Ht(e))return Mu.empty();{const t=n.writeTree_.setTree(e,new Hn(null));return new Mu(t)}}function p1(n,e){return null!=Pg(n,e)}function Pg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Rs(t.path,e)):null}function jk(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(qn,(r,i)=>{e.push(new Gt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Gt(r,i.value))}),e}function Sf(n,e){if(Ht(e))return n;{const t=Pg(n,e);return new Mu(null!=t?new Hn(t):n.writeTree_.subtree(e))}}function g1(n){return n.writeTree_.isEmpty()}function Ay(n,e){return qk(pn(),n.writeTree_,e)}function qk(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,u)=>{".priority"===i?((0,N.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=qk(or(n,i),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(or(n,".priority"),r)),t}}function _T(n,e){return zk(e,n)}function p3(n,e){if(n.snap)return ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ka(or(n.path,t),e))return!0;return!1}function m3(n){return n.visible}function Hk(n,e,t){let r=Mu.empty();for(let i=0;i<n.length;++i){const u=n[i];if(e(u)){const c=u.path;let p;if(u.snap)ka(t,c)?(p=Rs(t,c),r=Gw(r,p,u.snap)):ka(c,t)&&(p=Rs(c,t),r=Gw(r,pn(),u.snap.getChild(p)));else{if(!u.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(ka(t,c))p=Rs(t,c),r=f1(r,p,u.children);else if(ka(c,t))if(p=Rs(c,t),Ht(p))r=f1(r,pn(),u.children);else{const y=(0,N.DV)(u.children,qt(p));if(y){const C=y.getChild(Fn(p));r=Gw(r,pn(),C)}}}}}return r}function $k(n,e,t,r,i){if(r||i){const u=Sf(n.visibleWrites,e);return!i&&g1(u)?t:i||null!=t||p1(u,pn())?Ay(Hk(n.allWrites,function(C){return(C.visible||i)&&(!r||!~r.indexOf(C.writeId))&&(ka(C.path,e)||ka(e,C.path))},e),t||Ft.EMPTY_NODE):null}{const u=Pg(n.visibleWrites,e);if(null!=u)return u;{const c=Sf(n.visibleWrites,e);return g1(c)?t:null!=t||p1(c,pn())?Ay(c,t||Ft.EMPTY_NODE):null}}}function yT(n,e,t,r){return $k(n.writeTree,n.treePath,e,t,r)}function m1(n,e){return function _3(n,e,t){let r=Ft.EMPTY_NODE;const i=Pg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(qn,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Sf(n.visibleWrites,e);return t.forEachChild(qn,(c,p)=>{const y=Ay(Sf(u,new wn(c)),p);r=r.updateImmediateChild(c,y)}),jk(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return jk(Sf(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function Gk(n,e,t,r){return function y3(n,e,t,r,i){(0,N.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const u=or(e,t);if(p1(n.visibleWrites,u))return null;{const c=Sf(n.visibleWrites,u);return g1(c)?i.getChild(t):Ay(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function vT(n,e){return function w3(n,e){return Pg(n.visibleWrites,e)}(n.writeTree,or(n.treePath,e))}function _1(n,e,t){return function v3(n,e,t,r){const i=or(e,t),u=Pg(n.visibleWrites,i);return null!=u?u:r.isCompleteForChild(t)?Ay(Sf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Wk(n,e){return zk(or(n.treePath,e),n.writeTree)}function zk(n,e){return{treePath:n,writeTree:e}}class I3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const u=i.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,Zw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,Bw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,Iy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Zw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Kk=new class T3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class y1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Af(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Og(this.viewCache_),u=function E3(n,e,t,r,i,u){return function C3(n,e,t,r,i,u,c){let p;const y=Sf(n.visibleWrites,e),C=Pg(y,pn());if(null!=C)p=C;else{if(null==t)return[];p=Ay(y,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const A=[],S=c.getCompare(),k=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let V=k.getNext();for(;V&&A.length<i;)0!==S(V,r)&&A.push(V),V=k.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,u)}(this.writes_,i,t,1,r,e);return 0===u.length?null:u[0]}}function Yk(n,e,t,r,i,u){const c=e.eventCache;if(null!=vT(r,t))return e;{let p,y;if(Ht(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=Og(e),S=m1(r,C instanceof Ft?C:Ft.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,u)}else{const C=yT(r,Og(e));p=n.filter.updateFullNode(e.eventCache.getNode(),C,u)}else{const C=qt(t);if(".priority"===C){(0,N.hu)(1===Df(t),"Can't have a priority with additional path components");const A=c.getNode();y=e.serverCache.getNode();const S=Gk(r,t,A,y);p=null!=S?n.filter.updatePriority(A,S):c.getNode()}else{const A=Fn(t);let S;if(c.isCompleteForChild(C)){y=e.serverCache.getNode();const k=Gk(r,t,c.getNode(),y);S=null!=k?c.getNode().getImmediateChild(C).updateChild(A,k):c.getNode().getImmediateChild(C)}else S=_1(r,C,e.serverCache);p=null!=S?n.filter.updateChild(c.getNode(),C,S,A,i,u):c.getNode()}}return $w(e,p,c.isFullyInitialized()||Ht(t),n.filter.filtersNodes())}}function wT(n,e,t,r,i,u,c,p){const y=e.serverCache;let C;const A=c?n.filter:n.filter.getIndexedFilter();if(Ht(t))C=A.updateFullNode(y.getNode(),r,null);else if(A.filtersNodes()&&!y.isFiltered()){const V=y.getNode().updateChild(t,r);C=A.updateFullNode(y.getNode(),V,null)}else{const V=qt(t);if(!y.isCompleteForPath(t)&&Df(t)>1)return e;const K=Fn(t),Ue=y.getNode().getImmediateChild(V).updateChild(K,r);C=".priority"===V?A.updatePriority(y.getNode(),Ue):A.updateChild(y.getNode(),V,Ue,K,Kk,null)}const S=Bk(e,C,y.isFullyInitialized()||Ht(t),A.filtersNodes());return Yk(n,S,t,i,new y1(i,S,u),p)}function v1(n,e,t,r,i,u,c){const p=e.eventCache;let y,C;const A=new y1(i,e,u);if(Ht(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=$w(e,C,!0,n.filter.filtersNodes());else{const S=qt(t);if(".priority"===S)C=n.filter.updatePriority(e.eventCache.getNode(),r),y=$w(e,C,p.isFullyInitialized(),p.isFiltered());else{const k=Fn(t),V=p.getNode().getImmediateChild(S);let K;if(Ht(k))K=r;else{const ve=A.getCompleteChild(S);K=null!=ve?".priority"===Kx(k)&&ve.getChild(bk(k)).isEmpty()?ve:ve.updateChild(k,r):Ft.EMPTY_NODE}y=V.equals(K)?e:$w(e,n.filter.updateChild(p.getNode(),S,K,k,A,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function Qk(n,e){return n.eventCache.isCompleteForChild(e)}function Jk(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function w1(n,e,t,r,i,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,y=e;C=Ht(t)?r:new Hn(null).setTree(t,r);const A=e.serverCache.getNode();return C.children.inorderTraversal((S,k)=>{if(A.hasChild(S)){const K=Jk(0,e.serverCache.getNode().getImmediateChild(S),k);y=wT(n,y,new wn(S),K,i,u,c,p)}}),C.children.inorderTraversal((S,k)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===k.value;if(!A.hasChild(S)&&!V){const ve=Jk(0,e.serverCache.getNode().getImmediateChild(S),k);y=wT(n,y,new wn(S),ve,i,u,c,p)}}),y}class N3{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new i1(r.getIndex()),u=function zV(n){return n.loadsAllData()?new i1(n.getIndex()):n.hasLimit()?new WV(n):new jw(n)}(r);this.processor_=function D3(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,y=i.updateFullNode(Ft.EMPTY_NODE,c.getNode(),null),C=u.updateFullNode(Ft.EMPTY_NODE,p.getNode(),null),A=new Af(y,c.isFullyInitialized(),i.filtersNodes()),S=new Af(C,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=gT(S,A),this.eventGenerator_=new s3(this.query_)}get query(){return this.query_}}function L3(n,e){const t=Og(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ht(e)&&!t.getImmediateChild(qt(e)).isEmpty())?t.getChild(e):null}function Xk(n){return 0===n.eventRegistrations_.length}function eN(n,e,t){const r=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(u+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function tN(n,e,t,r){e.type===Na.MERGE&&null!==e.source.queryId&&((0,N.hu)(Og(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(mT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,u=function S3(n,e,t,r,i){const u=new I3;let c,p;if(t.type===Na.OVERWRITE){const C=t;C.source.fromUser?c=v1(n,e,C.path,C.snap,r,i,u):((0,N.hu)(C.source.fromServer,"Unknown source."),p=C.source.tagged||e.serverCache.isFiltered()&&!Ht(C.path),c=wT(n,e,C.path,C.snap,r,i,p,u))}else if(t.type===Na.MERGE){const C=t;C.source.fromUser?c=function M3(n,e,t,r,i,u,c){let p=e;return r.foreach((y,C)=>{const A=or(t,y);Qk(e,qt(A))&&(p=v1(n,p,A,C,i,u,c))}),r.foreach((y,C)=>{const A=or(t,y);Qk(e,qt(A))||(p=v1(n,p,A,C,i,u,c))}),p}(n,e,C.path,C.children,r,i,u):((0,N.hu)(C.source.fromServer,"Unknown source."),p=C.source.tagged||e.serverCache.isFiltered(),c=w1(n,e,C.path,C.children,r,i,p,u))}else if(t.type===Na.ACK_USER_WRITE){const C=t;c=C.revert?function k3(n,e,t,r,i,u){let c;if(null!=vT(r,t))return e;{const p=new y1(r,e,i),y=e.eventCache.getNode();let C;if(Ht(t)||".priority"===qt(t)){let A;if(e.serverCache.isFullyInitialized())A=yT(r,Og(e));else{const S=e.serverCache.getNode();(0,N.hu)(S instanceof Ft,"serverChildren would be complete if leaf node"),A=m1(r,S)}A=A,C=n.filter.updateFullNode(y,A,u)}else{const A=qt(t);let S=_1(r,A,e.serverCache);null==S&&e.serverCache.isCompleteForChild(A)&&(S=y.getImmediateChild(A)),C=null!=S?n.filter.updateChild(y,A,S,Fn(t),p,u):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(y,A,Ft.EMPTY_NODE,Fn(t),p,u):y,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=yT(r,Og(e)),c.isLeafNode()&&(C=n.filter.updateFullNode(C,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=vT(r,pn()),$w(e,C,c,n.filter.filtersNodes())}}(n,e,C.path,r,i,u):function O3(n,e,t,r,i,u,c){if(null!=vT(i,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Ht(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return wT(n,e,t,y.getNode().getChild(t),i,u,p,c);if(Ht(t)){let C=new Hn(null);return y.getNode().forEachChild(Kl,(A,S)=>{C=C.set(new wn(A),S)}),w1(n,e,t,C,i,u,p,c)}return e}{let C=new Hn(null);return r.foreach((A,S)=>{const k=or(t,A);y.isCompleteForPath(k)&&(C=C.set(A,y.getNode().getChild(k)))}),w1(n,e,t,C,i,u,p,c)}}(n,e,C.path,C.affectedTree,r,i,u)}else{if(t.type!==Na.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function P3(n,e,t,r,i){const u=e.serverCache;return Yk(n,Bk(e,u.getNode(),u.isFullyInitialized()||Ht(t),u.isFiltered()),t,r,Kk,i)}(n,e,t.path,r,u)}const y=u.getChanges();return function x3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=mT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(Fk(mT(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,i,e,t,r);return function A3(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,N.hu)(u.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,nN(n,u.changes,u.viewCache.eventCache.getNode(),null)}function nN(n,e,t,r){return function o3(n,e,t,r){const i=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function GV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Hw(n,i,"child_removed",e,r,t),Hw(n,i,"child_added",e,r,t),Hw(n,i,"child_moved",u,r,t),Hw(n,i,"child_changed",e,r,t),Hw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let CT,ET;class rN{constructor(){this.views=new Map}}function C1(n,e,t,r){const i=e.source.queryId;if(null!==i){const u=n.views.get(i);return(0,N.hu)(null!=u,"SyncTree gave us an op for an invalid query."),tN(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(tN(c,e,t,r));return u}}function iN(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=yT(t,i?r:null),y=!1;p?y=!0:r instanceof Ft?(p=m1(t,r),y=!1):(p=Ft.EMPTY_NODE,y=!1);const C=gT(new Af(p,y,!1),new Af(r,i,!1));return new N3(e,C)}return c}function sN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function xf(n,e){let t=null;for(const r of n.views.values())t=t||L3(r,e);return t}function oN(n,e){return e._queryParams.loadsAllData()?bT(n):n.views.get(e._queryIdentifier)}function aN(n,e){return null!=oN(n,e)}function Mf(n){return null!=bT(n)}function bT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let W3=1;class uN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Hn(null),this.pendingWriteTree_=function b3(){return{visibleWrites:Mu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function b1(n,e,t,r,i){return function c3(n,e,t,r,i){(0,N.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Gw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Sy(n,new Mg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Of(n,e,t=!1){const r=function h3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function f3(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,u=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&p3(p,r.path)?i=!1:ka(r.path,p.path)&&(u=!0)),c--}return!!i&&(u?(function g3(n){n.visibleWrites=Hk(n.allWrites,m3,pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Zk(n.visibleWrites,r.path):Di(r.children,y=>{n.visibleWrites=Zk(n.visibleWrites,or(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new Hn(null);return null!=r.snap?u=u.set(pn(),!0):Di(r.children,c=>{u=u.set(new wn(c),!0)}),Sy(n,new pT(r.path,u,t))}return[]}function Ww(n,e,t){return Sy(n,new Mg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function E1(n,e,t,r){const i=e._path,u=n.syncPointTree_.get(i);let c=[];if(u&&("default"===e._queryIdentifier||aN(u,e))){const p=function H3(n,e,t,r){const i=e._queryIdentifier,u=[];let c=[];const p=Mf(n);if("default"===i)for(const[y,C]of n.views.entries())c=c.concat(eN(C,t,r)),Xk(C)&&(n.views.delete(y),C.query._queryParams.loadsAllData()||u.push(C.query));else{const y=n.views.get(i);y&&(c=c.concat(eN(y,t,r)),Xk(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||u.push(y.query)))}return p&&!Mf(n)&&u.push(new(function Z3(){return(0,N.hu)(CT,"Reference.ts has not been loaded"),CT}())(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function j3(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const y=p.removed;c=p.events;const C=-1!==y.findIndex(S=>S._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(i,(S,k)=>Mf(k));if(C&&!A){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const k=function tB(n){return n.fold((e,t,r)=>{if(t&&Mf(t))return[bT(t)];{let i=[];return t&&(i=sN(t)),Di(r,(u,c)=>{i=i.concat(c)}),i}})}(S);for(let V=0;V<k.length;++V){const K=k[V],ve=K.query,Ue=hN(n,K);n.listenProvider_.startListening(zw(ve),TT(n,ve),Ue.hashFn,Ue.onComplete)}}}if(!A&&y.length>0&&!r)if(C){const S=null;n.listenProvider_.stopListening(zw(e),S)}else y.forEach(S=>{const k=n.queryToTagMap.get(DT(S));n.listenProvider_.stopListening(zw(S),k)});!function nB(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=DT(r),u=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(u)}}}(n,y)}return c}function lN(n,e,t){const r=e._path;let i=null,u=!1;n.syncPointTree_.foreachOnPath(r,(S,k)=>{const V=Rs(S,r);i=i||xf(k,V),u=u||Mf(k)});let p,c=n.syncPointTree_.get(r);c?(u=u||Mf(c),i=i||xf(c,pn())):(c=new rN,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?p=!0:(p=!1,i=Ft.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((k,V)=>{const K=xf(V,pn());K&&(i=i.updateImmediateChild(k,K))}));const y=aN(c,e);if(!y&&!e._queryParams.loadsAllData()){const S=DT(e);(0,N.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const k=function rB(){return W3++}();n.queryToTagMap.set(S,k),n.tagToQueryMap.set(k,S)}let A=function q3(n,e,t,r,i,u){const c=iN(n,e,r,i,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function U3(n,e){n.eventRegistrations_.push(e)}(c,t),function V3(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(qn,(u,c)=>{r.push(Iy(u,c))}),t.isFullyInitialized()&&r.push(Fk(t.getNode())),nN(n,r,t.getNode(),e)}(c,t)}(c,e,t,_T(n.pendingWriteTree_,r),i,p);if(!y&&!u){const S=oN(c,e);A=A.concat(function iB(n,e,t){const r=e._path,i=TT(n,e),u=hN(n,t),c=n.listenProvider_.startListening(zw(e),i,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,N.hu)(!Mf(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((C,A,S)=>{if(!Ht(C)&&A&&Mf(A))return[bT(A).query];{let k=[];return A&&(k=k.concat(sN(A).map(V=>V.query))),Di(S,(V,K)=>{k=k.concat(K)}),k}});for(let C=0;C<y.length;++C){const A=y[C];n.listenProvider_.stopListening(zw(A),TT(n,A))}}return c}(n,e,S))}return A}function IT(n,e,t){const i=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const C=xf(p,Rs(c,e));if(C)return C});return $k(i,e,u,t,!0)}function Sy(n,e){return cN(e,n.syncPointTree_,null,_T(n.pendingWriteTree_,pn()))}function cN(n,e,t,r){if(Ht(n.path))return dN(n,e,t,r);{const i=e.get(pn());null==t&&null!=i&&(t=xf(i,pn()));let u=[];const c=qt(n.path),p=n.operationForChild(c),y=e.children.get(c);if(y&&p){const C=t?t.getImmediateChild(c):null,A=Wk(r,c);u=u.concat(cN(p,y,C,A))}return i&&(u=u.concat(C1(i,n,r,t))),u}}function dN(n,e,t,r){const i=e.get(pn());null==t&&null!=i&&(t=xf(i,pn()));let u=[];return e.children.inorderTraversal((c,p)=>{const y=t?t.getImmediateChild(c):null,C=Wk(r,c),A=n.operationForChild(c);A&&(u=u.concat(dN(A,p,y,C)))}),i&&(u=u.concat(C1(i,n,r,t))),u}function hN(n,e){const t=e.query,r=TT(n,t);return{hashFn:()=>(function R3(n){return n.viewCache_.serverCache.getNode()}(e)||Ft.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Q3(n,e,t){const r=I1(n,t);if(r){const i=T1(r),u=i.path,c=i.queryId,p=Rs(u,e);return D1(n,u,new qw(d1(c),p))}return[]}(n,t._path,r):function Y3(n,e){return Sy(n,new qw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function KU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return E1(n,t,null,u)}}}}function TT(n,e){const t=DT(e);return n.queryToTagMap.get(t)}function DT(n){return n._path.toString()+"$"+n._queryIdentifier}function I1(n,e){return n.tagToQueryMap.get(e)}function T1(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new wn(n.substr(0,e))}}function D1(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.hu)(r,"Missing sync point for query tag that we're tracking"),C1(r,t,_T(n.pendingWriteTree_,e),null)}function zw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function G3(){return(0,N.hu)(ET,"Reference.ts has not been loaded"),ET}())(n._repo,n._path):n}class A1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new A1(t)}node(){return this.node_}}class S1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=or(this.path_,e);return new S1(this.syncTree_,t)}node(){return IT(this.syncTree_,this.path_)}}const fN=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?oB(n[".sv"],e,t):"object"==typeof n[".sv"]?aB(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},oB=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},aB=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},pN=function(n,e,t,r){return M1(e,new S1(t,n),r)},x1=function(n,e,t){return M1(n,new A1(e),t)};function M1(n,e,t){const r=n.getPriority().val(),i=fN(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=fN(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new Cy(p,mr(i)):n}{const c=n;return u=c,i!==c.getPriority().val()&&(u=u.updatePriority(new Cy(i))),c.forEachChild(qn,(p,y)=>{const C=M1(y,e.getImmediateChild(p),t);C!==y&&(u=u.updateImmediateChild(p,C))}),u}}class O1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function AT(n,e){let t=e instanceof wn?e:new wn(e),r=n,i=qt(t);for(;null!==i;){const u=(0,N.DV)(r.node.children,i)||{children:{},childCount:0};r=new O1(i,r,u),t=Fn(t),i=qt(t)}return r}function kg(n){return n.node.value}function P1(n,e){n.node.value=e,k1(n)}function gN(n){return n.node.childCount>0}function ST(n,e){Di(n.node.children,(t,r)=>{e(new O1(t,n,r))})}function mN(n,e,t,r){t&&!r&&e(n),ST(n,i=>{mN(i,e,!0,r)}),t&&r&&e(n)}function Kw(n){return new wn(null===n.parent?n.name:Kw(n.parent)+"/"+n.name)}function k1(n){null!==n.parent&&function cB(n,e,t){const r=function uB(n){return void 0===kg(n)&&!gN(n)}(t),i=(0,N.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,k1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,k1(n))}(n.parent,n.name,n)}const dB=/[\[\].#$\/\u0000-\u001F\u007F]/,hB=/[\[\].#$\u0000-\u001F\u007F]/,N1=10485760,xT=function(n){return"string"==typeof n&&0!==n.length&&!dB.test(n)},_N=function(n){return"string"==typeof n&&0!==n.length&&!hB.test(n)},Yw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!tT(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},Yl=function(n,e,t,r){r&&void 0===e||Qw((0,N.gK)(n,"value"),e,t)},Qw=function(n,e,t){const r=t instanceof wn?new DV(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Sg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Sg(r)+" with contents = "+e.toString());if(tT(e))throw new Error(n+"contains "+e.toString()+" "+Sg(r));if("string"==typeof e&&e.length>N1/3&&(0,N.ug)(e)>N1)throw new Error(n+"contains a string greater than "+N1+" utf8 bytes "+Sg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,u=!1;if(Di(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!xT(c)))throw new Error(n+" contains an invalid key ("+c+") "+Sg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function AV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),Ek(n)})(r,c),Qw(n,p,r),function SV(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&u)throw new Error(n+' contains ".value" child '+Sg(r)+" in addition to actual children.")}},yN=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const u=[];Di(e,(c,p)=>{const y=new wn(c);if(Qw(i,p,or(t,y)),".priority"===Kx(y)&&!Yw(p))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=Fw(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!xT(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(TV);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ka(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,u)},R1=function(n,e,t){if(!t||void 0!==e){if(tT(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Yw(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Jw=function(n,e,t,r){if(!(r&&void 0===t||xT(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Xw=function(n,e,t,r){if(!(r&&void 0===t||_N(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ra=function(n,e){if(".info"===qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},vN=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!xT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_N(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class mB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function MT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],u=i.getPath();null!==t&&!Yx(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(i)}t&&n.eventLists_.push(t)}function F1(n,e,t){MT(n,t),wN(n,r=>Yx(r,e))}function Fa(n,e,t){MT(n,t),wN(n,r=>ka(r,e)||ka(e,r))}function wN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(_B(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function _B(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Dg&&Ti("event: "+t.toString()),vy(r)}}}const CN="repo_interrupt";class vB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fT(),this.transactionQueueTree_=new O1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bN(n){const t=n.infoData_.getNode(new wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function eC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:bN(n)})}function EN(n,e,t,r,i){n.dataUpdateCount++;const u=new wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const y=(0,N.UI)(t,C=>mr(C));c=function X3(n,e,t,r){const i=I1(n,r);if(i){const u=T1(i),c=u.path,p=u.queryId,y=Rs(c,e),C=Hn.fromObject(t);return D1(n,c,new Dy(d1(p),y,C))}return[]}(n.serverSyncTree_,u,y,i)}else{const y=mr(t);c=function J3(n,e,t,r){const i=I1(n,r);if(null!=i){const u=T1(i),c=u.path,p=u.queryId,y=Rs(c,e);return D1(n,c,new Mg(d1(p),y,t))}return[]}(n.serverSyncTree_,u,y,i)}else if(r){const y=(0,N.UI)(t,C=>mr(C));c=function K3(n,e,t){const r=Hn.fromObject(t);return Sy(n,new Dy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=mr(t);c=Ww(n.serverSyncTree_,u,y)}let p=u;c.length>0&&(p=My(n,u)),Fa(n.eventQueue_,p,c)}function IN(n,e){L1(n,"connected",e),!1===e&&function IB(n){xy(n,"onDisconnectEvents");const e=eC(n),t=fT();u1(n.onDisconnect_,pn(),(i,u)=>{const c=pN(i,u,n.serverSyncTree_,e);Ty(t,i,c)});let r=[];u1(t,pn(),(i,u)=>{r=r.concat(Ww(n.serverSyncTree_,i,u));const c=Z1(n,i);My(n,c)}),n.onDisconnect_=fT(),Fa(n.eventQueue_,pn(),r)}(n)}function L1(n,e,t){const r=new wn("/.info/"+e),i=mr(t);n.infoData_.updateSnapshot(r,i);const u=Ww(n.infoSyncTree_,r,i);Fa(n.eventQueue_,r,u)}function OT(n){return n.nextWriteId_++}function U1(n,e,t,r,i){xy(n,"set",{path:e.toString(),value:t,priority:r});const u=eC(n),c=mr(t,r),p=IT(n.serverSyncTree_,e),y=x1(c,p,u),C=OT(n),A=b1(n.serverSyncTree_,e,y,C,!0);MT(n.eventQueue_,A),n.server_.put(e.toString(),c.val(!0),(k,V)=>{const K="ok"===k;K||os("set at "+e+" failed: "+k);const ve=Of(n.serverSyncTree_,C,!K);Fa(n.eventQueue_,e,ve),Pf(0,i,k,V)});const S=Z1(n,e);My(n,S),Fa(n.eventQueue_,S,[])}function TB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&a1(n.onDisconnect_,e),Pf(0,t,r,i)})}function TN(n,e,t,r){const i=mr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(u,c)=>{"ok"===u&&Ty(n.onDisconnect_,e,i),Pf(0,r,u,c)})}function V1(n,e,t){let r;r=".info"===qt(e._path)?E1(n.infoSyncTree_,e,t):E1(n.serverSyncTree_,e,t),F1(n.eventQueue_,e._path,r)}function DN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(CN)}function xy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ti(t,...e)}function Pf(n,e,t,r){e&&vy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let u=i;r&&(u+=": "+r);const c=new Error(u);c.code=i,e(c)}})}function B1(n,e,t){return IT(n.serverSyncTree_,e,t)||Ft.EMPTY_NODE}function PT(n,e=n.transactionQueueTree_){if(e||kT(n,e),kg(e)){const t=SN(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function OB(n,e,t){const r=t.map(C=>C.currentWriteId),i=B1(n,e,r);let u=i;const c=i.hash();for(let C=0;C<t.length;C++){const A=t[C];(0,N.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const S=Rs(e,A.path);u=u.updateChild(S,A.currentOutputSnapshotRaw)}const p=u.val(!0),y=e;n.server_.put(y.toString(),p,C=>{xy(n,"transaction put response",{path:y.toString(),status:C});let A=[];if("ok"===C){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,A=A.concat(Of(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();kT(n,AT(n.transactionQueueTree_,e)),PT(n,n.transactionQueueTree_),Fa(n.eventQueue_,e,A);for(let k=0;k<S.length;k++)vy(S[k])}else{if("datastale"===C)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{os("transaction at "+y.toString()+" failed: "+C);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=C}My(n,e)}},c)}(n,Kw(e),t)}else gN(e)&&ST(e,t=>{PT(n,t)})}function My(n,e){const t=AN(n,e),r=Kw(t);return function PB(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],C=Rs(t,y.path);let S,A=!1;if((0,N.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)A=!0,S=y.abortReason,i=i.concat(Of(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)A=!0,S="maxretry",i=i.concat(Of(n.serverSyncTree_,y.currentWriteId,!0));else{const k=B1(n,y.path,c);y.currentInputSnapshot=k;const V=e[p].update(k.val());if(void 0!==V){Qw("transaction failed: Data returned ",V,y.path);let K=mr(V);"object"==typeof V&&null!=V&&(0,N.r3)(V,".priority")||(K=K.updatePriority(k.getPriority()));const Ue=y.currentWriteId,st=eC(n),It=x1(K,k,st);y.currentOutputSnapshotRaw=K,y.currentOutputSnapshotResolved=It,y.currentWriteId=OT(n),c.splice(c.indexOf(Ue),1),i=i.concat(b1(n.serverSyncTree_,y.path,It,y.currentWriteId,y.applyLocally)),i=i.concat(Of(n.serverSyncTree_,Ue,!0))}else A=!0,S="nodata",i=i.concat(Of(n.serverSyncTree_,y.currentWriteId,!0))}Fa(n.eventQueue_,t,i),i=[],A&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}kT(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)vy(r[p]);PT(n,n.transactionQueueTree_)}(n,SN(n,t),r),r}function AN(n,e){let t,r=n.transactionQueueTree_;for(t=qt(e);null!==t&&void 0===kg(r);)r=AT(r,t),t=qt(e=Fn(e));return r}function SN(n,e){const t=[];return xN(n,e,t),t.sort((r,i)=>r.order-i.order),t}function xN(n,e,t){const r=kg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ST(e,i=>{xN(n,i,t)})}function kT(n,e){const t=kg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,P1(e,t.length>0?t:void 0)}ST(e,r=>{kT(n,r)})}function Z1(n,e){const t=Kw(AN(n,e)),r=AT(n.transactionQueueTree_,e);return function lB(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{j1(n,i)}),j1(n,r),mN(r,i=>{j1(n,i)}),t}function j1(n,e){const t=kg(e);if(t){const r=[];let i=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Of(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?P1(e,void 0):t.length=u+1,Fa(n.eventQueue_,Kw(e),i);for(let c=0;c<r.length;c++)vy(r[c])}}const q1=function(n,e){const t=RB(n),r=t.namespace;return"firebase.com"===t.domain&&Wl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Wl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new wn(t.pathString)}},RB=function(n){let e="",t="",r="",i="",u="",c=!0,p="https",y=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(p=n.substring(0,C-1),n=n.substring(C+2));let A=n.indexOf("/");-1===A&&(A=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(A,S)),A<S&&(i=function kB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(u){}e+="/"+i}return e}(n.substring(A,S)));const k=function NB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));C=e.indexOf(":"),C>=0?(c="https"===p||"wss"===p,y=parseInt(e.substring(C+1),10)):C=e.length;const V=e.slice(0,C);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const K=e.indexOf(".");r=e.substring(0,K).toLowerCase(),t=e.substring(K+1),u=r}"ns"in k&&(u=k.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:u}};class MN{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class ON{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class PN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class kN{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return TB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ra("OnDisconnect.remove",this._path);const e=new N.BH;return TN(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ra("OnDisconnect.set",this._path),Yl("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return TN(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ra("OnDisconnect.setWithPriority",this._path),Yl("OnDisconnect.setWithPriority",e,this._path,!1),R1("OnDisconnect.setWithPriority",t,!1);const r=new N.BH;return function DB(n,e,t,r,i){const u=mr(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&Ty(n.onDisconnect_,e,u),Pf(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ra("OnDisconnect.update",this._path),yN("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function AB(n,e,t,r){if((0,N.xb)(t))return Ti("onDisconnect().update() called with empty data.  Don't do anything."),void Pf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,u)=>{"ok"===i&&Di(t,(c,p)=>{const y=mr(p);Ty(n.onDisconnect_,or(e,c),y)}),Pf(0,r,i,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class _o{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ht(this._path)?null:Kx(this._path)}get ref(){return new La(this._repo,this._path)}get _queryIdentifier(){const e=Uk(this._queryParams),t=Bx(e);return"{}"===t?"default":t}get _queryObject(){return Uk(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof _o))return!1;const t=this._repo===e._repo,r=Yx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function IV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function NT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function kf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Kl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Cd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==zl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===qn){if(null!=e&&!Yw(e)||null!=t&&!Yw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof t1||n.getIndex()===n1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function RT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class La extends _o{constructor(e,t){super(e,t,new cT,!1)}get parent(){const e=bk(this._path);return null===e?null:new La(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ng{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new wn(e),r=Rg(this.ref,e);return new Ng(this._node.getChild(t),r,qn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ng(i,Rg(this.ref,r),qn)))}hasChild(e){const t=new wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function NN(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?Rg(n._root,e):n._root}function RN(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=q1(e,n._repo.repoInfo_.nodeAdmin);vN("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Wl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),NN(n,t.path.toString())}function Rg(n,e){return null===qt((n=(0,N.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Xw("child","path",t,!1)):Xw("child","path",e,!1),new La(n._repo,or(n._path,e));var t}function H1(n,e){n=(0,N.m9)(n),Ra("set",n._path),Yl("set",e,n._path,!1);const t=new N.BH;return U1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function BB(n,e){yN("update",e,n._path,!1);const t=new N.BH;return function EB(n,e,t,r){xy(n,"update",{path:e.toString(),value:t});let i=!0;const u=eC(n),c={};if(Di(t,(p,y)=>{i=!1,c[p]=pN(or(e,p),mr(y),n.serverSyncTree_,u)}),i)Ti("update() called with empty data.  Don't do anything."),Pf(0,r,"ok",void 0);else{const p=OT(n),y=function z3(n,e,t,r){!function d3(n,e,t,r){(0,N.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=f1(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Hn.fromObject(t);return Sy(n,new Dy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);MT(n.eventQueue_,y),n.server_.merge(e.toString(),t,(C,A)=>{const S="ok"===C;S||os("update at "+e+" failed: "+C);const k=Of(n.serverSyncTree_,p,!S),V=k.length>0?My(n,e):e;Fa(n.eventQueue_,V,k),Pf(0,r,C,A)}),Di(t,C=>{const A=Z1(n,or(e,C));My(n,A)}),Fa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ZB(n){return function bB(n,e){const t=function eB(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,A)=>{const S=Rs(C,t);r=r||xf(A,S)});let i=n.syncPointTree_.get(t);i?r=r||xf(i,pn()):(i=new rN,n.syncPointTree_=n.syncPointTree_.set(t,i));const u=null!=r,c=u?new Af(r,!0,!1):null;return function F3(n){return mT(n.viewCache_)}(iN(i,e,_T(n.pendingWriteTree_,e._path),u?c.getNode():Ft.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=mr(r).withIndex(e._queryParams.getIndex()),u=Ww(n.serverSyncTree_,e._path,i);return F1(n.eventQueue_,e._path,u),Promise.resolve(i)},r=>(xy(n,"get for query "+(0,N.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,N.m9)(n))._repo,n).then(e=>new Ng(e,new La(n._repo,n._path),n._queryParams.getIndex()))}class FT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new MN("value",this,new Ng(e.snapshotNode,new La(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ON(this,e,t):null}matches(e){return e instanceof FT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class LT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ON(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const r=Rg(new La(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new MN(e.type,this,new Ng(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof LT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function tC(n,e,t,r,i){let u;if("object"==typeof r&&(u=void 0,i=r),"function"==typeof r&&(u=r),i&&i.onlyOnce){const y=t,C=(A,S)=>{V1(n._repo,n,p),y(A,S)};C.userCallback=t.userCallback,C.context=t.context,t=C}const c=new PN(t,u||void 0),p="value"===e?new FT(c):new LT(e,c);return function SB(n,e,t){let r;r=".info"===qt(e._path)?lN(n.infoSyncTree_,e,t):lN(n.serverSyncTree_,e,t),F1(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>V1(n._repo,n,p)}function $1(n,e,t,r){return tC(n,"value",e,t,r)}function FN(n,e,t,r){return tC(n,"child_added",e,t,r)}function LN(n,e,t,r){return tC(n,"child_changed",e,t,r)}function UN(n,e,t,r){return tC(n,"child_moved",e,t,r)}function VN(n,e,t,r){return tC(n,"child_removed",e,t,r)}function BN(n,e,t){let r=null;const i=t?new PN(t):null;"value"===e?r=new FT(i):e&&(r=new LT(e,i)),V1(n._repo,n,r)}class Ou{}class ZN extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yl("endAt",this._value,e._path,!0);const t=o1(e._queryParams,this._value,this._key);if(RT(t),kf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class qB extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yl("endBefore",this._value,e._path,!1);const t=function JV(n,e,t){let r,i;return n.index_===Kl?("string"==typeof e&&(e=Rk(e)),i=o1(n,e,t)):(r=null==t?Cd:Rk(t),i=o1(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(RT(t),kf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class jN extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yl("startAt",this._value,e._path,!0);const t=s1(e._queryParams,this._value,this._key);if(RT(t),kf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class GB extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yl("startAfter",this._value,e._path,!1);const t=function QV(n,e,t){let r;if(n.index_===Kl)"string"==typeof e&&(e=Nk(e)),r=s1(n,e,t);else{let i;i=null==t?zl:Nk(t),r=s1(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(RT(t),kf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class zB extends Ou{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function KV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class YB extends Ou{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function YV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class JB extends Ou{constructor(e){super(),this._path=e}_apply(e){NT(e,"orderByChild");const t=new wn(this._path);if(Ht(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new t1(t),i=dT(e._queryParams,r);return kf(i),new _o(e._repo,e._path,i,!0)}}class eZ extends Ou{_apply(e){NT(e,"orderByKey");const t=dT(e._queryParams,Kl);return kf(t),new _o(e._repo,e._path,t,!0)}}class nZ extends Ou{_apply(e){NT(e,"orderByPriority");const t=dT(e._queryParams,qn);return kf(t),new _o(e._repo,e._path,t,!0)}}class iZ extends Ou{_apply(e){NT(e,"orderByValue");const t=dT(e._queryParams,n1);return kf(t),new _o(e._repo,e._path,t,!0)}}class oZ extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Yl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ZN(this._value,this._key)._apply(new jN(this._value,this._key)._apply(e))}}function Pu(n,...e){let t=(0,N.m9)(n);for(const r of e)t=r._apply(t);return t}(function B3(n){(0,N.hu)(!CT,"__referenceConstructor has already been defined"),CT=n})(La),function $3(n){(0,N.hu)(!ET,"__referenceConstructor has already been defined"),ET=n}(La);const G1={};function HN(n,e,t,r,i){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||Wl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ti("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,C,c=q1(u,i),p=c.repoInfo;"undefined"!=typeof process&&process.env&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(y=!0,u=`http://${C}?ns=${p.namespace}`,c=q1(u,i),p=c.repoInfo):y=!c.repoInfo.secure;const A=i&&y?new Rw(Rw.OWNER):new XU(n.name,n.options,e);vN("Invalid Firebase Database URL",c),Ht(c.path)||Wl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function dZ(n,e,t,r){let i=G1[e.name];i||(i={},G1[e.name]=i);let u=i[n.toURLString()];return u&&Wl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new vB(n,false,t,r),i[n.toURLString()]=u,u}(p,n,A,new JU(n.name,t));return new fZ(S,n)}class fZ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function wB(n,e,t){if(n.stats_=Gx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new hT(n.repoInfo_,(r,i,u,c)=>{EN(n,r,i,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>IN(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new xg(n.repoInfo_,e,(r,i,u,c)=>{EN(n,r,i,u,c)},r=>{IN(n,r)},r=>{!function CB(n,e){Di(e,(t,r)=>{L1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function nV(n,e){const t=n.toString();return $x[t]||($x[t]=e()),$x[t]}(n.repoInfo_,()=>new i3(n.stats_,n.server_)),n.infoData_=new XV,n.infoSyncTree_=new uN({startListening:(r,i,u,c)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=Ww(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),L1(n,"connected",!1),n.serverSyncTree_=new uN({startListening:(r,i,u,c)=>(n.server_.listen(r,u,i,(p,y)=>{const C=c(p,y);Fa(n.eventQueue_,r._path,C)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new La(this._repo,pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function cZ(n,e){const t=G1[e];(!t||t[n.key]!==n)&&Wl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),DN(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Wl("Cannot call "+e+" on a deleted database.")}}function $N(){ck.IS_TRANSPORT_INITIALIZED&&os("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function pZ(){$N(),Tf.forceDisallow()}function gZ(){$N(),wy.forceDisallow(),Tf.forceAllow()}function vZ(n,e){HP(n,e)}const CZ={".sv":"timestamp"};class IZ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}xg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},xg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function wZ(n){VP(wi.SDK_VERSION),(0,wi._registerComponent)(new ns.wA("database",(e,{instanceIdentifier:t})=>HN(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,wi.registerVersion)(LP,"0.13.0",n),(0,wi.registerVersion)(LP,"0.13.0","esm2017")}();const SZ=new Ci.Yd("@firebase/database-compat"),GN=function(n){SZ.warn("FIREBASE WARNING: "+n)};class OZ{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),u=>r(u)),i}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,GN("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class PZ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Nf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Xw("DataSnapshot.child","path",e,!1),new Nf(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Xw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Nf(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Yo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Bi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var u;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=Bi.getCancelAndContextArgs_("Query.on",r,i),p=(C,A)=>{t.call(c.context,new Nf(this.database,C),A)};p.userCallback=t,p.context=c.context;const y=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return $1(this._delegate,p,y),t;case"child_added":return FN(this._delegate,p,y),t;case"child_removed":return VN(this._delegate,p,y),t;case"child_changed":return LN(this._delegate,p,y),t;case"child_moved":return UN(this._delegate,p,y),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,BN(this._delegate,e,i)}else BN(this._delegate,e)}get(){return ZB(this._delegate).then(e=>new Nf(this.database,e))}once(e,t,r,i){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const u=Bi.getCancelAndContextArgs_("Query.once",r,i),c=new N.BH,p=(C,A)=>{const S=new Nf(this.database,C);t&&t.call(u.context,S,A),c.resolve(S)};p.userCallback=t,p.context=u.context;const y=C=>{u.cancel&&u.cancel.call(u.context,C),c.reject(C)};switch(e){case"value":$1(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":FN(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":VN(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":LN(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":UN(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Bi(this.database,Pu(this._delegate,function KB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new zB(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Bi(this.database,Pu(this._delegate,function QB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new YB(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Bi(this.database,Pu(this._delegate,function XB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xw("orderByChild","path",n,!1),new JB(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Bi(this.database,Pu(this._delegate,function tZ(){return new eZ}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Bi(this.database,Pu(this._delegate,function rZ(){return new nZ}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Bi(this.database,Pu(this._delegate,function sZ(){return new iZ}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Bi(this.database,Pu(this._delegate,function $B(n=null,e){return Jw("startAt","key",e,!0),new jN(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Bi(this.database,Pu(this._delegate,function WB(n,e){return Jw("startAfter","key",e,!0),new GB(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Bi(this.database,Pu(this._delegate,function jB(n,e){return Jw("endAt","key",e,!0),new ZN(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Bi(this.database,Pu(this._delegate,function HB(n,e){return Jw("endBefore","key",e,!0),new qB(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Bi(this.database,Pu(this._delegate,function aZ(n,e){return Jw("equalTo","key",e,!0),new oZ(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Bi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,N.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Yo(this.database,new La(this._delegate._repo,this._delegate._path))}}class Yo extends Bi{constructor(e,t){super(e,new _o(t._repo,t._path,new cT,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Yo(this.database,Rg(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Yo(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new Yo(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const r=H1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,GN("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ra("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const r=BB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function VB(n,e,t){if(Ra("setWithPriority",n._path),Yl("setWithPriority",e,n._path,!1),R1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.BH;return U1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),u=>r(u)),i}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function LB(n){return Ra("remove",n._path),H1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function TZ(n,e,t){var r;if(n=(0,N.m9)(n),Ra("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new N.BH,p=$1(n,()=>{});return function MB(n,e,t,r,i,u){xy(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:ZP(),applyLocally:u,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=B1(n,e,void 0);c.currentInputSnapshot=p;const y=c.update(p.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Qw("transaction failed: Data returned ",y,c.path),c.status=0;const C=AT(n.transactionQueueTree_,e),A=kg(C)||[];let S;A.push(c),P1(C,A),"object"==typeof y&&null!==y&&(0,N.r3)(y,".priority")?(S=(0,N.DV)(y,".priority"),(0,N.hu)(Yw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(IT(n.serverSyncTree_,e)||Ft.EMPTY_NODE).getPriority().val();const k=eC(n),V=mr(y,S),K=x1(V,p,k);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=K,c.currentWriteId=OT(n);const ve=b1(n.serverSyncTree_,e,K,c.currentWriteId,c.applyLocally);Fa(n.eventQueue_,e,ve),PT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,C,A)=>{let S=null;y?u.reject(y):(S=new Ng(A,new La(n._repo,n._path),qn),u.resolve(new IZ(C,S)))},p,i),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new PZ(u.committed,new Nf(this.database,u.snapshot)));return t&&i.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),i}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const r=function UB(n,e){n=(0,N.m9)(n),Ra("setPriority",n._path),R1("setPriority",e,!1);const t=new N.BH;return U1(n._repo,or(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const r=function FB(n,e){n=(0,N.m9)(n),Ra("push",n._path),Yl("push",e,n._path,!0);const t=bN(n._repo),r=$V(t),i=Rg(n,r),u=Rg(n,r);let c;return c=null!=e?H1(u,e).then(()=>u):Promise.resolve(u),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Yo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const u=new Yo(this.database,r);return u.then=i.then.bind(i),u.catch=i.catch.bind(i,void 0),u}onDisconnect(){return Ra("Reference.onDisconnect",this._delegate._path),new OZ(new kN(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class nC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:pZ,forceLongPolling:gZ}}useEmulator(e,t,r={}){!function mZ(n,e,t,r={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Wl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let u;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Wl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Rw(Rw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Sg)(r.mockUserToken,n.app.options.projectId);u=new Rw(c)}!function lZ(n,e,t,r){n.repoInfo_=new qx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof Yo){const t=RN(this._delegate,e.toString());return new Yo(this,t)}{const t=NN(this._delegate,e);return new Yo(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const r=RN(this._delegate,e);return new Yo(this,r)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function _Z(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),DN(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function yZ(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function xB(n){n.persistentConnection_&&n.persistentConnection_.resume(CN)}(n._repo)}(this._delegate)}}nC.ServerValue={TIMESTAMP:function bZ(){return CZ}(),increment:n=>function EZ(n){return{".sv":{increment:n}}}(n)};var NZ=Object.freeze({__proto__:null,initStandalone:function kZ({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:u=!1}){VP(t);const c=new ns.zt("auth-internal",new ns.H0("database-standalone"));return c.setComponent(new ns.wA("auth-internal",()=>r,"PRIVATE")),{instance:new nC(HN(n,c,void 0,e,u),n),namespace:i}}});const RZ=nC.ServerValue;function WN(n){return null==n}function zN(n){return"function"==typeof n.set}function KN(n,e){return zN(e)?e:n.ref(e)}function YN(n,e){if(function LZ(n){return"string"==typeof n}(n))return e.stringCase();if(zN(n))return e.firebaseCase();if(function UZ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function rC(n,e,t="on",r=wl.z){return new Xn.y(i=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,dt.U)(i=>{const{snapshot:u,prevKey:c}=i;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,nP.B)())}function QN(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function ZZ(n,e){const{payload:t,prevKey:r,key:i}=e,u=QN(n,i),c=function BZ(n,e){if(WN(e))return 0;{const t=QN(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const C={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,C],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function JN(n){return(WN(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function XN(n,e,t){return function VZ(n,e,t){return rC(n,"value","once",t).pipe(er(r=>{const i=[Xe(r)];return e.forEach(u=>i.push(rC(n,u,"on",t))),(0,ax.T)(...i).pipe(Ks(ZZ,[]))}),jm())}(n,e=JN(e),t)}function eR(n,e,t){const r=(e=JN(e)).map(i=>rC(n,i,"on",t));return(0,ax.T)(...r)}function tR(n,e){return function(r,i){return YN(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function $Z(n){return function(t){return t?YN(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function nR(n,e){return function(){return rC(n,"value","on",e)}}!function FZ(n){n.INTERNAL.registerComponent(new ns.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new nC(i,r)},"PUBLIC").setServiceProps({Reference:Yo,Query:Bi,Database:nC,DataSnapshot:Nf,enableLogging:vZ,INTERNAL:NZ,ServerValue:RZ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(jc.Z);const zZ=new a.OlP("angularfire2.realtimeDatabaseURL"),KZ=new a.OlP("angularfire2.database.use-emulator");let YZ=(()=>{class n{constructor(t,r,i,u,c,p,y,C,A,S,k,V,K,ve,Ue){this.schedulers=p;const st=y,It=(0,Dr.on)(t,c,r);C&&Px(It,c,A,k,V,K,S,ve),this.database=(0,Dr.cc)(`${It.name}.database.${i}`,"AngularFireDatabase",It.name,()=>{const vt=c.runOutsideAngular(()=>It.database(i||void 0));return st&&vt.useEmulator(...st),vt},[st])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>KN(this.database,t));let u=i;return r&&(u=r(i)),function GZ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:tR(r,"update"),set:tR(r,"set"),push:i=>r.push(i),remove:$Z(r),snapshotChanges:i=>XN(n,i,t).pipe(vn.iC),stateChanges:i=>eR(n,i,t).pipe(vn.iC),auditTrail:i=>function jZ(n,e,t){return function HZ(n,e,t){return function qZ(n,e){return rC(n,"value","on",e).pipe((0,dt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function BU(...n){const e=(0,gs.jO)(n);return(0,Vn.e)((t,r)=>{const i=n.length,u=new Array(i);let c=n.map(()=>!1),p=!1;for(let y=0;y<i;y++)(0,mi.Xf)(n[y]).subscribe(new kn.Q(r,C=>{u[y]=C,!p&&!c[y]&&(c[y]=!0,(p=c.every(Do.y))&&(c=null))},VU.Z));t.subscribe(new kn.Q(r,y=>{if(p){const C=[y,...u];r.next(e?e(...C):C)}}))})}(e),(0,dt.U)(([i,u])=>{const c=i.lastKeyToLoad,p=u.map(y=>y.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),function ZU(n){return(0,Vn.e)((e,t)=>{let r=!1,i=0;e.subscribe(new kn.Q(t,u=>(r||(r=!n(u,i++)))&&t.next(u)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,dt.U)(i=>i.actions))}(n,eR(n,e).pipe(Ks((i,u)=>[...i,u],[])),t)}(n,i,t).pipe(vn.iC),valueChanges:(i,u)=>XN(n,i,t).pipe((0,dt.U)(p=>p.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),vn.iC)}}(u,this)}object(t){return function WZ(n,e){return{query:n,snapshotChanges:()=>nR(n,e.schedulers.outsideAngular)().pipe(vn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>nR(n,e.schedulers.outsideAngular)().pipe(vn.iC,(0,dt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>KN(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Dr.Dh),a.LFG(Dr.xv,8),a.LFG(zZ,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(vn.HU),a.LFG(KZ,8),a.LFG(kx,8),a.LFG(Dx,8),a.LFG(Ax,8),a.LFG(Sx,8),a.LFG(xx,8),a.LFG(Mx,8),a.LFG(Ox,8),a.LFG(XI,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QZ=(()=>{class n{constructor(){SP.Z.registerVersion("angularfire",vn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[YZ]}),n})();const rR_firebase={apiKey:"AIzaSyDh097ytcNgDnXNOkjheqMu16CwdgGpXMI",authDomain:"init-2c0d0.firebaseapp.com",projectId:"init-2c0d0",storageBucket:"init-2c0d0.appspot.com",messagingSenderId:"86521572507",appId:"1:86521572507:web:8b19025544c1229a8dea3e"};let JZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[UU]}),n.\u0275inj=a.cJS({providers:[],imports:[[rc,RU,YC,Ea,Dr.hO.initializeApp(rR_firebase),R2,QZ]]}),n})();(0,a.G48)(),ca().bootstrapModule(JZ).catch(n=>console.error(n))},5867:(ze,we,R)=>{R.d(we,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=R(9681);(0,a.registerVersion)("firebase","9.8.2","app")},127:(ze,we,R)=>{R.d(we,{Z:()=>a.Z});var a=R(3942);a.Z.registerVersion("firebase","9.8.2","app-compat")},8125:(ze,we,R)=>{R.r(we);var a=R(5861),ee=R(3942),F=R(2090),oe=R(9681);function ae(_,f){var g={};for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&f.indexOf(w)<0&&(g[w]=_[w]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(w=Object.getOwnPropertySymbols(_);T<w.length;T++)f.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(_,w[T])&&(g[w[T]]=_[w[T]])}return g}var ie=R(1877),mt=R(4859);const rn=function Xt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ci=function ar(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},zr=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),us=new ie.Yd("@firebase/auth");function Ur(_,...f){us.logLevel<=ie.in.ERROR&&us.error(`Auth (${oe.SDK_VERSION}): ${_}`,...f)}function Kt(_,...f){throw Mr(_,...f)}function xn(_,...f){return Mr(_,...f)}function ls(_,f,g){const w=Object.assign(Object.assign({},ci()),{[f]:g});return new F.LL("auth","Firebase",w).create(f,{appName:_.name})}function di(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Kt(_,"argument-error"),ls(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mr(_,...f){if("string"!=typeof _){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(g,...w)}return zr.create(_,...f)}function Pe(_,f,...g){if(!_)throw Mr(f,...g)}function ut(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ur(f),new Error(f)}function Ln(_,f){_||ut(f)}const Mn=new Map;function Yt(_){Ln(_ instanceof Function,"Expected a class definition");let f=Mn.get(_);return f?(Ln(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Mn.set(_,f),f)}function ur(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function bn(){return"http:"===Kr()||"https:"===Kr()}function Kr(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class at{constructor(f,g){this.shortDelay=f,this.longDelay=g,Ln(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Ua(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bn()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pt(_,f){Ln(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Ls{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Lt=new at(3e4,6e4);function gn(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function zt(_,f,g,w){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,a.Z)(function*(_,f,g,w,T={}){return Z(_,T,(0,a.Z)(function*(){let M={},B={};w&&("GET"===f?B=w:M={body:JSON.stringify(w)});const te=(0,F.xO)(Object.assign({key:_.config.apiKey},B)).slice(1),Re=yield _._getAdditionalHeaders();return Re["Content-Type"]="application/json",_.languageCode&&(Re["X-Firebase-Locale"]=_.languageCode),Ls.fetch()($(_,_.config.apiHost,g,te),Object.assign({method:f,headers:Re,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Z(_,f,g){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)(function*(_,f,g){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},Zi),f);try{const T=new X(_),M=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const B=yield M.json();if("needConfirmation"in B)throw Ae(_,"account-exists-with-different-credential",B);if(M.ok&&!("errorMessage"in B))return B;{const te=M.ok?B.errorMessage:B.error.message,[Re,Se]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw Ae(_,"credential-already-in-use",B);if("EMAIL_EXISTS"===Re)throw Ae(_,"email-already-in-use",B);if("USER_DISABLED"===Re)throw Ae(_,"user-disabled",B);const Qe=w[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw ls(_,Qe,Se);Kt(_,Qe)}}catch(T){if(T instanceof F.ZR)throw T;Kt(_,"network-request-failed")}})).apply(this,arguments)}function z(_,f,g,w){return be.apply(this,arguments)}function be(){return(be=(0,a.Z)(function*(_,f,g,w,T={}){const M=yield zt(_,f,g,w,T);return"mfaPendingCredential"in M&&Kt(_,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function $(_,f,g,w){const T=`${f}${g}?${w}`;return _.config.emulator?pt(_.config,T):`${_.config.apiScheme}://${T}`}class X{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(xn(this.auth,"network-request-failed")),Lt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ae(_,f,g){const w={appName:_.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const T=xn(_,f,w);return T.customData._tokenResponse=g,T}function Ct(){return(Ct=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ot(_,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function At(_,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Qr(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Nu(){return(Nu=(0,a.Z)(function*(_,f=!1){const g=(0,F.m9)(_),w=yield g.getIdToken(f),T=Un(w);Pe(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,B=null==M?void 0:M.sign_in_provider;return{claims:T,token:w,authTime:Qr(Qo(T.auth_time)),issuedAtTime:Qr(Qo(T.iat)),expirationTime:Qr(Qo(T.exp)),signInProvider:B||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Qo(_){return 1e3*Number(_)}function Un(_){const[f,g,w]=_.split(".");if(void 0===f||void 0===g||void 0===w)return Ur("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,F.tV)(g);return T?JSON.parse(T):(Ur("Failed to decode base64 JWT payload"),null)}catch(T){return Ur("Caught error parsing JWT payload as JSON",T),null}}function _r(_,f){return $n.apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof F.ZR&&Us(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Us({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Id{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,a.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,a.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Vs{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qr(this.lastLoginAt),this.creationTime=Qr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cs(_){return ds.apply(this,arguments)}function ds(){return(ds=(0,a.Z)(function*(_){var f;const g=_.auth,w=yield _.getIdToken(),T=yield _r(_,At(g,{idToken:w}));Pe(null==T?void 0:T.users.length,g,"internal-error");const M=T.users[0];_._notifyReloadListener(M);const B=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?$e(M.providerUserInfo):[],te=Jr(_.providerData,B),Qe=!!_.isAnonymous&&!(_.email&&M.passwordHash||(null==te?void 0:te.length)),it={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:te,metadata:new Vs(M.createdAt,M.lastLoginAt),isAnonymous:Qe};Object.assign(_,it)})).apply(this,arguments)}function yo(){return(yo=(0,a.Z)(function*(_){const f=(0,F.m9)(_);yield cs(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Jr(_,f){return[..._.filter(w=>!f.some(T=>T.providerId===w.providerId)),...f]}function $e(_){return _.map(f=>{var{providerId:g}=f,w=ae(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function en(){return(en=(0,a.Z)(function*(_,f){const g=yield Z(_,{},(0,a.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=_.config,B=$(_,T,"/v1/token",`key=${M}`),te=yield _._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",Ls.fetch()(B,{method:"POST",headers:te,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class lr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Pe(f.idToken,"internal-error"),Pe(void 0!==f.idToken,"internal-error"),Pe(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function ji(_){const f=Un(_);return Pe(f,"internal-error"),Pe(void 0!==f.exp,"internal-error"),Pe(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,a.Z)(function*(){return Pe(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,a.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:B}=yield function Pt(_,f){return en.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(T,M,Number(B))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:T,expirationTime:M}=g,B=new lr;return w&&(Pe("string"==typeof w,"internal-error",{appName:f}),B.refreshToken=w),T&&(Pe("string"==typeof T,"internal-error",{appName:f}),B.accessToken=T),M&&(Pe("number"==typeof M,"internal-error",{appName:f}),B.expirationTime=M),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new lr,this.toJSON())}_performRefresh(){return ut("not implemented")}}function vr(_,f){Pe("string"==typeof _||void 0===_,"internal-error",{appName:f})}class mn{constructor(f){var{uid:g,auth:w,stsTokenManager:T}=f,M=ae(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Id(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Vs(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,a.Z)(function*(){const w=yield _r(g,g.stsTokenManager.getToken(g.auth,f));return Pe(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function ku(_){return Nu.apply(this,arguments)}(this,f)}reload(){return function yr(_){return yo.apply(this,arguments)}(this)}_assign(f){this!==f&&(Pe(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new mn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,a.Z)(function*(){let T=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield cs(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,a.Z)(function*(){const g=yield f.getIdToken();return yield _r(f,function et(_,f){return Ct.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,T,M,B,te,Re,Se,Qe;const it=null!==(w=g.displayName)&&void 0!==w?w:void 0,Ut=null!==(T=g.email)&&void 0!==T?T:void 0,fr=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,Zo=null!==(B=g.photoURL)&&void 0!==B?B:void 0,mu=null!==(te=g.tenantId)&&void 0!==te?te:void 0,Ih=null!==(Re=g._redirectEventId)&&void 0!==Re?Re:void 0,Rc=null!==(Se=g.createdAt)&&void 0!==Se?Se:void 0,Fc=null!==(Qe=g.lastLoginAt)&&void 0!==Qe?Qe:void 0,{uid:dl,emailVerified:Th,isAnonymous:fp,providerData:hl,stsTokenManager:fl}=g;Pe(dl&&fl,f,"internal-error");const cC=lr.fromJSON(this.name,fl);Pe("string"==typeof dl,f,"internal-error"),vr(it,f.name),vr(Ut,f.name),Pe("boolean"==typeof Th,f,"internal-error"),Pe("boolean"==typeof fp,f,"internal-error"),vr(fr,f.name),vr(Zo,f.name),vr(mu,f.name),vr(Ih,f.name),vr(Rc,f.name),vr(Fc,f.name);const Dh=new mn({uid:dl,auth:f,email:Ut,emailVerified:Th,displayName:it,isAnonymous:fp,photoURL:Zo,phoneNumber:fr,tenantId:mu,stsTokenManager:cC,createdAt:Rc,lastLoginAt:Fc});return hl&&Array.isArray(hl)&&(Dh.providerData=hl.map(ym=>Object.assign({},ym))),Ih&&(Dh._redirectEventId=Ih),Dh}static _fromIdTokenResponse(f,g,w=!1){return(0,a.Z)(function*(){const T=new lr;T.updateFromServerResponse(g);const M=new mn({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:w});return yield cs(M),M})()}}const Qt=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(g,w){var T=this;return(0,a.Z)(function*(){T.storage[g]=w})()}_get(g){var w=this;return(0,a.Z)(function*(){const T=w.storage[g];return void 0===T?null:T})()}_remove(g){var w=this;return(0,a.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return _.type="NONE",_})();function hi(_,f,g){return`firebase:${_}:${f}:${g}`}class yn{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:T,name:M}=this.auth;this.fullUserKey=hi(this.userKey,T.apiKey,M),this.fullPersistenceKey=hi("persistence",T.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,a.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?mn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,a.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,a.Z)(function*(){if(!g.length)return new yn(Yt(Qt),f,w);const T=(yield Promise.all(g.map(function(){var Se=(0,a.Z)(function*(Qe){if(yield Qe._isAvailable())return Qe});return function(Qe){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let M=T[0]||Yt(Qt);const B=hi(w,f.config.apiKey,f.name);let te=null;for(const Se of g)try{const Qe=yield Se._get(B);if(Qe){const it=mn._fromJSON(f,Qe);Se!==M&&(te=it),M=Se;break}}catch(Qe){}const Re=T.filter(Se=>Se._shouldAllowMigration);return M._shouldAllowMigration&&Re.length?(M=Re[0],te&&(yield M._set(B,te.toJSON())),yield Promise.all(g.map(function(){var Se=(0,a.Z)(function*(Qe){if(Qe!==M)try{yield Qe._remove(B)}catch(it){}});return function(Qe){return Se.apply(this,arguments)}}())),new yn(M,f,w)):new yn(M,f,w)})()}}function xt(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(vo(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Jo(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Xo(f))return"Blackberry";if(ea(f))return"Webos";if(Zs(f))return"Safari";if((f.includes("chrome/")||Va(f))&&!f.includes("edge/"))return"Chrome";if(on(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Jo(_=(0,F.z$)()){return/firefox\//i.test(_)}function Zs(_=(0,F.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Va(_=(0,F.z$)()){return/crios\//i.test(_)}function vo(_=(0,F.z$)()){return/iemobile/i.test(_)}function on(_=(0,F.z$)()){return/android/i.test(_)}function Xo(_=(0,F.z$)()){return/blackberry/i.test(_)}function ea(_=(0,F.z$)()){return/webos/i.test(_)}function cn(_=(0,F.z$)()){return/iphone|ipad|ipod/i.test(_)}function fi(_=(0,F.z$)()){return cn(_)||on(_)||ea(_)||Xo(_)||/windows phone/i.test(_)||vo(_)}function Ql(_,f=[]){let g;switch(_){case"Browser":g=xt((0,F.z$)());break;case"Worker":g=`${xt((0,F.z$)())}-${_}`;break;default:g=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${w}`}class Dd{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const w=M=>new Promise((B,te)=>{try{B(f(M))}catch(Re){te(Re)}});w.onAbort=g,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,a.Z)(function*(){if(g.auth.currentUser===f)return;const w=[];try{for(const T of g.queue)yield T(f),T.onAbort&&w.push(T.onAbort)}catch(T){w.reverse();for(const M of w)try{M()}catch(B){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class js{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ad(this),this.idTokenSubscription=new Ad(this),this.beforeStateQueue=new Dd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=Yt(g)),this._initializationPromise=this.queue((0,a.Z)(function*(){var T,M;if(!w._deleted&&(w.persistenceManager=yield yn.create(w,f),!w._deleted)){if(null===(T=w._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(B){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(M=w.currentUser)||void 0===M?void 0:M.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,a.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,a.Z)(function*(){var w;const T=yield g.assertedPersistence.getCurrentUser();let M=T,B=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const te=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Re=null==M?void 0:M._redirectEventId,Se=yield g.tryRedirectSignIn(f);(!te||te===Re)&&(null==Se?void 0:Se.user)&&(M=Se.user,B=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if(B)try{yield g.beforeStateQueue.runMiddleware(M)}catch(te){M=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(te))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return Pe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var g=this;return(0,a.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,a.Z)(function*(){try{yield cs(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Wt(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,a.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,a.Z)(function*(){const w=f?(0,F.m9)(f):null;return w&&Pe(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f,g=!1){var w=this;return(0,a.Z)(function*(){if(!w._deleted)return f&&Pe(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,a.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,a.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,a.Z)(function*(){yield g.assertedPersistence.setPersistence(Yt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,a.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,a.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&Yt(f)||g._popupRedirectResolver;Pe(w,g,"argument-error"),g.redirectPersistenceManager=yield yn.create(g,[Yt(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,a.Z)(function*(){var w,T;return g._isInitialized&&(yield g.queue((0,a.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,a.Z)(function*(){if(f===g.currentUser)return g.queue((0,a.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,T){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),B=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(B,this,"internal-error"),B.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,w,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,a.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ql(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,a.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(w["X-Firebase-Client"]=T),w})()}}function an(_){return(0,F.m9)(_)}class Ad{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Rf(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Ff(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class Za{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ut("not implemented")}_getIdTokenResponse(f){return ut("not implemented")}_linkToIdToken(f,g){return ut("not implemented")}_getReauthenticationResolver(f){return ut("not implemented")}}function Lf(_,f){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:resetPassword",gn(_,f))})).apply(this,arguments)}function Uf(_,f){return ja.apply(this,arguments)}function ja(){return(ja=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ta(_,f){return xd.apply(this,arguments)}function xd(){return(xd=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:update",gn(_,f))})).apply(this,arguments)}function Md(){return(Md=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signInWithPassword",gn(_,f))})).apply(this,arguments)}function Jl(_,f){return Od.apply(this,arguments)}function Od(){return(Od=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:sendOobCode",gn(_,f))})).apply(this,arguments)}function Vg(_,f){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,a.Z)(function*(_,f){return Jl(_,f)})).apply(this,arguments)}function qa(_,f){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,a.Z)(function*(_,f){return Jl(_,f)})).apply(this,arguments)}function ec(_,f){return kd.apply(this,arguments)}function kd(){return(kd=(0,a.Z)(function*(_,f){return Jl(_,f)})).apply(this,arguments)}function wo(_,f){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,a.Z)(function*(_,f){return Jl(_,f)})).apply(this,arguments)}function Co(){return(Co=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signInWithEmailLink",gn(_,f))})).apply(this,arguments)}function Nd(){return(Nd=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signInWithEmailLink",gn(_,f))})).apply(this,arguments)}class na extends Za{constructor(f,g,w,T=null){super("password",w),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new na(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new na(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,a.Z)(function*(){switch(g.signInMethod){case"password":return function Ug(_,f){return Md.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ha(_,f){return Co.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Kt(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,a.Z)(function*(){switch(w.signInMethod){case"password":return Uf(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Vf(_,f){return Nd.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:Kt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Hi(_,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signInWithIdp",gn(_,f))})).apply(this,arguments)}class $i extends Za{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new $i(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Kt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T}=g,M=ae(g,["providerId","signInMethod"]);if(!w||!T)return null;const B=new $i(w,T);return B.idToken=M.idToken||void 0,B.accessToken=M.accessToken||void 0,B.secret=M.secret,B.nonce=M.nonce,B.pendingToken=M.pendingToken||null,B}_getIdTokenResponse(f){return Hi(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Hi(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Hi(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function Xr(_,f){return $a.apply(this,arguments)}function $a(){return($a=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:sendVerificationCode",gn(_,f))})).apply(this,arguments)}function Fu(){return(Fu=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signInWithPhoneNumber",gn(_,f))})).apply(this,arguments)}function Ga(){return(Ga=(0,a.Z)(function*(_,f){const g=yield z(_,"POST","/v1/accounts:signInWithPhoneNumber",gn(_,f));if(g.temporaryProof)throw Ae(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Bg={USER_NOT_FOUND:"user-not-found"};function Gi(){return(Gi=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signInWithPhoneNumber",gn(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Bg)})).apply(this,arguments)}class Hs extends Za{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Hs({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Hs({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Rd(_,f){return Fu.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Fd(_,f){return Ga.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function En(_,f){return Gi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:M}=f;return w||g||T||M?new Hs({verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:M}):null}}class $s{constructor(f){var g,w,T,M,B,te;const Re=(0,F.zd)((0,F.pd)(f)),Se=null!==(g=Re.apiKey)&&void 0!==g?g:null,Qe=null!==(w=Re.oobCode)&&void 0!==w?w:null,it=function In(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Re.mode)&&void 0!==T?T:null);Pe(Se&&Qe&&it,"argument-error"),this.apiKey=Se,this.operation=it,this.code=Qe,this.continueUrl=null!==(M=Re.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(B=Re.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(te=Re.tenantId)&&void 0!==te?te:null}static parseLink(f){const g=function Ld(_){const f=(0,F.zd)((0,F.pd)(_)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(_)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||f||_}(f);try{return new $s(g)}catch(w){return null}}}let wr=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,w){return na._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const T=$s.parseLink(w);return Pe(T,"argument-error"),na._fromEmailAndCode(g,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class pi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Wi extends pi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Br extends Wi{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Pe("providerId"in g&&"signInMethod"in g,"argument-error"),$i._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Pe(f.idToken||f.accessToken,"argument-error"),$i._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Br.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Br.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:M,nonce:B,providerId:te}=f;if(!w&&!T&&!g&&!M||!te)return null;try{return new Br(te)._credential({idToken:g,accessToken:w,nonce:B,pendingToken:M})}catch(Re){return null}}}let Zr=(()=>{class _ extends Wi{constructor(){super("facebook.com")}static credential(g){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Gn=(()=>{class _ extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:T}=g;if(!w&&!T)return null;try{return _.credential(w,T)}catch(M){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),ra=(()=>{class _ extends Wi{constructor(){super("github.com")}static credential(g){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Cr extends Za{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Hi(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Hi(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Hi(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T,pendingToken:M}=g;return w&&T&&M&&w===T?new Cr(w,M):null}static _create(f,g){return new Cr(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gs extends pi{constructor(f){Pe(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Gs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Gs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Cr.fromJSON(f);return Pe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Cr._create(w,g)}catch(T){return null}}}let gt=(()=>{class _ extends Wi{constructor(){super("twitter.com")}static credential(g,w){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=g;if(!w||!T)return null;try{return _.credential(w,T)}catch(M){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Eo(_,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signUp",gn(_,f))})).apply(this,arguments)}class br{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,T=!1){return(0,a.Z)(function*(){const M=yield mn._fromIdTokenResponse(f,w,T),B=Wa(w);return new br({user:M,providerId:B,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,a.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const T=Wa(w);return new br({user:f,providerId:T,_tokenResponse:w,operationType:g})})()}}function Wa(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Lu(){return(Lu=(0,a.Z)(function*(_){var f;const g=an(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new br({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Eo(g,{returnSecureToken:!0}),T=yield br._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class sa extends F.ZR{constructor(f,g,w,T){var M;super(g.code,g.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,sa.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,T){return new sa(f,g,w,T)}}function Te(_,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?sa._fromErrorAndOperation(_,M,f,w):M})}function Rt(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function hn(){return(hn=(0,a.Z)(function*(_,f){const g=(0,F.m9)(_);yield Or(!0,g,f);const{providerUserInfo:w}=yield Ot(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Rt(w||[]);return g.providerData=g.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function oa(_,f){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,a.Z)(function*(_,f,g=!1){const w=yield _r(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return br._forOperation(_,"link",w)})).apply(this,arguments)}function Or(_,f,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,a.Z)(function*(_,f,g){yield cs(f);const T=!1===_?"provider-already-linked":"no-such-provider";Pe(Rt(f.providerData).has(g)===_,f.auth,T)})).apply(this,arguments)}function Uu(_,f){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,a.Z)(function*(_,f,g=!1){const{auth:w}=_,T="reauthenticate";try{const M=yield _r(_,Te(w,T,f,_),g);Pe(M.idToken,w,"internal-error");const B=Un(M.idToken);Pe(B,w,"internal-error");const{sub:te}=B;return Pe(_.uid===te,w,"user-mismatch"),br._forOperation(_,T,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Kt(w,"user-mismatch"),M}})).apply(this,arguments)}function Vd(_,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,a.Z)(function*(_,f,g=!1){const w="signIn",T=yield Te(_,w,f),M=yield br._fromIdTokenResponse(_,w,T);return g||(yield _._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Io(_,f){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(_,f){return Vd(an(_),f)})).apply(this,arguments)}function Mi(_,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,a.Z)(function*(_,f){const g=(0,F.m9)(_);return yield Or(!1,g,f.providerId),oa(g,f)})).apply(this,arguments)}function zi(_,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,a.Z)(function*(_,f){return Uu((0,F.m9)(_),f)})).apply(this,arguments)}function Bd(_,f){return ua.apply(this,arguments)}function ua(){return(ua=(0,a.Z)(function*(_,f){return z(_,"POST","/v1/accounts:signInWithCustomToken",gn(_,f))})).apply(this,arguments)}function za(){return(za=(0,a.Z)(function*(_,f){const g=an(_),w=yield Bd(g,{token:f,returnSecureToken:!0}),T=yield br._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class la{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?To._fromServerResponse(f,g):Kt(f,"internal-error")}}class To extends la{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new To(g)}}function ca(_,f,g){var w;Pe((null===(w=g.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),Pe(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Pe(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Pe(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function rc(){return(rc=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_),T={requestType:"PASSWORD_RESET",email:f};g&&ca(w,T,g),yield qa(w,T)})).apply(this,arguments)}function da(){return(da=(0,a.Z)(function*(_,f,g){yield Lf((0,F.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ya(){return(Ya=(0,a.Z)(function*(_,f){yield ta((0,F.m9)(_),{oobCode:f})})).apply(this,arguments)}function Zu(_,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,a.Z)(function*(_,f){const g=(0,F.m9)(_),w=yield Lf(g,{oobCode:f}),T=w.requestType;switch(Pe(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pe(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pe(w.mfaInfo,g,"internal-error");default:Pe(w.email,g,"internal-error")}let M=null;return w.mfaInfo&&(M=la._fromServerResponse(an(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function Zd(){return(Zd=(0,a.Z)(function*(_,f){const{data:g}=yield Zu((0,F.m9)(_),f);return g.email})).apply(this,arguments)}function Wn(){return(Wn=(0,a.Z)(function*(_,f,g){const w=an(_),T=yield Eo(w,{returnSecureToken:!0,email:f,password:g}),M=yield br._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(M.user),M})).apply(this,arguments)}function ha(){return(ha=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};Pe(g.handleCodeInApp,w,"argument-error"),g&&ca(w,T,g),yield ec(w,T)})).apply(this,arguments)}function jf(){return(jf=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_),T=wr.credentialWithLink(f,g||ur());return Pe(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Io(w,T)})).apply(this,arguments)}function qd(_,f){return qf.apply(this,arguments)}function qf(){return(qf=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:createAuthUri",gn(_,f))})).apply(this,arguments)}function zs(){return(zs=(0,a.Z)(function*(_,f){const w={identifier:f,continueUri:bn()?ur():"http://localhost"},{signinMethods:T}=yield qd((0,F.m9)(_),w);return T||[]})).apply(this,arguments)}function Hu(){return(Hu=(0,a.Z)(function*(_,f){const g=(0,F.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&ca(g.auth,T,f);const{email:M}=yield Vg(g.auth,T);M!==_.email&&(yield _.reload())})).apply(this,arguments)}function Hd(){return(Hd=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&ca(w.auth,M,g);const{email:B}=yield wo(w.auth,M);B!==_.email&&(yield _.reload())})).apply(this,arguments)}function ps(_,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,a.Z)(function*(_,f){return zt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function $d(){return($d=(0,a.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,F.m9)(_),M={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},B=yield _r(w,ps(w.auth,M));w.displayName=B.displayName||null,w.photoURL=B.photoUrl||null;const te=w.providerData.find(({providerId:Re})=>"password"===Re);te&&(te.displayName=w.displayName,te.photoURL=w.photoURL),yield w._updateTokensIfNecessary(B)})).apply(this,arguments)}function ac(_,f,g){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,a.Z)(function*(_,f,g){const{auth:w}=_,M={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const B=yield _r(_,Uf(w,M));yield _._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class Ja{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class Gu extends Ja{constructor(f,g,w,T){super(f,g,w),this.username=T}}class Tn extends Ja{constructor(f,g){super(f,"facebook.com",g)}}class gs extends Gu{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Xe extends Ja{constructor(f,g){super(f,"google.com",g)}}class ms extends Gu{constructor(f,g,w){super(f,"twitter.com",g,w)}}function gi(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Gf(_){var f,g;if(!_)return null;const{providerId:w}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},M=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const B=null===(g=null===(f=Un(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(B)return new Ja(M,"anonymous"!==B&&"custom"!==B?B:null)}if(!w)return null;switch(w){case"facebook.com":return new Tn(M,T);case"github.com":return new gs(M,T);case"google.com":return new Xe(M,T);case"twitter.com":return new ms(M,T,_.screenName||null);case"custom":case"anonymous":return new Ja(M,null);default:return new Ja(M,w,T)}}(g)}class Ao{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ao("enroll",f)}static _fromMfaPendingCredential(f){return new Ao("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ao._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return Ao._fromIdtoken(f.multiFactorSession.idToken)}return null}}class So{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=an(f),T=g.customData._serverResponse,M=(T.mfaInfo||[]).map(te=>la._fromServerResponse(w,te));Pe(T.mfaPendingCredential,w,"internal-error");const B=Ao._fromMfaPendingCredential(T.mfaPendingCredential);return new So(B,M,function(){var te=(0,a.Z)(function*(Re){const Se=yield Re._process(w,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Qe=Object.assign(Object.assign({},T),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(g.operationType){case"signIn":const it=yield br._fromIdTokenResponse(w,g.operationType,Qe);return yield w._updateCurrentUser(it.user),it;case"reauthenticate":return Pe(g.user,w,"internal-error"),br._forOperation(g.user,g.operationType,Qe);default:Kt(w,"internal-error")}});return function(Re){return te.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,a.Z)(function*(){return g.signInResolver(f)})()}}function zu(_,f){return zt(_,"POST","/v2/accounts/mfaEnrollment:start",gn(_,f))}class tu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>la._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new tu(f)}getSession(){var f=this;return(0,a.Z)(function*(){return Ao._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,a.Z)(function*(){const T=f,M=yield w.getSession(),B=yield _r(w.user,T._process(w.user.auth,M,g));return yield w.user._updateTokensIfNecessary(B),w.user.reload()})()}unenroll(f){var g=this;return(0,a.Z)(function*(){const w="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),M=yield _r(g.user,function Ku(_,f){return zt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",gn(_,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:B})=>B!==w),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(B){if("auth/user-token-expired"!==B.code)throw B}})()}}const Yu=new WeakMap,fa="__sak";class xo{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(fa,"1"),this.storage.removeItem(fa),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Po=(()=>{class _ extends xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mo(){const _=(0,F.z$)();return Zs(_)||cn(_)}()&&function qi(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=fi(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),M=this.localCache[w];T!==M&&g(w,M,T)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((te,Re,Se)=>{this.notifyListeners(te,Se)});const T=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(T);if(g.newValue!==te)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!w)return}const M=()=>{const te=this.storage.getItem(T);!w&&this.localCache[T]===te||this.notifyListeners(T,te)},B=this.storage.getItem(T);!function Ba(){return(0,F.w1)()&&10===document.documentMode}()||B===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var T=()=>super._set,M=this;return(0,a.Z)(function*(){yield T().call(M,g,w),M.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,T=this;return(0,a.Z)(function*(){const M=yield w().call(T,g);return T.localCache[g]=JSON.stringify(M),M})()}_remove(g){var w=()=>super._remove,T=this;return(0,a.Z)(function*(){yield w().call(T,g),delete T.localCache[g]})()}}return _.type="LOCAL",_})(),Ki=(()=>{class _ extends xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return _.type="SESSION",_})();let lc=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(M=>M.isListeningto(g));if(w)return w;const T=new _(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,a.Z)(function*(){const T=g,{eventId:M,eventType:B,data:te}=T.data,Re=w.handlersMap[B];if(!(null==Re?void 0:Re.size))return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:B});const Se=Array.from(Re).map(function(){var it=(0,a.Z)(function*(Ut){return Ut(T.origin,te)});return function(Ut){return it.apply(this,arguments)}}()),Qe=yield function Vn(_){return Promise.all(_.map(function(){var f=(0,a.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Se);T.ports[0].postMessage({status:"done",eventId:M,eventType:B,response:Qe})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function _s(_="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return _+g}class er{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var T=this;return(0,a.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let B,te;return new Promise((Re,Se)=>{const Qe=_s("",20);M.port1.start();const it=setTimeout(()=>{Se(new Error("unsupported_event"))},w);te={messageChannel:M,onMessage(Ut){const fr=Ut;if(fr.data.eventId===Qe)switch(fr.data.status){case"ack":clearTimeout(it),B=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Re(fr.data.response);break;default:clearTimeout(it),clearTimeout(B),Se(new Error("invalid_response"))}}},T.handlers.add(te),M.port1.addEventListener("message",te.onMessage),T.target.postMessage({eventType:f,eventId:Qe,data:g},[M.port2])}).finally(()=>{te&&T.removeMessageHandler(te)})})()}}function tn(){return window}function Yi(){return void 0!==tn().WorkerGlobalScope&&"function"==typeof tn().importScripts}function Er(){return(Er=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Yd="firebaseLocalStorageDb",pa="firebaseLocalStorage",Qu="fbase_key";class cc{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function dc(_,f){return _.transaction([pa],f?"readwrite":"readonly").objectStore(pa)}function ko(){const _=indexedDB.open(Yd,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(pa,{keyPath:Qu})}catch(T){g(T)}}),_.addEventListener("success",(0,a.Z)(function*(){const w=_.result;w.objectStoreNames.contains(pa)?f(w):(w.close(),yield function Oy(){const _=indexedDB.deleteDatabase(Yd);return new cc(_).toPromise()}(),f(yield ko()))}))})}function ti(_,f,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,a.Z)(function*(_,f,g){const w=dc(_,!0).put({[Qu]:f,value:g});return new cc(w).toPromise()})).apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(_,f){const g=dc(_,!1).get(f),w=yield new cc(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Qs(_,f){const g=dc(_,!0).delete(f);return new cc(g).toPromise()}const hr=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,a.Z)(function*(){return g.db||(g.db=yield ko()),g.db})()}_withRetries(g){var w=this;return(0,a.Z)(function*(){let T=0;for(;;)try{const M=yield w._openDb();return yield g(M)}catch(M){if(T++>3)throw M;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,a.Z)(function*(){return Yi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,a.Z)(function*(){g.receiver=lc._getInstance(function dr(){return Yi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,a.Z)(function*(T,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(T,M){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,a.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,a.Z)(function*(){var w,T;if(g.activeServiceWorker=yield function Ks(){return Er.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new er(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(w=M[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,a.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ei(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ko();return yield ti(g,fa,"1"),yield Qs(g,fa),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,a.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var T=this;return(0,a.Z)(function*(){return T._withPendingWrite((0,a.Z)(function*(){return yield T._withRetries(M=>ti(M,g,w)),T.localCache[g]=w,T.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,a.Z)(function*(){const T=yield w._withRetries(M=>function vs(_,f){return Dn.apply(this,arguments)}(M,g));return w.localCache[g]=T,T})()}_remove(g){var w=this;return(0,a.Z)(function*(){return w._withPendingWrite((0,a.Z)(function*(){return yield w._withRetries(T=>Qs(T,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,a.Z)(function*(){const w=yield g._withRetries(B=>{const te=dc(B,!1).getAll();return new cc(te).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:B,value:te}of w)M.add(B),JSON.stringify(g.localCache[B])!==JSON.stringify(te)&&(g.notifyListeners(B,te),T.push(B));for(const B of Object.keys(g.localCache))g.localCache[B]&&!M.has(B)&&(g.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function ws(_,f){return zt(_,"POST","/v2/accounts/mfaSignIn:start",gn(_,f))}function Js(){return(Js=(0,a.Z)(function*(_){return(yield zt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jd(_){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=T=>{const M=xn("internal-error");M.customData=T,g(M)},w.type="text/javascript",w.charset="UTF-8",function hc(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function Xu(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Xs=1e12;class ht{constructor(f){this.auth=f,this.counter=Xs,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new ru(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||Xs;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Xs))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,a.Z)(function*(){var w;return null===(w=g._widgets.get(f||Xs))||void 0===w||w.execute(),""})()}}class ru{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;Pe(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ni(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const th=Xu("rcb"),fc=new at(3e4,6e4);class zf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!tn().grecaptcha}load(f,g=""){return Pe(function Kf(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(tn().grecaptcha):new Promise((w,T)=>{const M=tn().setTimeout(()=>{T(xn(f,"network-request-failed"))},fc.get());tn()[th]=()=>{tn().clearTimeout(M),delete tn()[th];const te=tn().grecaptcha;if(!te)return void T(xn(f,"internal-error"));const Re=te.render;te.render=(Se,Qe)=>{const it=Re(Se,Qe);return this.counter++,it},this.hostLanguage=g,w(te)},Jd(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:th,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),T(xn(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!tn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pr{load(f){return(0,a.Z)(function*(){return new ht(f)})()}clearedOneInstance(){}}const el="recaptcha",pc={theme:"light",type:"image"};class tl{constructor(f,g=Object.assign({},pc),w){this.parameters=g,this.type=el,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(w),this.isInvisible="invisible"===this.parameters.size,Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;Pe(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pr:new zf,this.validateStartingState()}verify(){var f=this;return(0,a.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(M=>{const B=te=>{!te||(f.tokenChangeListeners.delete(B),M(te))};f.tokenChangeListeners.add(B),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Pe(!this.parameters.sitekey,this.auth,"argument-error"),Pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=tn()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,a.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,a.Z)(function*(){Pe(bn()&&!Yi(),f.auth,"internal-error"),yield function Cs(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ju(_){return Js.apply(this,arguments)}(f.auth);Pe(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tr{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Hs._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function nl(){return(nl=(0,a.Z)(function*(_,f,g){const w=an(_),T=yield su(w,f,(0,F.m9)(g));return new tr(T,M=>Io(w,M))})).apply(this,arguments)}function iu(){return(iu=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_);yield Or(!1,w,"phone");const T=yield su(w.auth,f,(0,F.m9)(g));return new tr(T,M=>Mi(w,M))})).apply(this,arguments)}function mc(){return(mc=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_),T=yield su(w.auth,f,(0,F.m9)(g));return new tr(T,M=>zi(w,M))})).apply(this,arguments)}function su(_,f,g){return I.apply(this,arguments)}function I(){return(I=(0,a.Z)(function*(_,f,g){var w;const T=yield g.verify();try{let M;if(Pe("string"==typeof T,_,"argument-error"),Pe(g.type===el,_,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const B=M.session;if("phoneNumber"in M)return Pe("enroll"===B.type,_,"internal-error"),(yield zu(_,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Pe("signin"===B.type,_,"internal-error");const te=(null===(w=M.multiFactorHint)||void 0===w?void 0:w.uid)||M.multiFactorUid;return Pe(te,_,"missing-multi-factor-info"),(yield ws(_,{mfaPendingCredential:B.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield Xr(_,{phoneNumber:M.phoneNumber,recaptchaToken:T});return B}}finally{g._reset()}})).apply(this,arguments)}function P(){return(P=(0,a.Z)(function*(_,f){yield oa((0,F.m9)(_),f)})).apply(this,arguments)}let U=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=an(g)}verifyPhoneNumber(g,w){return su(this.auth,g,(0,F.m9)(w))}static credential(g,w){return Hs._fromVerification(g,w)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:T}=g;return w&&T?Hs._fromTokenResponse(w,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Y(_,f){return f?Yt(f):(Pe(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Q extends Za{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Hi(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Hi(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Hi(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function ke(_){return Vd(_.auth,new Q(_),_.bypassAuthState)}function Ye(_){const{auth:f,user:g}=_;return Pe(g,f,"internal-error"),Uu(g,new Q(_),_.bypassAuthState)}function lt(_){return bt.apply(this,arguments)}function bt(){return(bt=(0,a.Z)(function*(_){const{auth:f,user:g}=_;return Pe(g,f,"internal-error"),oa(g,new Q(_),_.bypassAuthState)})).apply(this,arguments)}class Vt{constructor(f,g,w,T,M=!1){this.auth=f,this.resolver=w,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,a.Z)(function*(w,T){f.pendingPromise={resolve:w,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(w,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,a.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:M,tenantId:B,error:te,type:Re}=f;if(te)return void g.reject(te);const Se={auth:g.auth,requestUri:w,sessionId:T,tenantId:B||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Re)(Se))}catch(Qe){g.reject(Qe)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ke;case"linkViaPopup":case"linkViaRedirect":return lt;case"reauthViaPopup":case"reauthViaRedirect":return Ye;default:Kt(this.auth,"internal-error")}}resolve(f){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tt=new at(2e3,1e4);function nn(){return(nn=(0,a.Z)(function*(_,f,g){const w=an(_);di(_,f,pi);const T=Y(w,g);return new _i(w,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function ki(){return(ki=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_);di(w.auth,f,pi);const T=Y(w.auth,g);return new _i(w.auth,"reauthViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}function Qi(){return(Qi=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_);di(w.auth,f,pi);const T=Y(w.auth,g);return new _i(w.auth,"linkViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}let _i=(()=>{class _ extends Vt{constructor(g,w,T,M,B){super(g,w,M,B),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,a.Z)(function*(){const w=yield g.execute();return Pe(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,a.Z)(function*(){Ln(1===g.filter.length,"Popup operations only handle one event");const w=_s();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(xn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,T;this.pollId=(null===(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Tt.get())};g()}}return _.currentPopupAction=null,_})();const ou=new Map;class Gg extends Vt{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,a.Z)(function*(){let w=ou.get(g.auth._key());if(!w){try{const M=(yield function Py(_,f){return ma.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(M)}catch(T){w=()=>Promise.reject(T)}ou.set(g.auth._key(),w)}return g.bypassAuthState||ou.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,a.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const T=yield w.auth._redirectUserForId(f.eventId);if(T)return w.user=T,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function ma(){return(ma=(0,a.Z)(function*(_,f){const g=ky(f),w=Wg(_);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(g));return yield w._remove(g),T})).apply(this,arguments)}function au(_,f){return rl.apply(this,arguments)}function rl(){return(rl=(0,a.Z)(function*(_,f){return Wg(_)._set(ky(f),"true")})).apply(this,arguments)}function rh(_,f){ou.set(_._key(),f)}function Wg(_){return Yt(_._redirectPersistence)}function ky(_){return hi("pendingRedirect",_.config.apiKey,_.name)}function _c(){return(_c=(0,a.Z)(function*(_,f,g){const w=an(_);di(_,f,pi);const T=Y(w,g);return yield au(T,w),T._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function Ni(){return(Ni=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_);di(w.auth,f,pi);const T=Y(w.auth,g);yield au(T,w.auth);const M=yield ih(w);return T._openRedirect(w.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Qg(){return(Qg=(0,a.Z)(function*(_,f,g){const w=(0,F.m9)(_);di(w.auth,f,pi);const T=Y(w.auth,g);yield Or(!1,w,f.providerId),yield au(T,w.auth);const M=yield ih(w);return T._openRedirect(w.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function sl(){return(sl=(0,a.Z)(function*(_,f){return yield an(_)._initializationPromise,yc(_,f,!1)})).apply(this,arguments)}function yc(_,f){return uu.apply(this,arguments)}function uu(){return(uu=(0,a.Z)(function*(_,f,g=!1){const w=an(_),T=Y(w,f),B=yield new Gg(w,T,g).execute();return B&&!g&&(delete B.user._redirectEventId,yield w._persistUserIfCurrent(B.user),yield w._setRedirectUser(null,f)),B})).apply(this,arguments)}function ih(_){return ol.apply(this,arguments)}function ol(){return(ol=(0,a.Z)(function*(_){const f=_s(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class sh{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function vc(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xg(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!Xg(f)){const T=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(xn(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oh(f))}saveEventToCache(f){this.cachedEventUids.add(oh(f)),this.lastProcessedEventTime=Date.now()}}function oh(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Xg({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ro(_){return lu.apply(this,arguments)}function lu(){return(lu=(0,a.Z)(function*(_,f={}){return zt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Ry=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yf=/^https?/;function uh(){return(uh=(0,a.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Ro(_);for(const g of f)try{if(Fy(g))return}catch(w){}Kt(_,"unauthorized-domain")})).apply(this,arguments)}function Fy(_){const f=ur(),{protocol:g,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const B=new URL(_);return""===B.hostname&&""===w?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&B.hostname===w}if(!Yf.test(g))return!1;if(Ry.test(_))return w===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const Ly=new at(3e4,6e4);function Qf(){const _=tn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let lh=null;function Uy(_){return lh=lh||function Jf(_){return new Promise((f,g)=>{var w,T,M;function B(){Qf(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Qf(),g(xn(_,"network-request-failed"))},timeout:Ly.get()})}if(null===(T=null===(w=tn().gapi)||void 0===w?void 0:w.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=tn().gapi)||void 0===M?void 0:M.load)){const te=Xu("iframefcb");return tn()[te]=()=>{gapi.load?B():g(xn(_,"network-request-failed"))},Jd(`https://apis.google.com/js/api.js?onload=${te}`).catch(Re=>g(Re))}B()}}).catch(f=>{throw lh=null,f})}(_),lh}const Vy=new at(5e3,15e3),dh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function no(_){const f=_.config;Pe(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?pt(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:_.name,v:oe.SDK_VERSION},T=hh.get(_.config.apiHost);T&&(w.eid=T);const M=_._getFrameworks();return M.length&&(w.fw=M.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function wc(){return wc=(0,a.Z)(function*(_){const f=yield Uy(_),g=tn().gapi;return Pe(g,_,"internal-error"),f.open({where:document.body,url:no(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dh,dontclear:!0},w=>new Promise(function(){var T=(0,a.Z)(function*(M,B){yield w.restyle({setHideOnLeave:!1});const te=xn(_,"network-request-failed"),Re=tn().setTimeout(()=>{B(te)},Vy.get());function Se(){tn().clearTimeout(Re),M(w)}w.ping(Se).then(Se,()=>{B(te)})});return function(M,B){return T.apply(this,arguments)}}()))}),wc.apply(this,arguments)}const em={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fh{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ph(_,f,g,w,T,M){Pe(_.config.authDomain,_,"auth-domain-config-required"),Pe(_.config.apiKey,_,"invalid-api-key");const B={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:w,v:oe.SDK_VERSION,eventId:T};if(f instanceof pi){f.setDefaultLanguage(_.languageCode),B.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(B.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Re,Se]of Object.entries(M||{}))B[Re]=Se}if(f instanceof Wi){const Re=f.getScopes().filter(Se=>""!==Se);Re.length>0&&(B.scopes=Re.join(","))}_.tenantId&&(B.tid=_.tenantId);const te=B;for(const Re of Object.keys(te))void 0===te[Re]&&delete te[Re];return`${function Cc({config:_}){return _.emulator?pt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,F.xO)(te).slice(1)}`}const du="webStorageSupport";class ll extends class gh{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return ut("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ll(f)}_finalizeEnroll(f,g,w){return function kn(_,f){return zt(_,"POST","/v2/accounts/mfaEnrollment:finalize",gn(_,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Qd(_,f){return zt(_,"POST","/v2/accounts/mfaSignIn:finalize",gn(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rm=(()=>{class _{constructor(){}static assertion(g){return ll._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var bc="@firebase/auth";class nr{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,a.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var T;f((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Lo(){return window}function np(){return(np=(0,a.Z)(function*(_,f,g){var w;const{BuildInfo:T}=Lo();Ln(f.sessionId,"AuthEvent did not contain a session ID");const M=yield hu(f.sessionId),B={};return cn()?B.ibi=T.packageName:on()?B.apn=T.packageName:Kt(_,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=M,ph(_,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,B)})).apply(this,arguments)}function rp(){return(rp=(0,a.Z)(function*(_){const{BuildInfo:f}=Lo(),g={};cn()?g.iosBundleId=f.packageName:on()?g.androidPackageName=f.packageName:Kt(_,"operation-not-supported-in-this-environment"),yield Ro(_,g)})).apply(this,arguments)}function _a(){return(_a=(0,a.Z)(function*(_,f,g){const{cordova:w}=Lo();let T=()=>{};try{yield new Promise((M,B)=>{let te=null;function Re(){var it;M();const Ut=null===(it=w.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof Ut&&Ut(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Se(){te||(te=window.setTimeout(()=>{B(xn(_,"redirect-cancelled-by-user"))},2e3))}function Qe(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}f.addPassiveListener(Re),document.addEventListener("resume",Se,!1),on()&&document.addEventListener("visibilitychange",Qe,!1),T=()=>{f.removePassiveListener(Re),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",Qe,!1),te&&window.clearTimeout(te)}})}finally{T()}})).apply(this,arguments)}function hu(_){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,a.Z)(function*(_){const f=Ic(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ic(_){if(Ln(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let w=0;w<_.length;w++)g[w]=_.charCodeAt(w);return g}!function Ji(_){(0,oe._registerComponent)(new mt.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:M,authDomain:B}=w.options;return((te,Re)=>{Pe(M&&!M.includes(":"),"invalid-api-key",{appName:te.name}),Pe(!(null==B?void 0:B.includes(":")),"argument-error",{appName:te.name});const Se={apiKey:M,authDomain:B,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ql(_)},Qe=new js(te,Re,Se);return function Ai(_,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Yt);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Qe,g),Qe})(w,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new mt.wA("auth-internal",f=>{const g=an(f.getProvider("auth").getImmediate());return new nr(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(bc,"0.20.2",function ep(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,oe.registerVersion)(bc,"0.20.2","esm2017")}("Browser");class Tc extends sh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,a.Z)(function*(){yield f.initPromise})()}}function sm(_){return yh.apply(this,arguments)}function yh(){return(yh=(0,a.Z)(function*(_){const f=yield vh()._get(fu(_));return f&&(yield vh()._remove(fu(_))),f})).apply(this,arguments)}function om(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);_.push(f.charAt(w))}return _.join("")}function vh(){return Yt(Po)}function fu(_){return hi("authEvent",_.config.apiKey,_.name)}function Uo(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,F.zd)(g.join("?"))}function am(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xn("no-auth-event")}}function xc(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function um(_=(0,F.z$)()){return!("file:"!==xc()&&"ionic:"!==xc()&&"capacitor:"!==xc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function dm(){try{const _=self.localStorage,f=_s();if(_)return _.setItem(f,"1"),_.removeItem(f),!function cm(_=(0,F.z$)()){return function Yy(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Qy(_=(0,F.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,F.hl)()}catch(_){return wh()&&(0,F.hl)()}return!1}function wh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function up(){return(function Ky(){return"http:"===xc()||"https:"===xc()}()||(0,F.ru)()||um())&&!function lm(){return(0,F.b$)()||(0,F.UG)()}()&&dm()&&!wh()}function hm(){return um()&&"undefined"!=typeof document}function Vo(){return(Vo=(0,a.Z)(function*(){return!!hm()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Ri={LOCAL:"local",NONE:"none",SESSION:"session"},Mc=Pe,Ch="persistence";function Xi(_){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,a.Z)(function*(_){yield _._initializationPromise;const f=fm(),g=hi(Ch,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function fm(){var _;try{return(null===(_=function Bo(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const pm=Pe;class yi{constructor(){this.browserResolver=Yt(class Zy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ki,this._completeRedirectFn=yc,this._overrideRedirectResult=rh}_openPopup(f,g,w,T){var M=this;return(0,a.Z)(function*(){var B;Ln(null===(B=M.eventManagers[f._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const te=ph(f,g,w,ur(),T);return function Fo(_,f,g,w=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-w)/2,0).toString();let te="";const Re=Object.assign(Object.assign({},em),{width:w.toString(),height:T.toString(),top:M,left:B}),Se=(0,F.z$)().toLowerCase();g&&(te=Va(Se)?"_blank":g),Jo(Se)&&(f=f||"http://localhost",Re.scrollbars="yes");const Qe=Object.entries(Re).reduce((Ut,[fr,Zo])=>`${Ut}${fr}=${Zo},`,"");if(function Td(_=(0,F.z$)()){var f;return cn(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Se)&&"_self"!==te)return function Xf(_,f){const g=document.createElement("a");g.href=_,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",te),new fh(null);const it=window.open(f||"",te,Qe);Pe(it,_,"popup-blocked");try{it.focus()}catch(Ut){}return new fh(it)}(f,te,_s())})()}_openRedirect(f,g,w,T){var M=this;return(0,a.Z)(function*(){return yield M._originValidation(f),function ys(_){tn().location.href=_}(ph(f,g,w,ur(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:M}=this.eventManagers[g];return T?Promise.resolve(T):(Ln(M,"If manager is not set, promise should be"),M)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,a.Z)(function*(){const w=yield function al(_){return wc.apply(this,arguments)}(f),T=new sh(f);return w.register("authEvent",M=>(Pe(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=w,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(du,{type:du},T=>{var M;const B=null===(M=null==T?void 0:T[0])||void 0===M?void 0:M[du];void 0!==B&&g(!!B),Kt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ah(_){return uh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return fi()||Zs()||cn()}}),this.cordovaResolver=Yt(class Dc{constructor(){this._redirectPersistence=Ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yc,this._overrideRedirectResult=rh}_initialize(f){var g=this;return(0,a.Z)(function*(){const w=f._key();let T=g.eventManagers.get(w);return T||(T=new Tc(f),g.eventManagers.set(w,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Kt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,T){var M=this;return(0,a.Z)(function*(){!function jr(_){var f,g,w,T,M,B,te,Re,Se,Qe;const it=Lo();Pe("function"==typeof(null===(f=null==it?void 0:it.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pe(void 0!==(null===(g=null==it?void 0:it.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pe("function"==typeof(null===(M=null===(T=null===(w=null==it?void 0:it.cordova)||void 0===w?void 0:w.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(Re=null===(te=null===(B=null==it?void 0:it.cordova)||void 0===B?void 0:B.plugins)||void 0===te?void 0:te.browsertab)||void 0===Re?void 0:Re.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(Qe=null===(Se=null==it?void 0:it.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===Qe?void 0:Qe.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const B=yield M._initialize(f);yield B.initialized(),B.resetRedirect(),function sC(){ou.clear()}(),yield M._originValidation(f);const te=function sp(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:om(),postBody:null,tenantId:_.tenantId,error:xn(_,"no-auth-event")}}(f,w,T);yield function qy(_,f){return vh()._set(fu(_),f)}(f,te);const Re=yield function _h(_,f,g){return np.apply(this,arguments)}(f,te,g),Se=yield function lC(_){const{cordova:f}=Lo();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let T=null;w?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function dn(_=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(T)})})}(Re);return function ip(_,f,g){return _a.apply(this,arguments)}(f,B,Se)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function jy(_){return rp.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:T,BuildInfo:M}=Lo(),B=setTimeout((0,a.Z)(function*(){yield sm(f),g.onEvent(am())}),500),te=function(){var Qe=(0,a.Z)(function*(it){clearTimeout(B);const Ut=yield sm(f);let fr=null;Ut&&(null==it?void 0:it.url)&&(fr=function op(_,f){var g,w;const T=function $y(_){const f=Uo(_),g=f.link?decodeURIComponent(f.link):void 0,w=Uo(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Uo(T).link||T||w||g||_}(f);if(T.includes("/__/auth/callback")){const M=Uo(T),B=M.firebaseError?function Hy(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(M.firebaseError)):null,te=null===(w=null===(g=null==B?void 0:B.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Re=te?xn(te):null;return Re?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Ut,it.url)),g.onEvent(fr||am())});return function(Ut){return Qe.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,te);const Re=T,Se=`${M.packageName.toLowerCase()}://`;Lo().handleOpenURL=function(){var Qe=(0,a.Z)(function*(it){if(it.toLowerCase().startsWith(Se)&&te({url:it}),"function"==typeof Re)try{Re(it)}catch(Ut){console.error(Ut)}});return function(it){return Qe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ki,this._completeRedirectFn=yc,this._overrideRedirectResult=rh}_initialize(f){var g=this;return(0,a.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,T){var M=this;return(0,a.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,w,T)})()}_openRedirect(f,g,w,T){var M=this;return(0,a.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,w,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return hm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,a.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Jy(){return Vo.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function cp(_){return _.unwrap()}function dp(_){return bh(_)}function bh(_){const{_tokenResponse:f}=_ instanceof F.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return U.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Gn;break;case"facebook.com":w=Zr;break;case"github.com":w=ra;break;case"twitter.com":w=gt;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:B,pendingToken:te,nonce:Re}=f;return M||B||T||te?te?g.startsWith("saml.")?Cr._create(g,te):$i._fromParams({providerId:g,signInMethod:g,pendingToken:te,idToken:T,accessToken:M}):new Br(g).credential({idToken:T,accessToken:M,rawNonce:Re}):null}return _ instanceof F.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function Fi(_,f){return f.catch(g=>{throw g instanceof F.ZR&&function Pc(_,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new mm(_,function Wu(_,f){var g;const w=(0,F.m9)(_),T=f;return Pe(f.customData.operationType,w,"argument-error"),Pe(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),So._fromError(w,T)}(_,f));else if(w){const T=bh(f),M=f;T&&(M.credential=T,M.tenantId=w.tenantId||void 0,M.email=w.email||void 0,M.phoneNumber=w.phoneNumber||void 0)}}(_,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:dp(g),additionalUserInfo:gi(g),user:ro.getOrCreate(T)}})}function ya(_,f){return kc.apply(this,arguments)}function kc(){return(kc=(0,a.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>Fi(_,g.confirm(w))}})).apply(this,arguments)}class mm{constructor(f,g){this.resolver=g,this.auth=function gm(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Fi(cp(this.auth),this.resolver.resolveSignIn(f))}}class ro{constructor(f){this._delegate=f,this.multiFactor=function Pi(_){const f=(0,F.m9)(_);return Yu.has(f)||Yu.set(f,tu._fromUser(f)),Yu.get(f)}(f)}static getOrCreate(f){return ro.USER_MAP.has(f)||ro.USER_MAP.set(f,new ro(f)),ro.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,a.Z)(function*(){return Fi(g.auth,Mi(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,a.Z)(function*(){return ya(w.auth,function gc(_,f,g){return iu.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,a.Z)(function*(){return Fi(g.auth,function eo(_,f,g){return Qi.apply(this,arguments)}(g._delegate,f,yi))})()}linkWithRedirect(f){var g=this;return(0,a.Z)(function*(){return yield Xi(an(g.auth)),function Kg(_,f,g){return function Yg(_,f,g){return Qg.apply(this,arguments)}(_,f,g)}(g._delegate,f,yi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,a.Z)(function*(){return Fi(g.auth,zi(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return ya(this.auth,function nh(_,f,g){return mc.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Fi(this.auth,function bs(_,f,g){return ki.apply(this,arguments)}(this._delegate,f,yi))}reauthenticateWithRedirect(f){var g=this;return(0,a.Z)(function*(){return yield Xi(an(g.auth)),function il(_,f,g){return function Es(_,f,g){return Ni.apply(this,arguments)}(_,f,g)}(g._delegate,f,yi)})()}sendEmailVerification(f){return function qu(_,f){return Hu.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,a.Z)(function*(){return yield function Ud(_,f){return hn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function $u(_,f){return ac((0,F.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function Gd(_,f){return ac((0,F.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function D(_,f){return P.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function $f(_,f){return $d.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Hf(_,f,g){return Hd.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ro.USER_MAP=new WeakMap;const pu=Pe;let _m=(()=>{class _{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;pu(T,"invalid-api-key",{appName:g.name}),pu(T,"invalid-api-key",{appName:g.name});const M="undefined"!=typeof window?yi:void 0;this._delegate=w.initialize({options:{persistence:ev(T,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(rn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Fg(_,f,g){const w=an(_);Pe(w._canInitEmulator,w,"emulator-config-failed"),Pe(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),M=Rf(f),{host:B,port:te}=function Si(_){const f=Rf(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const M=T[1];return{host:M,port:Ff(w.substr(M.length+1))}}{const[M,B]=w.split(":");return{host:M,port:Ff(B)}}}(f);w.config.emulator={url:`${M}//${B}${null===te?"":`:${te}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:B,port:te,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Lg(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,w)}applyActionCode(g){return function Zf(_,f){return Ya.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Zu(this._delegate,g)}confirmPasswordReset(g,w){return function ic(_,f,g){return da.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var T=this;return(0,a.Z)(function*(){return Fi(T._delegate,function Zg(_,f,g){return Wn.apply(this,arguments)}(T._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function oc(_,f){return zs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function sc(_,f){const g=$s.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,a.Z)(function*(){pu(up(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function No(_,f){return sl.apply(this,arguments)}(g._delegate,yi);return w?Fi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ac(_,f){an(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,T){const{next:M,error:B,complete:te}=vi(g,w,T);return this._delegate.onAuthStateChanged(M,B,te)}onIdTokenChanged(g,w,T){const{next:M,error:B,complete:te}=vi(g,w,T);return this._delegate.onIdTokenChanged(M,B,te)}sendSignInLinkToEmail(g,w){return function On(_,f,g){return ha.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Ka(_,f,g){return rc.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,a.Z)(function*(){let T;switch(function Xy(_,f){Mc(Object.values(Ri).includes(f),_,"invalid-persistence-type"),(0,F.b$)()?Mc(f!==Ri.SESSION,_,"unsupported-persistence-type"):(0,F.UG)()?Mc(f===Ri.NONE,_,"unsupported-persistence-type"):wh()?Mc(f===Ri.NONE||f===Ri.LOCAL&&(0,F.hl)(),_,"unsupported-persistence-type"):Mc(f===Ri.NONE||dm(),_,"unsupported-persistence-type")}(w._delegate,g),g){case Ri.SESSION:T=Ki;break;case Ri.LOCAL:T=(yield Yt(hr)._isAvailable())?hr:Po;break;case Ri.NONE:T=Qt;break;default:return Kt("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Fi(this._delegate,function nc(_){return Lu.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Fi(this._delegate,Io(this._delegate,g))}signInWithCustomToken(g){return Fi(this._delegate,function Bf(_,f){return za.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Fi(this._delegate,function cr(_,f,g){return Io((0,F.m9)(_),wr.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Fi(this._delegate,function jd(_,f,g){return jf.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return ya(this._delegate,function Bn(_,f,g){return nl.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,a.Z)(function*(){return pu(up(),w._delegate,"operation-not-supported-in-this-environment"),Fi(w._delegate,function Ir(_,f,g){return nn.apply(this,arguments)}(w._delegate,g,yi))})()}signInWithRedirect(g){var w=this;return(0,a.Z)(function*(){return pu(up(),w._delegate,"operation-not-supported-in-this-environment"),yield Xi(w._delegate),function Ny(_,f,g){return function zg(_,f,g){return _c.apply(this,arguments)}(_,f,g)}(w._delegate,g,yi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function ju(_,f){return Zd.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Ri,_})();function vi(_,f,g){let w=_;"function"!=typeof _&&({next:w,error:f,complete:g}=_);const T=w;return{next:B=>T(B&&ro.getOrCreate(B)),error:f,complete:g}}function ev(_,f){const g=function lp(_,f){const g=fm();if(!g)return[];const w=hi(Ch,_,f);switch(g.getItem(w)){case Ri.NONE:return[Qt];case Ri.LOCAL:return[hr,Ki];case Ri.SESSION:return[Ki];default:return[]}}(_,f);if("undefined"!=typeof self&&!g.includes(hr)&&g.push(hr),"undefined"!=typeof window)for(const w of[Po,Ki])g.includes(w)||g.push(w);return g.includes(Qt)||g.push(Qt),g}class cl{constructor(){this.providerId="phone",this._delegate=new U(cp(ee.Z.auth()))}static credential(f,g){return U.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}cl.PHONE_SIGN_IN_METHOD=U.PHONE_SIGN_IN_METHOD,cl.PROVIDER_ID=U.PROVIDER_ID;const Nc=Pe;class hp{constructor(f,g,w=ee.Z.app()){var T;Nc(null===(T=w.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new tl(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Eh(_){_.INTERNAL.registerComponent(new mt.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new _m(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wr,FacebookAuthProvider:Zr,GithubAuthProvider:ra,GoogleAuthProvider:Gn,OAuthProvider:Br,SAMLAuthProvider:Gs,PhoneAuthProvider:cl,PhoneMultiFactorGenerator:rm,RecaptchaVerifier:hp,TwitterAuthProvider:gt,Auth:_m,AuthCredential:Za,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.15")}(ee.Z)},8306:(ze,we,R)=>{R.d(we,{y:()=>j});var a=R(930),ee=R(727),F=R(8822),oe=R(4671);var ue=R(2416),ae=R(576),he=R(2806);let j=(()=>{class Ie{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const fe=new Ie;return fe.source=this,fe.operator=Be,fe}subscribe(Be,fe,pe){const Oe=function qe(Ie){return Ie&&Ie instanceof a.Lv||function re(Ie){return Ie&&(0,ae.m)(Ie.next)&&(0,ae.m)(Ie.error)&&(0,ae.m)(Ie.complete)}(Ie)&&(0,ee.Nn)(Ie)}(Be)?Be:new a.Hp(Be,fe,pe);return(0,he.x)(()=>{const{operator:Ze,source:Fe}=this;Oe.add(Ze?Ze.call(Oe,Fe):Fe?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(Be){try{return this._subscribe(Be)}catch(fe){Be.error(fe)}}forEach(Be,fe){return new(fe=G(fe))((pe,Oe)=>{let Ze;Ze=this.subscribe(Fe=>{try{Be(Fe)}catch(Ke){Oe(Ke),null==Ze||Ze.unsubscribe()}},Oe,pe)})}_subscribe(Be){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Be)}[F.L](){return this}pipe(...Be){return function _e(Ie){return 0===Ie.length?oe.y:1===Ie.length?Ie[0]:function(Be){return Ie.reduce((fe,pe)=>pe(fe),Be)}}(Be)(this)}toPromise(Be){return new(Be=G(Be))((fe,pe)=>{let Oe;this.subscribe(Ze=>Oe=Ze,Ze=>pe(Ze),()=>fe(Oe))})}}return Ie.create=Ne=>new Ie(Ne),Ie})();function G(Ie){var Ne;return null!==(Ne=null!=Ie?Ie:ue.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(ze,we,R)=>{R.d(we,{x:()=>ue});var a=R(8306),ee=R(727);const oe=(0,R(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=R(8737),_e=R(2806);let ue=(()=>{class he extends a.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const re=new ae(this,this);return re.operator=G,re}_throwIfClosed(){if(this.closed)throw new oe}next(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const re=this.observers.slice();for(const qe of re)qe.next(G)}})}error(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:re}=this;for(;re.length;)re.shift().error(G)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:re,isStopped:qe,observers:Ie}=this;return re||qe?ee.Lc:(Ie.push(G),new ee.w0(()=>(0,se.P)(Ie,G)))}_checkFinalizedStatuses(G){const{hasError:re,thrownError:qe,isStopped:Ie}=this;re?G.error(qe):Ie&&G.complete()}asObservable(){const G=new a.y;return G.source=this,G}}return he.create=(j,G)=>new ae(j,G),he})();class ae extends ue{constructor(j,G){super(),this.destination=j,this.source=G}next(j){var G,re;null===(re=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===re||re.call(G,j)}error(j){var G,re;null===(re=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===re||re.call(G,j)}complete(){var j,G;null===(G=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===G||G.call(j)}_subscribe(j){var G,re;return null!==(re=null===(G=this.source)||void 0===G?void 0:G.subscribe(j))&&void 0!==re?re:ee.Lc}}},930:(ze,we,R)=>{R.d(we,{Hp:()=>qe,Lv:()=>re});var a=R(576),ee=R(727),F=R(2416),oe=R(7849),se=R(5032);const _e=he("C",void 0,void 0);function he(pe,Oe,Ze){return{kind:pe,value:Oe,error:Ze}}var j=R(3410),G=R(2806);class re extends ee.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,ee.Nn)(Oe)&&Oe.add(this)):this.destination=fe}static create(Oe,Ze,Fe){return new qe(Oe,Ze,Fe)}next(Oe){this.isStopped?Be(function ae(pe){return he("N",pe,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?Be(function ue(pe){return he("E",void 0,pe)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?Be(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class qe extends re{constructor(Oe,Ze,Fe){let Ke;if(super(),(0,a.m)(Oe))Ke=Oe;else if(Oe){let De;({next:Ke,error:Ze,complete:Fe}=Oe),this&&F.v.useDeprecatedNextContext?(De=Object.create(Oe),De.unsubscribe=()=>this.unsubscribe()):De=Oe,Ke=null==Ke?void 0:Ke.bind(De),Ze=null==Ze?void 0:Ze.bind(De),Fe=null==Fe?void 0:Fe.bind(De)}this.destination={next:Ke?Ie(Ke):se.Z,error:Ie(null!=Ze?Ze:Ne),complete:Fe?Ie(Fe):se.Z}}}function Ie(pe,Oe){return(...Ze)=>{try{pe(...Ze)}catch(Fe){F.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Fe):(0,oe.h)(Fe)}}}function Ne(pe){throw pe}function Be(pe,Oe){const{onStoppedNotification:Ze}=F.v;Ze&&j.z.setTimeout(()=>Ze(pe,Oe))}const fe={closed:!0,next:se.Z,error:Ne,complete:se.Z}},727:(ze,we,R)=>{R.d(we,{Lc:()=>_e,w0:()=>se,Nn:()=>ue});var a=R(576);const F=(0,R(3888).d)(he=>function(G){he(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((re,qe)=>`${qe+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var oe=R(8737);class se{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ie of G)Ie.remove(this);else G.remove(this);const{initialTeardown:re}=this;if((0,a.m)(re))try{re()}catch(Ie){j=Ie instanceof F?Ie.errors:[Ie]}const{_teardowns:qe}=this;if(qe){this._teardowns=null;for(const Ie of qe)try{ae(Ie)}catch(Ne){j=null!=j?j:[],Ne instanceof F?j=[...j,...Ne.errors]:j.push(Ne)}}if(j)throw new F(j)}}add(j){var G;if(j&&j!==this)if(this.closed)ae(j);else{if(j instanceof se){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._teardowns=null!==(G=this._teardowns)&&void 0!==G?G:[]).push(j)}}_hasParent(j){const{_parentage:G}=this;return G===j||Array.isArray(G)&&G.includes(j)}_addParent(j){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(j),G):G?[G,j]:j}_removeParent(j){const{_parentage:G}=this;G===j?this._parentage=null:Array.isArray(G)&&(0,oe.P)(G,j)}remove(j){const{_teardowns:G}=this;G&&(0,oe.P)(G,j),j instanceof se&&j._removeParent(this)}}se.EMPTY=(()=>{const he=new se;return he.closed=!0,he})();const _e=se.EMPTY;function ue(he){return he instanceof se||he&&"closed"in he&&(0,a.m)(he.remove)&&(0,a.m)(he.add)&&(0,a.m)(he.unsubscribe)}function ae(he){(0,a.m)(he)?he():he.unsubscribe()}},2416:(ze,we,R)=>{R.d(we,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ze,we,R)=>{R.d(we,{E:()=>ee});const ee=new(R(8306).y)(se=>se.complete())},8996:(ze,we,R)=>{R.d(we,{D:()=>Ke});var a=R(8421),ee=R(5363),F=R(9468),_e=R(8306),ae=R(2202),he=R(576),j=R(9672);function re(De,Je){if(!De)throw new Error("Iterable cannot be null");return new _e.y(We=>{(0,j.f)(We,Je,()=>{const Ce=De[Symbol.asyncIterator]();(0,j.f)(We,Je,()=>{Ce.next().then(H=>{H.done?We.complete():We.next(H.value)})},0,!0)})})}var qe=R(3670),Ie=R(8239),Ne=R(1144),Be=R(6495),fe=R(2206),pe=R(4532),Oe=R(3260);function Ke(De,Je){return Je?function Fe(De,Je){if(null!=De){if((0,qe.c)(De))return function oe(De,Je){return(0,a.Xf)(De).pipe((0,F.R)(Je),(0,ee.Q)(Je))}(De,Je);if((0,Ne.z)(De))return function ue(De,Je){return new _e.y(We=>{let Ce=0;return Je.schedule(function(){Ce===De.length?We.complete():(We.next(De[Ce++]),We.closed||this.schedule())})})}(De,Je);if((0,Ie.t)(De))return function se(De,Je){return(0,a.Xf)(De).pipe((0,F.R)(Je),(0,ee.Q)(Je))}(De,Je);if((0,fe.D)(De))return re(De,Je);if((0,Be.T)(De))return function G(De,Je){return new _e.y(We=>{let Ce;return(0,j.f)(We,Je,()=>{Ce=De[ae.h](),(0,j.f)(We,Je,()=>{let H,ne;try{({value:H,done:ne}=Ce.next())}catch(ce){return void We.error(ce)}ne?We.complete():We.next(H)},0,!0)}),()=>(0,he.m)(null==Ce?void 0:Ce.return)&&Ce.return()})}(De,Je);if((0,Oe.L)(De))return function Ze(De,Je){return re((0,Oe.Q)(De),Je)}(De,Je)}throw(0,pe.z)(De)}(De,Je):(0,a.Xf)(De)}},8421:(ze,we,R)=>{R.d(we,{Xf:()=>qe});var a=R(5987),ee=R(1144),F=R(8239),oe=R(8306),se=R(3670),_e=R(2206),ue=R(4532),ae=R(6495),he=R(3260),j=R(576),G=R(7849),re=R(8822);function qe(Fe){if(Fe instanceof oe.y)return Fe;if(null!=Fe){if((0,se.c)(Fe))return function Ie(Fe){return new oe.y(Ke=>{const De=Fe[re.L]();if((0,j.m)(De.subscribe))return De.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,ee.z)(Fe))return function Ne(Fe){return new oe.y(Ke=>{for(let De=0;De<Fe.length&&!Ke.closed;De++)Ke.next(Fe[De]);Ke.complete()})}(Fe);if((0,F.t)(Fe))return function Be(Fe){return new oe.y(Ke=>{Fe.then(De=>{Ke.closed||(Ke.next(De),Ke.complete())},De=>Ke.error(De)).then(null,G.h)})}(Fe);if((0,_e.D)(Fe))return pe(Fe);if((0,ae.T)(Fe))return function fe(Fe){return new oe.y(Ke=>{for(const De of Fe)if(Ke.next(De),Ke.closed)return;Ke.complete()})}(Fe);if((0,he.L)(Fe))return function Oe(Fe){return pe((0,he.Q)(Fe))}(Fe)}throw(0,ue.z)(Fe)}function pe(Fe){return new oe.y(Ke=>{(function Ze(Fe,Ke){var De,Je,We,Ce;return(0,a.mG)(this,void 0,void 0,function*(){try{for(De=(0,a.KL)(Fe);!(Je=yield De.next()).done;)if(Ke.next(Je.value),Ke.closed)return}catch(H){We={error:H}}finally{try{Je&&!Je.done&&(Ce=De.return)&&(yield Ce.call(De))}finally{if(We)throw We.error}}Ke.complete()})})(Fe,Ke).catch(De=>Ke.error(De))})}},6451:(ze,we,R)=>{R.d(we,{T:()=>_e});var a=R(8189),ee=R(8421),F=R(515),oe=R(7669),se=R(8996);function _e(...ue){const ae=(0,oe.yG)(ue),he=(0,oe._6)(ue,1/0),j=ue;return j.length?1===j.length?(0,ee.Xf)(j[0]):(0,a.J)(he)((0,se.D)(j,ae)):F.E}},5403:(ze,we,R)=>{R.d(we,{Q:()=>ee});var a=R(930);class ee extends a.Lv{constructor(oe,se,_e,ue,ae){super(oe),this.onFinalize=ae,this._next=se?function(he){try{se(he)}catch(j){oe.error(j)}}:super._next,this._error=ue?function(he){try{ue(he)}catch(j){oe.error(j)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(he){oe.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;const{closed:se}=this;super.unsubscribe(),!se&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}},4004:(ze,we,R)=>{R.d(we,{U:()=>F});var a=R(4482),ee=R(5403);function F(oe,se){return(0,a.e)((_e,ue)=>{let ae=0;_e.subscribe(new ee.Q(ue,he=>{ue.next(oe.call(se,he,ae++))}))})}},8189:(ze,we,R)=>{R.d(we,{J:()=>F});var a=R(5577),ee=R(4671);function F(oe=1/0){return(0,a.z)(ee.y,oe)}},5577:(ze,we,R)=>{R.d(we,{z:()=>ae});var a=R(4004),ee=R(8421),F=R(4482),oe=R(9672),se=R(5403),ue=R(576);function ae(he,j,G=1/0){return(0,ue.m)(j)?ae((re,qe)=>(0,a.U)((Ie,Ne)=>j(re,Ie,qe,Ne))((0,ee.Xf)(he(re,qe))),G):("number"==typeof j&&(G=j),(0,F.e)((re,qe)=>function _e(he,j,G,re,qe,Ie,Ne,Be){const fe=[];let pe=0,Oe=0,Ze=!1;const Fe=()=>{Ze&&!fe.length&&!pe&&j.complete()},Ke=Je=>pe<re?De(Je):fe.push(Je),De=Je=>{Ie&&j.next(Je),pe++;let We=!1;(0,ee.Xf)(G(Je,Oe++)).subscribe(new se.Q(j,Ce=>{null==qe||qe(Ce),Ie?Ke(Ce):j.next(Ce)},()=>{We=!0},void 0,()=>{if(We)try{for(pe--;fe.length&&pe<re;){const Ce=fe.shift();Ne?(0,oe.f)(j,Ne,()=>De(Ce)):De(Ce)}Fe()}catch(Ce){j.error(Ce)}}))};return he.subscribe(new se.Q(j,Ke,()=>{Ze=!0,Fe()})),()=>{null==Be||Be()}}(re,qe,he,G)))}},5363:(ze,we,R)=>{R.d(we,{Q:()=>oe});var a=R(9672),ee=R(4482),F=R(5403);function oe(se,_e=0){return(0,ee.e)((ue,ae)=>{ue.subscribe(new F.Q(ae,he=>(0,a.f)(ae,se,()=>ae.next(he),_e),()=>(0,a.f)(ae,se,()=>ae.complete(),_e),he=>(0,a.f)(ae,se,()=>ae.error(he),_e)))})}},3099:(ze,we,R)=>{R.d(we,{B:()=>_e});var a=R(8996),ee=R(5698),F=R(7579),oe=R(930),se=R(4482);function _e(ae={}){const{connector:he=(()=>new F.x),resetOnError:j=!0,resetOnComplete:G=!0,resetOnRefCountZero:re=!0}=ae;return qe=>{let Ie=null,Ne=null,Be=null,fe=0,pe=!1,Oe=!1;const Ze=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Fe=()=>{Ze(),Ie=Be=null,pe=Oe=!1},Ke=()=>{const De=Ie;Fe(),null==De||De.unsubscribe()};return(0,se.e)((De,Je)=>{fe++,!Oe&&!pe&&Ze();const We=Be=null!=Be?Be:he();Je.add(()=>{fe--,0===fe&&!Oe&&!pe&&(Ne=ue(Ke,re))}),We.subscribe(Je),Ie||(Ie=new oe.Hp({next:Ce=>We.next(Ce),error:Ce=>{Oe=!0,Ze(),Ne=ue(Fe,j,Ce),We.error(Ce)},complete:()=>{pe=!0,Ze(),Ne=ue(Fe,G),We.complete()}}),(0,a.D)(De).subscribe(Ie))})(qe)}}function ue(ae,he,...j){return!0===he?(ae(),null):!1===he?null:he(...j).pipe((0,ee.q)(1)).subscribe(()=>ae())}},9468:(ze,we,R)=>{R.d(we,{R:()=>ee});var a=R(4482);function ee(F,oe=0){return(0,a.e)((se,_e)=>{_e.add(F.schedule(()=>se.subscribe(_e),oe))})}},5698:(ze,we,R)=>{R.d(we,{q:()=>oe});var a=R(515),ee=R(4482),F=R(5403);function oe(se){return se<=0?()=>a.E:(0,ee.e)((_e,ue)=>{let ae=0;_e.subscribe(new F.Q(ue,he=>{++ae<=se&&(ue.next(he),se<=ae&&ue.complete())}))})}},8505:(ze,we,R)=>{R.d(we,{b:()=>se});var a=R(576),ee=R(4482),F=R(5403),oe=R(4671);function se(_e,ue,ae){const he=(0,a.m)(_e)||ue||ae?{next:_e,error:ue,complete:ae}:_e;return he?(0,ee.e)((j,G)=>{var re;null===(re=he.subscribe)||void 0===re||re.call(he);let qe=!0;j.subscribe(new F.Q(G,Ie=>{var Ne;null===(Ne=he.next)||void 0===Ne||Ne.call(he,Ie),G.next(Ie)},()=>{var Ie;qe=!1,null===(Ie=he.complete)||void 0===Ie||Ie.call(he),G.complete()},Ie=>{var Ne;qe=!1,null===(Ne=he.error)||void 0===Ne||Ne.call(he,Ie),G.error(Ie)},()=>{var Ie,Ne;qe&&(null===(Ie=he.unsubscribe)||void 0===Ie||Ie.call(he)),null===(Ne=he.finalize)||void 0===Ne||Ne.call(he)}))}):oe.y}},4408:(ze,we,R)=>{R.d(we,{o:()=>se});var a=R(727);class ee extends a.w0{constructor(ue,ae){super()}schedule(ue,ae=0){return this}}const F={setInterval(..._e){const{delegate:ue}=F;return((null==ue?void 0:ue.setInterval)||setInterval)(..._e)},clearInterval(_e){const{delegate:ue}=F;return((null==ue?void 0:ue.clearInterval)||clearInterval)(_e)},delegate:void 0};var oe=R(8737);class se extends ee{constructor(ue,ae){super(ue,ae),this.scheduler=ue,this.work=ae,this.pending=!1}schedule(ue,ae=0){if(this.closed)return this;this.state=ue;const he=this.id,j=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(j,he,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(j,this.id,ae),this}requestAsyncId(ue,ae,he=0){return F.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,ae,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ae;F.clearInterval(ae)}execute(ue,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,ae);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ae){let j,he=!1;try{this.work(ue)}catch(G){he=!0,j=G||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ae}=this,{actions:he}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(ae,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ze,we,R)=>{R.d(we,{v:()=>F});var a=R(6063);class ee{constructor(se,_e=ee.now){this.schedulerActionCtor=se,this.now=_e}schedule(se,_e=0,ue){return new this.schedulerActionCtor(this,se).schedule(ue,_e)}}ee.now=a.l.now;class F extends ee{constructor(se,_e=ee.now){super(se,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:_e}=this;if(this._active)return void _e.push(se);let ue;this._active=!0;do{if(ue=se.execute(se.state,se.delay))break}while(se=_e.shift());if(this._active=!1,ue){for(;se=_e.shift();)se.unsubscribe();throw ue}}}},4986:(ze,we,R)=>{R.d(we,{z:()=>F});var a=R(4408);const F=new(R(7565).v)(a.o)},6063:(ze,we,R)=>{R.d(we,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(ze,we,R)=>{R.d(we,{z:()=>a});const a={setTimeout(...ee){const{delegate:F}=a;return((null==F?void 0:F.setTimeout)||setTimeout)(...ee)},clearTimeout(ee){const{delegate:F}=a;return((null==F?void 0:F.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(ze,we,R)=>{R.d(we,{h:()=>ee});const ee=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ze,we,R)=>{R.d(we,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ze,we,R)=>{R.d(we,{_6:()=>_e,jO:()=>oe,yG:()=>se});var a=R(576);function F(ue){return ue[ue.length-1]}function oe(ue){return(0,a.m)(F(ue))?ue.pop():void 0}function se(ue){return function ee(ue){return ue&&(0,a.m)(ue.schedule)}(F(ue))?ue.pop():void 0}function _e(ue,ae){return"number"==typeof F(ue)?ue.pop():ae}},8737:(ze,we,R)=>{function a(ee,F){if(ee){const oe=ee.indexOf(F);0<=oe&&ee.splice(oe,1)}}R.d(we,{P:()=>a})},3888:(ze,we,R)=>{function a(ee){const oe=ee(se=>{Error.call(se),se.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}R.d(we,{d:()=>a})},2806:(ze,we,R)=>{R.d(we,{x:()=>F,O:()=>oe});var a=R(2416);let ee=null;function F(se){if(a.v.useDeprecatedSynchronousErrorHandling){const _e=!ee;if(_e&&(ee={errorThrown:!1,error:null}),se(),_e){const{errorThrown:ue,error:ae}=ee;if(ee=null,ue)throw ae}}else se()}function oe(se){a.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=se)}},9672:(ze,we,R)=>{function a(ee,F,oe,se=0,_e=!1){const ue=F.schedule(function(){oe(),_e?ee.add(this.schedule(null,se)):this.unsubscribe()},se);if(ee.add(ue),!_e)return ue}R.d(we,{f:()=>a})},4671:(ze,we,R)=>{function a(ee){return ee}R.d(we,{y:()=>a})},1144:(ze,we,R)=>{R.d(we,{z:()=>a});const a=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ze,we,R)=>{R.d(we,{D:()=>ee});var a=R(576);function ee(F){return Symbol.asyncIterator&&(0,a.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(ze,we,R)=>{function a(ee){return"function"==typeof ee}R.d(we,{m:()=>a})},3670:(ze,we,R)=>{R.d(we,{c:()=>F});var a=R(8822),ee=R(576);function F(oe){return(0,ee.m)(oe[a.L])}},6495:(ze,we,R)=>{R.d(we,{T:()=>F});var a=R(2202),ee=R(576);function F(oe){return(0,ee.m)(null==oe?void 0:oe[a.h])}},8239:(ze,we,R)=>{R.d(we,{t:()=>ee});var a=R(576);function ee(F){return(0,a.m)(null==F?void 0:F.then)}},3260:(ze,we,R)=>{R.d(we,{Q:()=>F,L:()=>oe});var a=R(5987),ee=R(576);function F(se){return(0,a.FC)(this,arguments,function*(){const ue=se.getReader();try{for(;;){const{value:ae,done:he}=yield(0,a.qq)(ue.read());if(he)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(ae)}}finally{ue.releaseLock()}})}function oe(se){return(0,ee.m)(null==se?void 0:se.getReader)}},4482:(ze,we,R)=>{R.d(we,{A:()=>ee,e:()=>F});var a=R(576);function ee(oe){return(0,a.m)(null==oe?void 0:oe.lift)}function F(oe){return se=>{if(ee(se))return se.lift(function(_e){try{return oe(_e,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ze,we,R)=>{function a(){}R.d(we,{Z:()=>a})},7849:(ze,we,R)=>{R.d(we,{h:()=>F});var a=R(2416),ee=R(3410);function F(oe){ee.z.setTimeout(()=>{const{onUnhandledError:se}=a.v;if(!se)throw oe;se(oe)})}},4532:(ze,we,R)=>{function a(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(we,{z:()=>a})},5987:(ze,we,R)=>{function ae(H,ne,ce,ge){return new(ce||(ce=Promise))(function(ie,mt){function Nt(Et){try{nt(ge.next(Et))}catch(Sn){mt(Sn)}}function Cn(Et){try{nt(ge.throw(Et))}catch(Sn){mt(Sn)}}function nt(Et){Et.done?ie(Et.value):function Me(ie){return ie instanceof ce?ie:new ce(function(mt){mt(ie)})}(Et.value).then(Nt,Cn)}nt((ge=ge.apply(H,ne||[])).next())})}function fe(H){return this instanceof fe?(this.v=H,this):new fe(H)}function pe(H,ne,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ge=ce.apply(H,ne||[]),ie=[];return Me={},mt("next"),mt("throw"),mt("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function mt(Xt){ge[Xt]&&(Me[Xt]=function(ar){return new Promise(function(rn,ci){ie.push([Xt,ar,rn,ci])>1||Nt(Xt,ar)})})}function Nt(Xt,ar){try{!function Cn(Xt){Xt.value instanceof fe?Promise.resolve(Xt.value.v).then(nt,Et):Sn(ie[0][2],Xt)}(ge[Xt](ar))}catch(rn){Sn(ie[0][3],rn)}}function nt(Xt){Nt("next",Xt)}function Et(Xt){Nt("throw",Xt)}function Sn(Xt,ar){Xt(ar),ie.shift(),ie.length&&Nt(ie[0][0],ie[0][1])}}function Ze(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,ne=H[Symbol.asyncIterator];return ne?ne.call(H):(H=function re(H){var ne="function"==typeof Symbol&&Symbol.iterator,ce=ne&&H[ne],ge=0;if(ce)return ce.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&ge>=H.length&&(H=void 0),{value:H&&H[ge++],done:!H}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),ce={},ge("next"),ge("throw"),ge("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function ge(ie){ce[ie]=H[ie]&&function(mt){return new Promise(function(Nt,Cn){!function Me(ie,mt,Nt,Cn){Promise.resolve(Cn).then(function(nt){ie({value:nt,done:Nt})},mt)}(Nt,Cn,(mt=H[ie](mt)).done,mt.value)})}}}R.d(we,{mG:()=>ae,qq:()=>fe,FC:()=>pe,KL:()=>Ze})},5e3:(ze,we,R)=>{R.d(we,{deG:()=>pa,tb:()=>J_,AFp:()=>K0,ip1:()=>Q_,CZH:()=>xa,hGG:()=>TI,z2F:()=>Vl,sBO:()=>rw,Sil:()=>Ul,_Vd:()=>Go,EJc:()=>J0,SBq:()=>Du,qLn:()=>Sc,vpe:()=>Da,tBr:()=>Ir,XFs:()=>ut,OlP:()=>un,zs3:()=>Is,ZZ4:()=>hg,aQg:()=>gd,soG:()=>sg,YKP:()=>TE,h0i:()=>ef,PXZ:()=>DA,R0b:()=>An,FiY:()=>nn,Lbi:()=>cf,g9A:()=>iI,Qsj:()=>Wp,FYo:()=>Xh,JOm:()=>Xi,tp0:()=>ki,Rgc:()=>ho,dDg:()=>uI,q4F:()=>Ol,GfV:()=>zp,s_b:()=>fo,ifc:()=>Wt,eFA:()=>dI,G48:()=>yI,Gpc:()=>G,X6Q:()=>hd,_c5:()=>md,VLi:()=>EA,c2e:()=>Q0,zSh:()=>Dv,wAp:()=>_t,vHH:()=>Ne,cg1:()=>b_,kL8:()=>E_,dqk:()=>Lt,sIi:()=>Op,CqO:()=>Xm,QGY:()=>Jm,F4k:()=>Gv,RDi:()=>Fd,AaK:()=>ae,qOj:()=>ab,TTD:()=>Ha,_Bn:()=>xr,xp6:()=>Ah,uIk:()=>jm,Tol:()=>Up,ekj:()=>ii,Suo:()=>L0,Xpm:()=>Ct,lG2:()=>Nu,Yz7:()=>rn,cJS:()=>zr,oAB:()=>Qr,Yjl:()=>Qo,Y36:()=>Cu,_UZ:()=>Ym,qZA:()=>Bh,TgZ:()=>Vh,EpF:()=>kb,n5z:()=>lc,LFG:()=>Y,$8M:()=>er,$Z:()=>Mb,NdJ:()=>e_,CRH:()=>ud,kcU:()=>jd,O4$:()=>ha,oxw:()=>Hr,Q6J:()=>Hc,VKq:()=>P0,WLB:()=>SE,iGM:()=>jE,MAs:()=>fb,CHM:()=>Ud,LSH:()=>tp,Akn:()=>ao,YNc:()=>hb,W1O:()=>V0,_uU:()=>Hh,Oqu:()=>p_,hij:()=>zc,AsE:()=>Kc});var a=R(7579),ee=R(727),F=R(8306),oe=R(6451),se=R(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=_e({__forward_ref__:_e});function G(s){return s.__forward_ref__=G,s.toString=function(){return ae(this())},s}function re(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===G}class Ne extends Error{constructor(o,l){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function Ke(s,o){const l=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${pe(s)} found${l}`)}function nt(s,o){null==s&&function Et(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function zr(s){return{providers:s.providers||[],imports:s.imports||[]}}function Qn(s){return us(s,ls)||us(s,Mr)}function us(s,o){return s.hasOwnProperty(o)?s[o]:null}function xn(s){return s&&(s.hasOwnProperty(di)||s.hasOwnProperty(Pe))?s[di]:null}const ls=_e({\u0275prov:_e}),di=_e({\u0275inj:_e}),Mr=_e({ngInjectableDef:_e}),Pe=_e({ngInjectorDef:_e});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Ln;function Yt(s){const o=Ln;return Ln=s,o}function Fs(s,o,l){const d=Qn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&ut.Optional?null:void 0!==o?o:void Ke(ae(s),"Injector")}function ur(s){return{toString:s}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),Wt=(()=>{return(s=Wt||(Wt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Wt;var s})();const at="undefined"!=typeof globalThis&&globalThis,pt="undefined"!=typeof window&&window,Ls="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt=at||"undefined"!=typeof global&&global||pt||Ls,Yr={},Z=[],W=_e({\u0275cmp:_e}),z=_e({\u0275dir:_e}),be=_e({\u0275pipe:_e}),$=_e({\u0275mod:_e}),X=_e({\u0275fac:_e}),Ae=_e({__NG_ELEMENT_ID__:_e});let et=0;function Ct(s){return ur(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Z,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Wt.Emulated,id:"c",styles:s.styles||Z,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return d.id+=et++,d.inputs=ku(s.inputs,l),d.outputs=ku(s.outputs),m&&m.forEach(b=>b(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(sn):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(At):null,d})}function sn(s){return Un(s)||function ji(s){return s[z]||null}(s)}function At(s){return function _r(s){return s[be]||null}(s)}const Vr={};function Qr(s){return ur(()=>{const o={type:s.type,bootstrap:s.bootstrap||Z,declarations:s.declarations||Z,imports:s.imports||Z,exports:s.exports||Z,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Vr[s.id]=s.type),o})}function ku(s,o){if(null==s)return Yr;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=d,o&&(o[h]=m)}return l}const Nu=Ct;function Qo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Un(s){return s[W]||null}function $n(s,o){const l=s[$]||null;if(!l&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return l}function fi(s){return Array.isArray(s)&&"object"==typeof s[1]}function qi(s){return Array.isArray(s)&&!0===s[1]}function Ql(s){return 0!=(8&s.flags)}function Dd(s){return 2==(2&s.flags)}function js(s){return 1==(1&s.flags)}function an(s){return null!==s.template}function Ad(s){return 0!=(512&s[2])}function wo(s,o){return s.hasOwnProperty(X)?s[X]:null}class Ru{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ha(){return Co}function Co(s){return s.type.prototype.ngOnChanges&&(s.setInput=Nd),Vf}function Vf(){const s=Hi(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===Yr)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Nd(s,o,l,d){const h=Hi(s)||function qs(s,o){return s[na]=o}(s,{previous:Yr,current:null}),m=h.current||(h.current={}),v=h.previous,b=this.declaredInputs[l],E=v[b];m[b]=new Ru(E&&E.currentValue,o,v===Yr),s[d]=o}Ha.ngInherit=!0;const na="__ngSimpleChanges__";function Hi(s){return s[na]||null}const $a="http://www.w3.org/2000/svg";let Fu;function Fd(s){Fu=s}function En(s){return!!s.listen}const Gi={createRenderer:(s,o)=>function Ga(){return void 0!==Fu?Fu:"undefined"!=typeof document?document:void 0}()};function In(s){for(;Array.isArray(s);)s=s[0];return s}function hs(s,o){return In(o[s])}function wr(s,o){return In(o[s.index])}function Wi(s,o){return s.data[o]}function Zr(s,o){const l=o[s];return fi(l)?l:l[0]}function Gn(s){return 4==(4&s[2])}function ra(s){return 128==(128&s[2])}function Cr(s,o){return null==o?null:s[o]}function bo(s){s[18]=0}function Gs(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const gt={lFrame:Ya(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function nc(){return gt.bindingsEnabled}function Te(){return gt.lFrame.lView}function Rt(){return gt.lFrame.tView}function Ud(s){return gt.lFrame.contextLView=s,s[8]}function hn(){let s=oa();for(;null!==s&&64===s.type;)s=s.parent;return s}function oa(){return gt.lFrame.currentTNode}function Or(s,o){const l=gt.lFrame;l.currentTNode=s,l.isParent=o}function fs(){return gt.lFrame.isParent}function aa(){return gt.isInCheckNoChangesMode}function Io(s){gt.isInCheckNoChangesMode=s}function Jn(){const s=gt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function zi(){return gt.lFrame.bindingIndex++}function Oi(s){const o=gt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Bf(s,o){const l=gt.lFrame;l.bindingIndex=l.bindingRootIndex=s,la(o)}function la(s){gt.lFrame.currentDirectiveIndex=s}function ca(){return gt.lFrame.currentQueryIndex}function Ka(s){gt.lFrame.currentQueryIndex=s}function rc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ic(s,o,l){if(l&ut.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&ut.Host||(h=rc(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const d=gt.lFrame=Zf();return d.currentTNode=o,d.lView=s,!0}function da(s){const o=Zf(),l=s[1];gt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Zf(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?Ya(s):o}function Ya(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Zu(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Qa=Zu;function ju(){const s=Zu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Wn(){return gt.lFrame.selectedIndex}function cr(s){gt.lFrame.selectedIndex=s}function On(){const s=gt.lFrame;return Wi(s.tView,s.selectedIndex)}function ha(){gt.lFrame.currentNamespace=$a}function jd(){!function jf(){gt.lFrame.currentNamespace=null}()}function oc(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:E,ngAfterViewChecked:x,ngOnDestroy:O}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),E&&(s.viewHooks||(s.viewHooks=[])).push(-l,E),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(l,O)}}function zs(s,o,l){Hf(s,o,3,l)}function qu(s,o,l,d){(3&s[2])===l&&Hf(s,o,l,d)}function Hu(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Hf(s,o,l,d){const m=null!=d?d:-1,v=o.length-1;let b=0;for(let E=void 0!==d?65535&s[18]:0;E<v;E++)if("number"==typeof o[E+1]){if(b=o[E],null!=d&&b>=d)break}else o[E]<0&&(s[18]+=65536),(b<m||-1==m)&&(Hd(s,l,o,E),s[18]=(4294901760&s[18])+E+2),E++}function Hd(s,o,l,d){const h=l[d]<0,m=l[d+1],b=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class Pn{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Gu(s,o,l){const d=En(s);let h=0;for(;h<l.length;){const m=l[h];if("number"==typeof m){if(0!==m)break;h++;const v=l[h++],b=l[h++],E=l[h++];d?s.setAttribute(o,b,E,v):o.setAttributeNS(v,b,E)}else{const v=m,b=l[++h];gs(v)?d&&s.setProperty(o,v,b):d?s.setAttribute(o,v,b):o.setAttribute(v,b),h++}}return h}function Tn(s){return 3===s||4===s||6===s}function gs(s){return 64===s.charCodeAt(0)}function Xe(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||ms(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function ms(s,o,l,d,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){v=-1;break}if(b>o){v=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===l){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function gi(s){return-1!==s}function Xn(s){return 32767&s}function Xa(s,o){let l=function Wf(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let zd=!0;function eu(s){const o=zd;return zd=s,o}let dt=0;function So(s,o){const l=zu(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Wu(d.data,s),Wu(o,null),Wu(d.blueprint,null));const h=kn(s,o),m=s.injectorIndex;if(gi(h)){const v=Xn(h),b=Xa(h,o),E=b[1].data;for(let x=0;x<8;x++)o[m+x]=b[v+x]|E[v+x]}return o[m+8]=h,m}function Wu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function zu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function kn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(d=2===v?m.declTNode:1===v?h[6]:null,null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Ku(s,o,l){!function Ao(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Ae)&&(d=l[Ae]),null==d&&(d=l[Ae]=dt++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Yu(s,o,l){if(l&ut.Optional)return s;Ke(o,"NodeInjector")}function Pi(s,o,l,d){if(l&ut.Optional&&void 0===d&&(d=null),0==(l&(ut.Self|ut.Host))){const h=s[9],m=Yt(void 0);try{return h?h.get(o,d,l&ut.Optional):Fs(o,d,l&ut.Optional)}finally{Yt(m)}}return Yu(d,o,l)}function fa(s,o,l,d=ut.Default,h){if(null!==s){const m=function Po(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ae)?s[Ae]:void 0;return"number"==typeof o?o>=0?255&o:Mo:o}(l);if("function"==typeof m){if(!ic(o,s,d))return d&ut.Host?Yu(h,l,d):Pi(o,l,d,h);try{const v=m(d);if(null!=v||d&ut.Optional)return v;Ke(l)}finally{Qa()}}else if("number"==typeof m){let v=null,b=zu(s,o),E=-1,x=d&ut.Host?o[16][6]:null;for((-1===b||d&ut.SkipSelf)&&(E=-1===b?kn(s,o):o[b+8],-1!==E&&Ki(d,!1)?(v=o[1],b=Xn(E),o=Xa(E,o)):b=-1);-1!==b;){const O=o[1];if(nu(m,b,O.data)){const L=Kd(b,o,l,v,d,x);if(L!==xo)return L}E=o[b+8],-1!==E&&Ki(d,o[1].data[b+8]===x)&&nu(m,b,o)?(v=O,b=Xn(E),o=Xa(E,o)):b=-1}}}return Pi(o,l,d,h)}const xo={};function Mo(){return new Vn(hn(),Te())}function Kd(s,o,l,d,h,m){const v=o[1],b=v.data[s+8],O=Oo(b,v,l,null==d?Dd(b)&&zd:d!=v&&0!=(3&b.type),h&ut.Host&&m===b);return null!==O?mi(o,v,O,b):xo}function Oo(s,o,l,d,h){const m=s.providerIndexes,v=o.data,b=1048575&m,E=s.directiveStart,O=m>>20,q=h?b+O:s.directiveEnd;for(let J=d?b:b+O;J<q;J++){const ye=v[J];if(J<E&&l===ye||J>=E&&ye.type===l)return J}if(h){const J=v[E];if(J&&an(J)&&J.type===l)return E}return null}function mi(s,o,l,d){let h=s[l];const m=o.data;if(function $f(s){return s instanceof Pn}(h)){const v=h;v.resolving&&function Oe(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${s}${l}`)}(pe(m[l]));const b=eu(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?Yt(v.injectImpl):null;ic(s,d,ut.Default);try{h=s[l]=v.factory(void 0,m,s,d),o.firstCreatePass&&l>=d.directiveStart&&function qf(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(d){const v=Co(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==E&&Yt(E),eu(b),v.resolving=!1,Qa()}}return h}function nu(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Ki(s,o){return!(s&ut.Self||s&ut.Host&&o)}class Vn{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return fa(this._tNode,this._lView,o,d,l)}}function lc(s){return ur(()=>{const o=s.prototype.constructor,l=o[X]||_s(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[X]||_s(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function _s(s){return qe(s)?()=>{const o=_s(re(s));return o&&o()}:wo(s)}function er(s){return function tu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const m=l[h];if(Tn(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(hn(),s)}const ys="__parameters__";function ei(s,o,l){return ur(()=>{const d=function Er(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...m){if(this instanceof h)return d.apply(this,m),this;const v=new h(...m);return b.annotation=v,b;function b(E,x,O){const L=E.hasOwnProperty(ys)?E[ys]:Object.defineProperty(E,ys,{value:[]})[ys];for(;L.length<=O;)L.push(null);return(L[O]=L[O]||[]).push(v),E}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class un{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=rn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pa=new un("AnalyzeForEntryComponents");function hr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),hr(d,o)):o!==s&&o.push(d)}return o}function ws(s,o){s.forEach(l=>Array.isArray(l)?ws(l,o):o(l))}function Qd(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ju(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ht(s,o,l){let d=ni(s,o);return d>=0?s[1|d]=l:(d=~d,function Xu(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function ru(s,o){const l=ni(s,o);if(l>=0)return s[1|l]}function ni(s,o){return function fc(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const m=d+(h-d>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:d=m+1}return~(h<<l)}(s,o,1)}const Bn={},nl="__NG_DI_FLAG__",gc="ngTempTokenPath",nh=/\n/gm,su="__source",I=_e({provide:String,useValue:_e});let D;function P(s){const o=D;return D=s,o}function U(s,o=ut.Default){if(void 0===D)throw new Ne(203,"");return null===D?Fs(s,void 0,o):D.get(s,o&ut.Optional?null:void 0,o)}function Y(s,o=ut.Default){return(function Mn(){return Ln}()||U)(re(s),o)}function Ye(s){const o=[];for(let l=0;l<s.length;l++){const d=re(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Ne(900,"");let h,m=ut.Default;for(let v=0;v<d.length;v++){const b=d[v],E=bt(b);"number"==typeof E?-1===E?h=b.token:m|=E:h=b}o.push(Y(h,m))}else o.push(Y(d))}return o}function lt(s,o){return s[nl]=o,s.prototype[nl]=o,s}function bt(s){return s[nl]}const Ir=lt(ei("Inject",s=>({token:s})),-1),nn=lt(ei("Optional"),8),ki=lt(ei("SkipSelf"),4);class ol{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ro(s){return s instanceof ol?s.changingThisBreaksApplicationSecurity:s}const Vy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ch=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function tp(s){const o=function _a(){const s=Te();return s&&s[12]}();return o?o.sanitize(nr.URL,s)||"":function lu(s,o){const l=function Ry(s){return s instanceof ol&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?Ro(s):function dh(s){return(s=String(s)).match(Vy)||s.match(ch)?s:"unsafe:"+s}(fe(s))}const Ic="__ngContext__";function kr(s,o){s[Ic]=o}function sp(s){const o=function Tc(s){return s[Ic]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function ap(s){return s.ngOriginalError}function Ac(s,...o){s.error(...o)}class Sc{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),d=function am(s){return s&&s.ngErrorLogger||Ac}(o);d(this._console,"ERROR",o),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&ap(o);for(;l&&ap(l);)l=ap(l);return l||null}}const wh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Lt))();function Bo(s){return s instanceof Function?s():s}var Xi=(()=>((Xi=Xi||{})[Xi.Important=1]="Important",Xi[Xi.DashCase=2]="DashCase",Xi))();function lp(s,o){return undefined(s,o)}function yi(s){const o=s[3];return qi(o)?o[3]:o}function dp(s){return bh(s[13])}function Pc(s){return bh(s[4])}function bh(s){for(;null!==s&&!qi(s);)s=s[4];return s}function ya(s,o,l,d,h){if(null!=d){let m,v=!1;qi(d)?m=d:fi(d)&&(v=!0,d=d[0]);const b=In(d);0===s&&null!==l?null==h?te(o,l,b):B(o,l,b,h||null,!0):1===s&&null!==l?B(o,l,b,h||null,!0):2===s?function fp(s,o,l){const d=Qe(s,o);d&&function Se(s,o,l,d){En(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,b,v):3===s&&o.destroyNode(b),null!=m&&function ym(s,o,l,d,h){const m=l[7];m!==In(l)&&ya(o,s,d,m,h);for(let b=10;b<l.length;b++){const E=l[b];fl(E[1],E,s,o,d,m)}}(o,s,m,l,h)}}function pu(s,o,l){return En(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function gu(s,o){const l=s[9],d=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Gs(h,-1)),l.splice(d,1)}function Eh(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&gu(h,d),o>0&&(s[l-1][4]=d[4]);const m=Ju(s,10+o);!function _m(s,o){fl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=m[19];null!==v&&v.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function _(s,o){if(!(256&o[2])){const l=o[11];En(l)&&l.destroyNode&&fl(s,o,l,3,null,null),function cl(s){let o=s[13];if(!o)return f(s[1],s);for(;o;){let l=null;if(fi(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)fi(o)&&f(o[1],o),o=o[3];null===o&&(o=s),fi(o)&&f(o[1],o),l=o&&o[4]}o=l}}(o)}}function f(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function w(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof Pn)){const m=l[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const b=h[m[v]],E=m[v+1];try{E.call(b)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function g(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],b="function"==typeof v?v(o):In(o[v]),E=d[h=l[m+2]],x=l[m+3];"boolean"==typeof x?b.removeEventListener(l[m],E,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),m+=2}else{const v=d[h=l[m+1]];l[m].call(v)}if(null!==d){for(let m=h+1;m<d.length;m++)d[m]();o[7]=null}}(s,o),1===o[1].type&&En(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&qi(o[3])){l!==o[3]&&gu(l,o);const d=o[19];null!==d&&d.detachView(s)}}}function T(s,o,l){return function M(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===Wt.None||h===Wt.Emulated)return null}return wr(d,l)}(s,o.parent,l)}function B(s,o,l,d,h){En(s)?s.insertBefore(o,l,d,h):o.insertBefore(l,d,h)}function te(s,o,l){En(s)?s.appendChild(o,l):o.appendChild(l)}function Re(s,o,l,d,h){null!==d?B(s,o,l,d,h):te(s,o,l)}function Qe(s,o){return En(s)?s.parentNode(o):o.parentNode}let Zo=function fr(s,o,l){return 40&s.type?wr(s,l):null};function Rc(s,o,l,d){const h=T(s,d,o),m=o[11],b=function Ut(s,o,l){return Zo(s,o,l)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let E=0;E<l.length;E++)Re(m,h,l[E],b,!1);else Re(m,h,l,b,!1)}function Fc(s,o){if(null!==o){const l=o.type;if(3&l)return wr(o,s);if(4&l)return Th(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return Fc(s,d);{const h=s[o.index];return qi(h)?Th(-1,h):In(h)}}if(32&l)return lp(o,s)()||In(s[o.index]);{const d=dl(s,o);return null!==d?Array.isArray(d)?d[0]:Fc(yi(s[16]),d):Fc(s,o.next)}}return null}function dl(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Th(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return Fc(d,h)}return o[7]}function hl(s,o,l,d,h,m,v){for(;null!=l;){const b=d[l.index],E=l.type;if(v&&0===o&&(b&&kr(In(b),d),l.flags|=4),64!=(64&l.flags))if(8&E)hl(s,o,l.child,d,h,m,!1),ya(o,s,h,b,m);else if(32&E){const x=lp(l,d);let O;for(;O=x();)ya(o,s,h,O,m);ya(o,s,h,b,m)}else 16&E?Dh(s,o,d,l,h,m):ya(o,s,h,b,m);l=v?l.projectionNext:l.next}}function fl(s,o,l,d,h,m){hl(l,d,s.firstChild,o,h,m,!1)}function Dh(s,o,l,d,h,m){const v=l[16],E=v[6].projection[d.projection];if(Array.isArray(E))for(let x=0;x<E.length;x++)ya(o,s,h,E[x],m);else hl(s,o,E,v[3],h,m,!0)}function jo(s,o,l){En(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function tv(s,o,l){En(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function nv(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}l=h+1}}const dC="ng-template";function UT(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==nv(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function pl(s){return 4===s.type&&s.value!==dC}function gl(s,o,l){return o===(4!==s.type||l?s.value:dC)}function hC(s,o,l){let d=4;const h=s.attrs||[],m=function pC(s){for(let o=0;o<s.length;o++)if(Tn(s[o]))return o;return s.length}(h);let v=!1;for(let b=0;b<o.length;b++){const E=o[b];if("number"!=typeof E){if(!v)if(4&d){if(d=2|1&d,""!==E&&!gl(s,E,l)||""===E&&1===o.length){if(Nn(d))return!1;v=!0}}else{const x=8&d?E:o[++b];if(8&d&&null!==s.attrs){if(!UT(s.attrs,x,l)){if(Nn(d))return!1;v=!0}continue}const L=ml(8&d?"class":E,h,pl(s),l);if(-1===L){if(Nn(d))return!1;v=!0;continue}if(""!==x){let q;q=L>m?"":h[L+1].toLowerCase();const J=8&d?q:null;if(J&&-1!==nv(J,x,0)||2&d&&x!==q){if(Nn(d))return!1;v=!0}}}}else{if(!v&&!Nn(d)&&!Nn(E))return!1;if(v&&Nn(E))continue;v=!1,d=E|1&d}}return Nn(d)||v}function Nn(s){return 0==(1&s)}function ml(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function gC(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function fC(s,o,l=!1){for(let d=0;d<o.length;d++)if(hC(s,o[d],l))return!0;return!1}function rv(s,o){return s?":not("+o.trim()+")":o}function _C(s){let o=s[0],l=1,d=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&d){const b=s[++l];h+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!Nn(v)&&(o+=rv(m,h),h=""),d=v,m=m||!Nn(d);l++}return""!==h&&(o+=rv(m,h)),o}const Mt={};function Ah(s){iv(Rt(),Te(),Wn()+s,aa())}function iv(s,o,l,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&zs(o,m,l)}else{const m=s.preOrderHooks;null!==m&&qu(o,m,0,l)}cr(l)}function pp(s,o){return s<<17|o<<2}function io(s){return s>>17&32767}function vm(s){return 2|s}function qo(s){return(131068&s)>>2}function wm(s,o){return-131069&s|o<<2}function bm(s){return 1|s}function MC(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],m=l[d+1];if(-1!==m){const v=s.data[m];Ka(h),v.contentQueries(2,o[m],m)}}}function Mh(s,o,l,d,h,m,v,b,E,x){const O=o.blueprint.slice();return O[0]=h,O[2]=140|d,bo(O),O[3]=O[15]=s,O[8]=l,O[10]=v||s&&s[10],O[11]=b||s&&s[11],O[12]=E||s&&s[12]||null,O[9]=x||s&&s[9]||null,O[6]=m,O[16]=2==o.type?s[16]:O,O}function _l(s,o,l,d,h){let m=s.data[o];if(null===m)m=function Oh(s,o,l,d,h){const m=oa(),v=fs(),E=s.data[o]=function kC(s,o,l,d,h,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=E),null!==m&&(v?null==m.child&&null!==E.parent&&(m.child=E):null===m.next&&(m.next=E)),E}(s,o,l,d,h),function Bd(){return gt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=d,m.attrs=h;const v=function Ws(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Or(m,!0),m}function vp(s,o,l,d){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function Vc(s,o,l){da(o);try{const d=s.viewQuery;null!==d&&Nh(1,d,l);const h=s.template;null!==h&&Bc(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&MC(s,o),s.staticViewQueries&&Nh(2,s.viewQuery,l);const m=s.components;null!==m&&function jT(s,o){for(let l=0;l<o.length;l++)QT(s,o[l])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,ju()}}function wa(s,o,l,d){const h=o[2];if(256==(256&h))return;da(o);const m=aa();try{bo(o),function Bu(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Bc(s,o,l,2,d);const v=3==(3&h);if(!m)if(v){const x=s.preOrderCheckHooks;null!==x&&zs(o,x,null)}else{const x=s.preOrderHooks;null!==x&&qu(o,x,0,null),Hu(o,0)}if(function ZC(s){for(let o=dp(s);null!==o;o=Pc(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],m=h[3];0==(1024&h[2])&&Gs(m,1),h[2]|=1024}}}(o),function KT(s){for(let o=dp(s);null!==o;o=Pc(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];ra(d)&&wa(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&MC(s,o),!m)if(v){const x=s.contentCheckHooks;null!==x&&zs(o,x)}else{const x=s.contentHooks;null!==x&&qu(o,x,1),Hu(o,1)}!function nM(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)cr(~h);else{const m=h,v=l[++d],b=l[++d];Bf(v,m),b(2,o[m])}}}finally{cr(-1)}}(s,o);const b=s.components;null!==b&&function cv(s,o){for(let l=0;l<o.length;l++)YT(s,o[l])}(o,b);const E=s.viewQuery;if(null!==E&&Nh(2,E,d),!m)if(v){const x=s.viewCheckHooks;null!==x&&zs(o,x)}else{const x=s.viewHooks;null!==x&&qu(o,x,2),Hu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Gs(o[3],-1))}finally{ju()}}function Sm(s,o,l,d){const h=o[10],m=!aa(),v=Gn(o);try{m&&!v&&h.begin&&h.begin(),v&&Vc(s,o,d),wa(s,o,l,d)}finally{m&&!v&&h.end&&h.end()}}function Bc(s,o,l,d,h){const m=Wn(),v=2&d;try{cr(-1),v&&o.length>20&&iv(s,o,20,aa()),l(d,h)}finally{cr(m)}}function dv(s,o,l){!nc()||(function $T(s,o,l,d){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||So(l,o),kr(d,o);const v=l.initialInputs;for(let b=h;b<m;b++){const E=s.data[b],x=an(E);x&&oM(o,l,E);const O=mi(o,s,b,l);kr(O,o),null!==v&&vv(0,b-h,O,E,0,v),x&&(Zr(l.index,o)[8]=O)}}(s,o,l,wr(l,o)),128==(128&l.flags)&&function LC(s,o,l){const d=l.directiveStart,h=l.directiveEnd,v=l.index,b=function za(){return gt.lFrame.currentDirectiveIndex}();try{cr(v);for(let E=d;E<h;E++){const x=s.data[E],O=o[E];la(E),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&UC(x,O)}}finally{cr(-1),la(b)}}(s,o,l))}function wp(s,o,l=wr){const d=o.localNames;if(null!==d){let h=o.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],b=-1===v?l(o,s):s[v];s[h++]=b}}}function hv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=kh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function kh(s,o,l,d,h,m,v,b,E,x){const O=20+d,L=O+h,q=function OC(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Mt);return l}(O,L),J="function"==typeof x?x():x;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:b,declTNode:o,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:J,incompleteFirstPass:!1}}function fv(s,o,l,d){const h=bv(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&$C(s).push(d,h.length-1))}function pv(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function FC(s,o,l,d){let h=!1;if(nc()){const m=function VC(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let m=0;m<d.length;m++){const v=d[m];fC(l,v.selectors,!1)&&(h||(h=[]),Ku(So(l,o),s,v.type),an(v)?(mv(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===d?null:{"":-1};if(null!==m){h=!0,_v(l,s.data.length,m.length);for(let O=0;O<m.length;O++){const L=m[O];L.providersResolver&&L.providersResolver(L)}let b=!1,E=!1,x=vp(s,o,m.length,null);for(let O=0;O<m.length;O++){const L=m[O];l.mergedAttrs=Xe(l.mergedAttrs,L.hostAttrs),BC(s,l,o,x,L),GT(x,L,v),null!==L.contentQueries&&(l.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(l.flags|=128);const q=L.type.prototype;!b&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!E&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),E=!0),x++}!function NC(s,o){const d=o.directiveEnd,h=s.data,m=o.attrs,v=[];let b=null,E=null;for(let x=o.directiveStart;x<d;x++){const O=h[x],L=O.inputs,q=null===m||pl(o)?null:WT(L,m);v.push(q),b=pv(L,x,b),E=pv(O.outputs,x,E)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=b,o.outputs=E}(s,l)}v&&function bp(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new Ne(-301,`Export of name '${o[h+1]}' not found!`);d.push(o[h],m)}}}(l,d,v)}return l.mergedAttrs=Xe(l.mergedAttrs,l.attrs),h}function HT(s,o,l,d,h,m){const v=m.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const E=~o.index;(function sM(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=E&&b.push(E),b.push(d,h,v)}}function UC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function mv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function GT(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;an(o)&&(l[""]=s)}}function _v(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function BC(s,o,l,d,h){s.data[d]=h;const m=h.factory||(h.factory=wo(h.type)),v=new Pn(m,an(h),null);s.blueprint[d]=v,l[d]=v,HT(s,o,0,d,vp(s,l,h.hostVars,Mt),h)}function oM(s,o,l){const d=wr(o,s),h=hv(l),m=s[10],v=Nm(s,Mh(s,h,null,l.onPush?64:16,d,o,m,m.createRenderer(d,l),null,null));s[o.index]=v}function Ho(s,o,l,d,h,m){const v=wr(s,o);!function yv(s,o,l,d,h,m,v){if(null==m)En(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const b=null==v?fe(m):v(m,d||"",h);En(s)?s.setAttribute(o,h,b,l):l?o.setAttributeNS(l,h,b):o.setAttribute(h,b)}}(o[11],v,m,s.value,l,d,h)}function vv(s,o,l,d,h,m){const v=m[o];if(null!==v){const b=d.setInput;for(let E=0;E<v.length;){const x=v[E++],O=v[E++],L=v[E++];null!==b?d.setInput(l,L,x,O):l[O]=L}}}function WT(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function km(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function YT(s,o){const l=Zr(o,s);if(ra(l)){const d=l[1];80&l[2]?wa(d,l,d.template,l[8]):l[5]>0&&yu(l)}}function yu(s){for(let d=dp(s);null!==d;d=Pc(d))for(let h=10;h<d.length;h++){const m=d[h];if(1024&m[2]){const v=m[1];wa(v,m,v.template,m[8])}else m[5]>0&&yu(m)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=Zr(l[d],s);ra(h)&&h[5]>0&&yu(h)}}function QT(s,o){const l=Zr(o,s),d=l[1];(function wv(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),Vc(d,l,l[8])}function Nm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Ep(s){for(;s;){s[2]|=64;const o=yi(s);if(Ad(s)&&!o)return s;s=o}return null}function yl(s,o,l){const d=o[10];d.begin&&d.begin();try{wa(s,o,s.template,l)}catch(h){throw Rm(o,h),h}finally{d.end&&d.end()}}function qC(s){!function Cv(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=sp(l),h=d[1];Sm(h,d,h.template,l)}}(s[8])}function Nh(s,o,l){Ka(0),o(s,l)}const eD=(()=>Promise.resolve(null))();function bv(s){return s[7]||(s[7]=[])}function $C(s){return s.cleanup||(s.cleanup=[])}function Rm(s,o){const l=s[9],d=l?l.get(Sc,null):null;d&&d.handleError(o)}function Ev(s,o,l,d,h){for(let m=0;m<l.length;){const v=l[m++],b=l[m++],E=o[v],x=s.data[v];null!==x.setInput?x.setInput(E,h,d,b):E[b]=h}}function Ca(s,o,l){const d=hs(o,s);!function mm(s,o,l){En(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function Ip(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const b=o[v];"number"==typeof b?m=b:1==m?h=he(h,b):2==m&&(d=he(d,b+": "+o[++v]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}const Iv=new un("INJECTOR",-1);class Tv{get(o,l=Bn){if(l===Bn){const d=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw d.name="NullInjectorError",d}return l}}const Dv=new un("Set Injector scope."),Dp={},Av={};let Fm;function GC(){return void 0===Fm&&(Fm=new Tv),Fm}function Sv(s,o=null,l=null,d){const h=WC(s,o,l,d);return h._resolveInjectorDefTypes(),h}function WC(s,o=null,l=null,d){return new zC(s,l,o||GC(),d)}class zC{constructor(o,l,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&ws(l,b=>this.processProvider(b,o,l)),ws([o],b=>this.processInjectorType(b,[],m)),this.records.set(Iv,Ap(void 0,this));const v=this.records.get(Dv);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=Bn,d=ut.Default){this.assertNotDestroyed();const h=P(this),m=Yt(void 0);try{if(!(d&ut.SkipSelf)){let b=this.records.get(o);if(void 0===b){const E=function uM(s){return"function"==typeof s||"object"==typeof s&&s instanceof un}(o)&&Qn(o);b=E&&this.injectableDefInScope(E)?Ap(xv(o),Dp):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&ut.Self?GC():this.parent).get(o,l=d&ut.Optional&&l===Bn?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[gc]=v[gc]||[]).unshift(ae(o)),h)throw v;return function Vt(s,o,l,d){const h=s[gc];throw o[su]&&h.unshift(o[su]),s.message=function Tt(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ae(o);if(Array.isArray(o))h=o.map(ae).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let b=o[v];m.push(v+":"+("string"==typeof b?JSON.stringify(b):ae(b)))}h=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(nh,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[gc]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Yt(m),P(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(ae(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,"")}processInjectorType(o,l,d){if(!(o=re(o)))return!1;let h=xn(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,b=-1!==d.indexOf(v);if(void 0!==m&&(h=xn(m)),null==h)return!1;if(null!=h.imports&&!b){let O;d.push(v);try{ws(h.imports,L=>{this.processInjectorType(L,l,d)&&(void 0===O&&(O=[]),O.push(L))})}finally{}if(void 0!==O)for(let L=0;L<O.length;L++){const{ngModule:q,providers:J}=O[L];ws(J,ye=>this.processProvider(ye,q,J||Z))}}this.injectorDefTypes.add(v);const E=wo(v)||(()=>new v);this.records.set(v,Ap(E,Dp));const x=h.providers;if(null!=x&&!b){const O=o;ws(x,L=>this.processProvider(L,O,x))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,d){let h=Sp(o=re(o))?o:re(o&&o.provide);const m=function iD(s,o,l){return sD(s)?Ap(void 0,s.useValue):Ap(Mv(s),Dp)}(o);if(Sp(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Ap(void 0,Dp,!0),v.factory=()=>Ye(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,l){return l.value===Dp&&(l.value=Av,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Lm(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=re(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function xv(s){const o=Qn(s),l=null!==o?o.factory:wo(s);if(null!==l)return l;if(s instanceof un)throw new Ne(204,"");if(s instanceof Function)return function KC(s){const o=s.length;if(o>0)throw function Js(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}(o,"?"),new Ne(204,"");const l=function Ur(s){const o=s&&(s[ls]||s[Mr]);if(o){const l=function Kt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ne(204,"")}function Mv(s,o,l){let d;if(Sp(s)){const h=re(s);return wo(h)||xv(h)}if(sD(s))d=()=>re(s.useValue);else if(function oD(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Ye(s.deps||[]));else if(function aM(s){return!(!s||!s.useExisting)}(s))d=()=>Y(re(s.useExisting));else{const h=re(s&&(s.useClass||s.provide));if(!function aD(s){return!!s.deps}(s))return wo(h)||xv(h);d=()=>new h(...Ye(s.deps))}return d}function Ap(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function sD(s){return null!==s&&"object"==typeof s&&I in s}function Sp(s){return"function"==typeof s}let Is=(()=>{class s{static create(l,d){var h;if(Array.isArray(l))return Sv({name:""},d,l,"");{const m=null!==(h=l.name)&&void 0!==h?h:"";return Sv({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=Bn,s.NULL=new Tv,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>Y(Iv)}),s.__NG_ELEMENT_ID__=-1,s})();function dM(s,o){oc(sp(s)[1],hn())}function ab(s){let o=function dD(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(an(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");h=o.\u0275dir}if(h){if(l){d.push(h);const v=s;v.inputs=ub(s.inputs),v.declaredInputs=ub(s.declaredInputs),v.outputs=ub(s.outputs);const b=h.hostBindings;b&&fD(s,b);const E=h.viewQuery,x=h.contentQueries;if(E&&fM(s,E),x&&hD(s,x),ue(s.inputs,h.inputs),ue(s.declaredInputs,h.declaredInputs),ue(s.outputs,h.outputs),an(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const b=m[v];b&&b.ngInherit&&b(s),b===ab&&(l=!1)}}o=Object.getPrototypeOf(o)}!function hM(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Xe(h.hostAttrs,l=Xe(l,h.hostAttrs))}}(d)}function ub(s){return s===Yr?{}:s===Z?[]:s}function fM(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function hD(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,m)=>{o(d,h,m),l(d,h,m)}:o}function fD(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let Mp=null;function Rh(){if(!Mp){const s=Lt.Symbol;if(s&&s.iterator)Mp=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Mp=d)}}}return Mp}function Op(s){return!!Lv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Rh()in s)}function Lv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ea(s,o,l){return s[o]=l}function Ui(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function wl(s,o,l,d){const h=Ui(s,o,l);return Ui(s,o+1,d)||h}function jm(s,o,l,d){const h=Te();return Ui(h,zi(),o)&&(Rt(),Ho(On(),h,s,o,l,d)),jm}function Pp(s,o,l,d,h,m){const b=wl(s,function Mi(){return gt.lFrame.bindingIndex}(),l,h);return Oi(2),b?o+fe(l)+d+fe(h)+m:Mt}function hb(s,o,l,d,h,m,v,b){const E=Te(),x=Rt(),O=s+20,L=x.firstCreatePass?function Uv(s,o,l,d,h,m,v,b,E){const x=o.consts,O=_l(o,s,4,v||null,Cr(x,b));FC(o,l,O,Cr(x,E)),oc(o,O);const L=O.tViews=kh(2,O,d,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,O),L.queries=o.queries.embeddedTView(O)),O}(O,x,E,o,l,d,h,m,v):x.data[O];Or(L,!1);const q=E[11].createComment("");Rc(x,E,q,L),kr(q,E),Nm(E,E[O]=km(q,E,q,L)),js(L)&&dv(x,E,L),null!=v&&wp(E,L,b)}function fb(s){return function Br(s,o){return s[o]}(function Vd(){return gt.lFrame.contextLView}(),20+s)}function Cu(s,o=ut.Default){const l=Te();return null===l?Y(s,o):fa(hn(),l,re(s),o)}function Mb(){throw new Error("invalid")}function Hc(s,o,l){const d=Te();return Ui(d,zi(),o)&&function Li(s,o,l,d,h,m,v,b){const E=wr(o,l);let O,x=o.inputs;!b&&null!=x&&(O=x[d])?(Ev(s,l,O,d,h),Dd(o)&&function Mm(s,o){const l=Zr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(d=function gv(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,En(m)?m.setProperty(E,d,h):gs(d)||(E.setProperty?E.setProperty(d,h):E[d]=h))}(Rt(),On(),d,s,o,d[11],l,!1),Hc}function qv(s,o,l,d,h){const v=h?"class":"style";Ev(s,l,o.inputs[v],v,d)}function Vh(s,o,l,d){const h=Te(),m=Rt(),v=20+s,b=h[11],E=h[v]=pu(b,o,function qd(){return gt.lFrame.currentNamespace}()),x=m.firstCreatePass?function wD(s,o,l,d,h,m,v){const b=o.consts,x=_l(o,s,2,h,Cr(b,m));return FC(o,l,x,Cr(b,v)),null!==x.attrs&&Ip(x,x.attrs,!1),null!==x.mergedAttrs&&Ip(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,h,0,o,l,d):m.data[v];Or(x,!0);const O=x.mergedAttrs;null!==O&&Gu(b,E,O);const L=x.classes;null!==L&&tv(b,E,L);const q=x.styles;null!==q&&jo(b,E,q),64!=(64&x.flags)&&Rc(m,h,E,x),0===function ia(){return gt.lFrame.elementDepthCount}()&&kr(E,h),function br(){gt.lFrame.elementDepthCount++}(),js(x)&&(dv(m,h,x),function Ph(s,o,l){if(Ql(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}(m,x,h)),null!==d&&wp(h,x)}function Bh(){let s=hn();fs()?function Uu(){gt.lFrame.isParent=!1}():(s=s.parent,Or(s,!1));const o=s;!function Wa(){gt.lFrame.elementDepthCount--}();const l=Rt();l.firstCreatePass&&(oc(l,s),Ql(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ac(s){return 0!=(16&s.flags)}(o)&&qv(l,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Wd(s){return 0!=(32&s.flags)}(o)&&qv(l,o,Te(),o.stylesWithoutHost,!1)}function Ym(s,o,l,d){Vh(s,o,l,d),Bh()}function kb(){return Te()}function Jm(s){return!!s&&"function"==typeof s.then}function Gv(s){return!!s&&"function"==typeof s.subscribe}const Xm=Gv;function e_(s,o,l,d){const h=Te(),m=Rt(),v=hn();return function t_(s,o,l,d,h,m,v,b){const E=js(d),O=s.firstCreatePass&&$C(s),L=o[8],q=bv(o);let J=!0;if(3&d.type||b){const je=wr(d,o),rt=b?b(je):je,Ee=q.length,ft=b?Bt=>b(In(Bt[d.index])):d.index;if(En(l)){let Bt=null;if(!b&&E&&(Bt=function Wv(s,o,l,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===d){const b=o[7],E=h[m+2];return b.length>E?b[E]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,d.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=m,Bt.__ngLastListenerFn__=m,J=!1;else{m=Ar(d,o,L,m,!1);const fn=l.listen(rt,h,m);q.push(m,fn),O&&O.push(h,ft,Ee,Ee+1)}}else m=Ar(d,o,L,m,!0),rt.addEventListener(h,m,v),q.push(m),O&&O.push(h,ft,Ee,v)}else m=Ar(d,o,L,m,!1);const ye=d.outputs;let Ve;if(J&&null!==ye&&(Ve=ye[h])){const je=Ve.length;if(je)for(let rt=0;rt<je;rt+=2){const Gr=o[Ve[rt]][Ve[rt+1]].subscribe(m),go=q.length;q.push(m,Gr),O&&O.push(h,d.index,go,-(go+1))}}}(m,h,h[11],v,s,o,!!l,d),e_}function n_(s,o,l,d){try{return!1!==l(d)}catch(h){return Rm(s,h),!1}}function Ar(s,o,l,d,h){return function m(v){if(v===Function)return d;const b=2&s.flags?Zr(s.index,o):o;0==(32&o[2])&&Ep(b);let E=n_(o,0,d,v),x=m.__ngNextListenerFn__;for(;x;)E=n_(o,0,x,v)&&E,x=x.__ngNextListenerFn__;return h&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function Hr(s=1){return function Zd(s){return(gt.lFrame.contextLView=function Zg(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function Xv(s,o,l,d,h){const m=s[l+1],v=null===o;let b=d?io(m):qo(m),E=!1;for(;0!==b&&(!1===E||v);){const O=s[b+1];bD(s[b],o)&&(E=!0,s[b+1]=d?bm(O):vm(O)),b=d?io(O):qo(O)}E&&(s[l+1]=d?vm(m):bm(m))}function bD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ni(s,o)>=0}const zn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function e0(s){return s.substring(zn.key,zn.keyEnd)}function Bb(s){return s.substring(zn.value,zn.valueEnd)}function Fp(s,o){const l=zn.textEnd;return l===o?-1:(o=zn.keyEnd=function ID(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,zn.key=o,l),Zh(s,o,l))}function jb(s,o){const l=zn.textEnd;let d=zn.key=Zh(s,o,l);return l===d?-1:(d=zn.keyEnd=function Gc(s,o,l){let d;for(;o<l&&(45===(d=s.charCodeAt(o))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)o++;return o}(s,d,l),d=t0(s,d,l),d=zn.value=Zh(s,d,l),d=zn.valueEnd=function u_(s,o,l){let d=-1,h=-1,m=-1,v=o,b=v;for(;v<l;){const E=s.charCodeAt(v++);if(59===E)return b;34===E||39===E?b=v=n0(s,E,v,l):o===v-4&&85===m&&82===h&&76===d&&40===E?b=v=n0(s,41,v,l):E>32&&(b=v),m=h,h=d,d=-33&E}return b}(s,d,l),t0(s,d,l))}function $c(s){zn.key=0,zn.keyEnd=0,zn.value=0,zn.valueEnd=0,zn.textEnd=s.length}function Zh(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function t0(s,o,l,d){return(o=Zh(s,o,l))<l&&o++,o}function n0(s,o,l,d){let h=-1,m=l;for(;m<d;){const v=s.charCodeAt(m++);if(v==o&&92!==h)return m;h=92==v&&92===h?0:v}throw new Error}function ii(s,o){return function Ts(s,o,l,d){const h=Te(),m=Rt(),v=Oi(2);m.firstUpdatePass&&jh(m,s,v,d),o!==Mt&&Ui(h,v,o)&&f_(m,m.data[Wn()],h,h[11],s,h[v+1]=function qb(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(Ro(s)))),s}(o,l),d,v)}(s,o,null,!0),ii}function ao(s){uo(d_,Lp,s,!1)}function Lp(s,o){for(let l=function ED(s){return $c(s),jb(s,Zh(s,0,zn.textEnd))}(o);l>=0;l=jb(o,l))d_(s,e0(o),Bb(o))}function Up(s){uo(ht,$o,s,!0)}function $o(s,o){for(let l=function Zb(s){return $c(s),Fp(s,Zh(s,0,zn.textEnd))}(o);l>=0;l=Fp(o,l))ht(s,e0(o),!0)}function uo(s,o,l,d){const h=Rt(),m=Oi(2);h.firstUpdatePass&&jh(h,null,m,d);const v=Te();if(l!==Mt&&Ui(v,m,l)){const b=h.data[Wn()];if(Hb(b,d)&&!s0(h,m)){let E=d?b.classesWithoutHost:b.stylesWithoutHost;null!==E&&(l=he(E,l||"")),qv(h,b,v,l,d)}else!function h_(s,o,l,d,h,m,v,b){h===Mt&&(h=Z);let E=0,x=0,O=0<h.length?h[0]:null,L=0<m.length?m[0]:null;for(;null!==O||null!==L;){const q=E<h.length?h[E+1]:void 0,J=x<m.length?m[x+1]:void 0;let Ve,ye=null;O===L?(E+=2,x+=2,q!==J&&(ye=L,Ve=J)):null===L||null!==O&&O<L?(E+=2,ye=O):(x+=2,ye=L,Ve=J),null!==ye&&f_(s,o,l,d,ye,Ve,v,b),O=E<h.length?h[E]:null,L=x<m.length?m[x]:null}}(h,b,v,v[11],v[m+1],v[m+1]=function TD(s,o,l){if(null==l||""===l)return Z;const d=[],h=Ro(l);if(Array.isArray(h))for(let m=0;m<h.length;m++)s(d,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&s(d,m,h[m]);else"string"==typeof h&&o(d,h);return d}(s,o,l),d,m)}}function s0(s,o){return o>=s.expandoStartIndex}function jh(s,o,l,d){const h=s.data;if(null===h[l+1]){const m=h[Wn()],v=s0(s,l);Hb(m,d)&&null===o&&!v&&(o=!1),o=function o0(s,o,l,d){const h=function To(s){const o=gt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=qh(l=Wc(null,s,o,l,d),o.attrs,d),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Wc(h,s,o,l,d),null===m){let E=function a0(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==qo(d))return s[io(d)]}(s,o,d);void 0!==E&&Array.isArray(E)&&(E=Wc(null,s,o,E[1],d),E=qh(E,o.attrs,d),function u0(s,o,l,d){s[io(l?o.classBindings:o.styleBindings)]=d}(s,o,d,E))}else m=function c_(s,o,l){let d;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)d=qh(d,s[m].hostAttrs,l);return qh(d,o.attrs,l)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,d),function Qv(s,o,l,d,h,m){let v=m?o.classBindings:o.styleBindings,b=io(v),E=qo(v);s[d]=l;let O,x=!1;if(Array.isArray(l)){const L=l;O=L[1],(null===O||ni(L,O)>0)&&(x=!0)}else O=l;if(h)if(0!==E){const q=io(s[b+1]);s[d+1]=pp(q,b),0!==q&&(s[q+1]=wm(s[q+1],d)),s[b+1]=function CC(s,o){return 131071&s|o<<17}(s[b+1],d)}else s[d+1]=pp(b,0),0!==b&&(s[b+1]=wm(s[b+1],d)),b=d;else s[d+1]=pp(E,0),0===b?b=d:s[E+1]=wm(s[E+1],d),E=d;x&&(s[d+1]=vm(s[d+1])),Xv(s,O,d,!0),Xv(s,O,d,!1),function Jv(s,o,l,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ni(m,o)>=0&&(l[d+1]=bm(l[d+1]))}(o,O,s,d,m),v=pp(b,E),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,d)}}function Wc(s,o,l,d,h){let m=null;const v=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<v&&(m=o[b],d=qh(d,m.hostAttrs,h),m!==s);)b++;return null!==s&&(l.directiveStylingLast=b),d}function qh(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ht(s,v,!!l||o[++m]))}return void 0===s?null:s}function d_(s,o,l){ht(s,o,Ro(l))}function f_(s,o,l,d,h,m,v,b){if(!(3&o.type))return;const E=s.data,x=E[b+1];Vp(function Cm(s){return 1==(1&s)}(x)?l0(E,o,l,h,qo(x),v):void 0)||(Vp(m)||function wC(s){return 2==(2&s)}(x)&&(m=l0(E,null,l,h,b,v)),function Lc(s,o,l,d,h){const m=En(s);if(o)h?m?s.addClass(l,d):l.classList.add(d):m?s.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:Xi.DashCase;if(null==h)m?s.removeStyle(l,d,v):l.style.removeProperty(d);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),v|=Xi.Important),m?s.setStyle(l,d,h,v):l.style.setProperty(d,h,b?"important":"")}}}(d,v,hs(Wn(),l),h,m))}function l0(s,o,l,d,h,m){const v=null===o;let b;for(;h>0;){const E=s[h],x=Array.isArray(E),O=x?E[1]:E,L=null===O;let q=l[h+1];q===Mt&&(q=L?Z:void 0);let J=L?ru(q,d):O===d?q:void 0;if(x&&!Vp(J)&&(J=ru(E,d)),Vp(J)&&(b=J,v))return b;const ye=s[h+1];h=v?io(ye):qo(ye)}if(null!==o){let E=m?o.residualClasses:o.residualStyles;null!=E&&(b=ru(E,d))}return b}function Vp(s){return void 0!==s}function Hb(s,o){return 0!=(s.flags&(o?16:32))}function Hh(s,o=""){const l=Te(),d=Rt(),h=s+20,m=d.firstCreatePass?_l(d,h,1,o,null):d.data[h],v=l[h]=function kc(s,o){return En(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Rc(d,l,v,m),Or(m,!1)}function p_(s){return zc("",s,""),p_}function zc(s,o,l){const d=Te(),h=function Dr(s,o,l,d){return Ui(s,zi(),l)?o+fe(l)+d:Mt}(d,s,o,l);return h!==Mt&&Ca(d,Wn(),h),zc}function Kc(s,o,l,d,h){const m=Te(),v=Pp(m,s,o,l,d,h);return v!==Mt&&Ca(m,Wn(),v),Kc}const Xc=void 0;var eE=["en",[["a","p"],["AM","PM"],Xc],[["AM","PM"],Xc,Xc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xc,"{1} 'at' {0}",Xc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xb(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let El={};function b_(s){const o=function I_(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=nE(o);if(l)return l;const d=o.split("-")[0];if(l=nE(d),l)return l;if("en"===d)return eE;throw new Error(`Missing locale data for the locale "${s}".`)}function E_(s){return b_(s)[_t.PluralCase]}function nE(s){return s in El||(El[s]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[s]),El[s]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const Gh="en-US";let p0=Gh;function Kn(s,o,l,d,h){if(s=re(s),Array.isArray(s))for(let m=0;m<s.length;m++)Kn(s[m],o,l,d,h);else{const m=Rt(),v=Te();let b=Sp(s)?s:re(s.provide),E=Mv(s);const x=hn(),O=1048575&x.providerIndexes,L=x.directiveStart,q=x.providerIndexes>>20;if(Sp(s)||!s.multi){const J=new Pn(E,h,Cu),ye=Tu(b,o,h?O:O+q,L);-1===ye?(Ku(So(x,v),m,b),yt(m,s,o.length),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(J),v.push(J)):(l[ye]=J,v[ye]=J)}else{const J=Tu(b,o,O+q,L),ye=Tu(b,o,O,O+q),Ve=J>=0&&l[J],je=ye>=0&&l[ye];if(h&&!je||!h&&!Ve){Ku(So(x,v),m,b);const rt=function eA(s,o,l,d,h){const m=new Pn(s,l,Cu);return m.multi=[],m.index=o,m.componentProviders=0,S0(m,h,d&&!l),m}(h?Gp:yE,l.length,h,d,E);!h&&je&&(l[ye].providerFactory=rt),yt(m,s,o.length,0),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(rt),v.push(rt)}else yt(m,s,J>-1?J:ye,S0(l[h?ye:J],E,!h&&d));!h&&d&&je&&l[ye].componentProviders++}}}function yt(s,o,l,d){const h=Sp(o),m=function YC(s){return!!s.useClass}(o);if(h||m){const E=(m?re(o.useClass):o).prototype.ngOnDestroy;if(E){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=x.indexOf(l);-1===O?x.push(l,[d,E]):x[O+1].push(d,E)}else x.push(l,E)}}}function S0(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Tu(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function yE(s,o,l,d){return $t(this.multi,[])}function Gp(s,o,l,d){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=mi(l,l[1],this.providerFactory.index,d);m=b.slice(0,v),$t(h,m);for(let E=v;E<b.length;E++)m.push(b[E])}else m=[],$t(h,m);return m}function $t(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function xr(s,o=[]){return l=>{l.providersResolver=(d,h)=>function _E(s,o,l){const d=Rt();if(d.firstCreatePass){const h=an(s);Kn(l,d.data,d.blueprint,h,!0),Kn(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class vE{}class ir{resolveComponentFactory(o){throw function Rr(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Go=(()=>{class s{}return s.NULL=new ir,s})();function x0(){return rd(hn(),Te())}function rd(s,o){return new Du(wr(s,o))}let Du=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=x0,s})();function tA(s){return s instanceof Du?s.nativeElement:s}class Xh{}let Wp=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function He(){const s=Te(),l=Zr(hn().index,s);return function CE(s){return s[11]}(fi(l)?l:s)}(),s})(),Ml=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class zp{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ol=new zp("13.1.3"),lo={};function Pl(s,o,l,d,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&d.push(In(m)),qi(m))for(let b=10;b<m.length;b++){const E=m[b],x=E[1].firstChild;null!==x&&Pl(E[1],E,x,d)}const v=l.type;if(8&v)Pl(s,o,l.child,d);else if(32&v){const b=lp(l,o);let E;for(;E=b();)d.push(E)}else if(16&v){const b=dl(o,l);if(Array.isArray(b))d.push(...b);else{const E=yi(o[16]);Pl(E[1],E,b,d,!0)}}l=h?l.projectionNext:l.next}return d}class co{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Pl(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(qi(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(Eh(o,d),Ju(l,d))}this._attachedToViewContainer=!1}_(this._lView[1],this._lView)}onDestroy(o){fv(this._lView[1],this._lView,null,o)}markForCheck(){Ep(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){yl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function HC(s,o,l){Io(!0);try{yl(s,o,l)}finally{Io(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ev(s,o){fl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class bE extends co{constructor(o){super(o),this._view=o}detectChanges(){qC(this._view)}checkNoChanges(){!function JT(s){Io(!0);try{qC(s)}finally{Io(!1)}}(this._view)}get context(){return null}}class id extends Go{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Un(o);return new N_(l,this.ngModule)}}function k_(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const M0=new un("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>wh});class N_ extends vE{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function yC(s){return s.map(_C).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return k_(this.componentDef.inputs)}get outputs(){return k_(this.componentDef.outputs)}create(o,l,d,h){const m=(h=h||this.ngModule)?function Kp(s,o){return{get:(l,d,h)=>{const m=s.get(l,lo,h);return m!==lo||d===lo?m:o.get(l,d,h)}}}(o,h.injector):o,v=m.get(Xh,Gi),b=m.get(Ml,null),E=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",O=d?function Cp(s,o,l){if(En(s))return s.selectRootElement(o,l===Wt.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(E,d,this.componentDef.encapsulation):pu(v.createRenderer(null,this.componentDef),x,function sd(s){const o=s.toLowerCase();return"svg"===o?$a:"math"===o?"http://www.w3.org/1998/MathML/":null}(x)),L=this.componentDef.onPush?576:528,q=function ob(s,o){return{components:[],scheduler:s||wh,clean:eD,playerHandler:o||null,flags:0}}(),J=kh(0,null,null,1,0,null,null,null,null,null),ye=Mh(null,J,q,L,null,null,v,E,b,m);let Ve,je;da(ye);try{const rt=function Pv(s,o,l,d,h,m){const v=l[1];l[20]=s;const E=_l(v,20,2,"#host",null),x=E.mergedAttrs=o.hostAttrs;null!==x&&(Ip(E,x,!0),null!==s&&(Gu(h,s,x),null!==E.classes&&tv(h,s,E.classes),null!==E.styles&&jo(h,s,E.styles)));const O=d.createRenderer(s,o),L=Mh(l,hv(o),null,o.onPush?64:16,l[20],E,d,O,m||null,null);return v.firstCreatePass&&(Ku(So(E,l),v,o.type),mv(v,E),_v(E,l.length,1)),Nm(l,L),l[20]=L}(O,this.componentDef,ye,v,E);if(O)if(d)Gu(E,O,["ng-version",Ol.full]);else{const{attrs:Ee,classes:ft}=function vC(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++d]):8===h&&l.push(m);else{if(!Nn(h))break;h=m}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ee&&Gu(E,O,Ee),ft&&ft.length>0&&tv(E,O,ft.join(" "))}if(je=Wi(J,20),void 0!==l){const Ee=je.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const Bt=l[ft];Ee.push(null!=Bt?Array.from(Bt):null)}}Ve=function kv(s,o,l,d,h){const m=l[1],v=function iM(s,o,l){const d=hn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),BC(s,d,o,vp(s,o,1,null),l));const h=mi(o,s,d.directiveStart,d);kr(h,o);const m=wr(d,o);return m&&kr(m,o),h}(m,l,o);if(d.components.push(v),s[8]=v,h&&h.forEach(E=>E(v,o)),o.contentQueries){const E=hn();o.contentQueries(1,v,E.directiveStart)}const b=hn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(cr(b.index),HT(l[1],b,0,b.directiveStart,b.directiveEnd,o),UC(o,v)),v}(rt,this.componentDef,ye,q,[dM]),Vc(J,ye,null)}finally{ju()}return new Yp(this.componentType,Ve,rd(je,ye),ye,je)}}class Yp extends class Jh{}{constructor(o,l,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new bE(h),this.componentType=o}get injector(){return new Vn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class ef{}class TE{}const od=new Map;class kl extends ef{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new id(this);const d=$n(o);this._bootstrapComponents=Bo(d.bootstrap),this._r3Injector=WC(o,l,[{provide:ef,useValue:this},{provide:Go,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=Is.THROW_IF_NOT_FOUND,d=ut.Default){return o===Is||o===ef||o===Iv?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class tf extends TE{constructor(o){super(),this.moduleType=o,null!==$n(o)&&function DE(s){const o=new Set;!function l(d){const h=$n(d,!0),m=h.id;null!==m&&(function oi(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(m,od.get(m),d),od.set(m,d));const v=Bo(h.imports);for(const b of v)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new kl(this.moduleType,o)}}function P0(s,o,l,d){return function OE(s,o,l,d,h,m){const v=o+l;return Ui(s,v,h)?Ea(s,v+1,m?d.call(m,h):d(h)):Ta(s,v+1)}(Te(),Jn(),s,o,l,d)}function SE(s,o,l,d,h){return function k0(s,o,l,d,h,m,v){const b=o+l;return wl(s,b,h,m)?Ea(s,b+2,v?d.call(v,h,m):d(h,m)):Ta(s,b+2)}(Te(),Jn(),s,o,l,d,h)}function Ta(s,o){const l=s[o];return l===Mt?void 0:l}function N0(s){return o=>{setTimeout(s,void 0,o)}}const Da=class RE extends a.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){var h,m,v;let b=o,E=l||(()=>null),x=d;if(o&&"object"==typeof o){const L=o;b=null===(h=L.next)||void 0===h?void 0:h.bind(L),E=null===(m=L.error)||void 0===m?void 0:m.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(E=N0(E),b&&(b=N0(b)),x&&(x=N0(x)));const O=super.subscribe({next:b,error:E,complete:x});return o instanceof ee.w0&&o.add(O),O}};function sA(){return this._results[Rh()]()}class R0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Rh(),d=R0.prototype;d[l]||(d[l]=sA)}get changes(){return this._changes||(this._changes=new Da)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=hr(o);(this._changesDetected=!function Hg(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=o[d];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ho=(()=>{class s{}return s.__NG_ELEMENT_ID__=FE,s})();const rf=ho,oA=class extends rf{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o){const l=this._declarationTContainer.tViews,d=Mh(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(l)),Vc(l,d,o),new co(d)}};function FE(){return eg(hn(),Te())}function eg(s,o){return 4&s.type?new oA(o,s,rd(s,o)):null}let fo=(()=>{class s{}return s.__NG_ELEMENT_ID__=LE,s})();function LE(){return V_(hn(),Te())}const sf=fo,UE=class extends sf{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return rd(this._hostTNode,this._hostLView)}get injector(){return new Vn(this._hostTNode,this._hostLView)}get parentInjector(){const o=kn(this._hostTNode,this._hostLView);if(gi(o)){const l=Xa(o,this._hostLView),d=Xn(o);return new Vn(l[1].data[d+8],l)}return new Vn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=U_(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){const h=o.createEmbeddedView(l||{});return this.insert(h,d),h}createComponent(o,l,d,h,m){const v=o&&!function ga(s){return"function"==typeof s}(o);let b;if(v)b=l;else{const L=l||{};b=L.index,d=L.injector,h=L.projectableNodes,m=L.ngModuleRef}const E=v?o:new N_(Un(o)),x=d||this.parentInjector;if(!m&&null==E.ngModule&&x){const L=x.get(ef,null);L&&(m=L)}const O=E.create(x,h,void 0,m);return this.insert(O.hostView,b),O}insert(o,l){const d=o._lView,h=d[1];if(function tc(s){return qi(s[3])}(d)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const L=d[3],q=new UE(L,L[6],L[3]);q.detach(q.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function Nc(s,o,l,d){const h=10+d,m=l.length;d>0&&(l[h-1][4]=o),d<m-10?(o[4]=l[h],Qd(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function hp(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,d,v,m);const b=Th(m,v),E=d[11],x=Qe(E,v[7]);return null!==x&&function vi(s,o,l,d,h,m){d[0]=h,d[6]=o,fl(s,d,l,1,h,m)}(h,v[6],E,d,x,b),o.attachToViewContainerRef(),Qd(tg(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=U_(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=Eh(this._lContainer,l);d&&(Ju(tg(this._lContainer),l),_(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=Eh(this._lContainer,l);return d&&null!=Ju(tg(this._lContainer),l)?new co(d):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function U_(s){return s[8]}function tg(s){return s[8]||(s[8]=[])}function V_(s,o){let l;const d=o[s.index];if(qi(d))l=d;else{let h;if(8&s.type)h=In(d);else{const m=o[11];h=m.createComment("");const v=wr(s,o);B(m,Qe(m,v),h,function it(s,o){return En(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=l=km(d,o,h,s),Nm(o,l)}return new UE(l,s,o)}class ad{constructor(o){this.queryList=o,this.matches=null}clone(){return new ad(this.queryList)}setDirty(){this.queryList.setDirty()}}class B_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<d;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new B_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==cd(o,l).matches&&this.queries[l].setDirty()}}class Z_{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class ng{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(o,h);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new ng(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class j_{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new j_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(o,l,VE(l,m)),this.matchTNodeWithReadOption(o,l,Oo(l,o,m,!1,!1))}else d===ho?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Oo(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Du||h===fo||h===ho&&4&l.type)this.addMatch(l.index,-2);else{const m=Oo(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function VE(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function BE(s,o,l,d){return-1===l?function uA(s,o){return 11&s.type?rd(s,o):4&s.type?eg(s,o):null}(o,s):-2===l?function ZE(s,o,l){return l===Du?rd(o,s):l===ho?eg(o,s):l===fo?V_(o,s):void 0}(s,o,d):mi(s,s[1],l,o)}function F0(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const m=s.data,v=l.matches,b=[];for(let E=0;E<v.length;E+=2){const x=v[E];b.push(x<0?null:BE(o,m[x],v[E+1],l.metadata.read))}h.matches=b}return h.matches}function af(s,o,l,d){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=F0(s,o,h,l);for(let b=0;b<m.length;b+=2){const E=m[b];if(E>0)d.push(v[b/2]);else{const x=m[b+1],O=o[-E];for(let L=10;L<O.length;L++){const q=O[L];q[17]===q[3]&&af(q[1],q,x,d)}if(null!==O[9]){const L=O[9];for(let q=0;q<L.length;q++){const J=L[q];af(J[1],J,x,d)}}}}}return d}function jE(s){const o=Te(),l=Rt(),d=ca();Ka(d+1);const h=cd(l,d);if(s.dirty&&Gn(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?af(l,o,d,[]):F0(l,o,h,d);s.reset(m,tA),s.notifyOnChanges()}return!0}return!1}function L0(s,o,l,d){const h=Rt();if(h.firstCreatePass){const m=hn();(function Rl(s,o,l){null===s.queries&&(s.queries=new ng),s.queries.track(new j_(o,l))})(h,new Z_(o,l,d),m.index),function qE(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function U0(s,o,l){const d=new R0(4==(4&l));fv(s,o,d,d.destroy),null===o[19]&&(o[19]=new B_),o[19].queries.push(new ad(d))}(h,Te(),l)}function ud(){return function ld(s,o){return s[19].queries[o].queryList}(Te(),ca())}function cd(s,o){return s.queries.getByIndex(o)}function V0(s,o){return eg(s,o)}function xs(...s){}const Q_=new un("Application Initializer");let xa=(()=>{class s{constructor(l){this.appInits=l,this.resolve=xs,this.reject=xs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Jm(m))l.push(m);else if(Xm(m)){const v=new Promise((b,E)=>{m.subscribe({complete:b,error:E})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Y(Q_,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const K0=new un("AppId"),rI={provide:K0,useFactory:function nI(){return`${Y0()}${Y0()}${Y0()}`},deps:[]};function Y0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iI=new un("Platform Initializer"),cf=new un("Platform ID"),J_=new un("appBootstrapListener");let Q0=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const sg=new un("LocaleId"),J0=new un("DefaultCurrencyCode");class yA{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Ul=(()=>{class s{compileModuleSync(l){return new tf(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),m=Bo($n(l).declarations).reduce((v,b)=>{const E=Un(b);return E&&v.push(new N_(E)),v},[]);return new yA(d,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const vA=(()=>Promise.resolve(0))();function X0(s){"undefined"==typeof Zone?vA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class An{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function sI(){let s=Lt.requestAnimationFrame,o=Lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function oI(s){const o=()=>{!function Ma(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Lt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,hf(s),s.isCheckStableRunning=!0,X_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),hf(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,m,v,b)=>{try{return ew(s),l.invokeTask(h,m,v,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),aI(s)}},onInvoke:(l,d,h,m,v,b,E)=>{try{return ew(s),l.invoke(h,m,v,b,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),aI(s)}},onHasTask:(l,d,h,m)=>{l.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,hf(s),X_(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!An.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(An.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,wA,xs,xs);try{return m.runTask(v,l,d)}finally{m.cancelTask(v)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const wA={};function X_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function hf(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ew(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function aI(s){s._nesting--,X_(s)}class CA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}let uI=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{An.assertNotInAngularZone(),X0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())X0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Y(An))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),lI=(()=>{class s{constructor(){this._applications=new Map,tw.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return tw.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();class bA{addToWindow(o){}findTestabilityInTree(o,l,d){return null}}function EA(s){tw=s}let Ko,tw=new bA;const cI=new un("AllowMultipleToken");class DA{constructor(o,l){this.name=o,this.token=l}}function dI(s,o,l=[]){const d=`Platform: ${o}`,h=new un(d);return(m=[])=>{let v=nw();if(!v||v.injector.get(cI,!1))if(s)s(l.concat(m).concat({provide:h,useValue:!0}));else{const b=l.concat(m).concat({provide:h,useValue:!0},{provide:Dv,useValue:"platform"});!function AA(s){if(Ko&&!Ko.destroyed&&!Ko.injector.get(cI,!1))throw new Ne(400,"");Ko=s.get(fI);const o=s.get(iI,null);o&&o.forEach(l=>l())}(Is.create({providers:b,name:d}))}return function hI(s){const o=nw();if(!o)throw new Ne(401,"");return o}()}}function nw(){return Ko&&!Ko.destroyed?Ko:null}let fI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const b=function pI(s,o){let l;return l="noop"===s?new CA:("zone.js"===s?void 0:s)||new An({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),E=[{provide:An,useValue:b}];return b.run(()=>{const x=Is.create({providers:E,parent:this.injector,name:l.moduleType.name}),O=l.create(x),L=O.injector.get(Sc,null);if(!L)throw new Ne(402,"");return b.runOutsideAngular(()=>{const q=b.onError.subscribe({next:J=>{L.handleError(J)}});O.onDestroy(()=>{Ms(this._modules,O),q.unsubscribe()})}),function gI(s,o,l){try{const d=l();return Jm(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(L,b,()=>{const q=O.injector.get(xa);return q.runInitializers(),q.donePromise.then(()=>(function kD(s){nt(s,"Expected localeId to be defined"),"string"==typeof s&&(p0=s.toLowerCase().replace(/_/g,"-"))}(O.injector.get(sg,Gh)||Gh),this._moduleDoBootstrap(O),O))})})}bootstrapModule(l,d=[]){const h=de({},d);return function IA(s,o,l){const d=new tf(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const d=l.injector.get(Vl);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ne(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Y(Is))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function de(s,o){return Array.isArray(o)?o.reduce(de,s):Object.assign(Object.assign({},s),o)}let Vl=(()=>{class s{constructor(l,d,h,m,v){this._zone=l,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new F.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),E=new F.y(x=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{An.assertNotInAngularZone(),X0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{An.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{O.unsubscribe(),L.unsubscribe()}});this.isStable=(0,oe.T)(b,E.pipe((0,se.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Ne(405,"");let h;h=l instanceof vE?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const m=function TA(s){return s.isBoundToModule}(h)?void 0:this._injector.get(ef),b=h.create(Is.NULL,[],d||h.selector,m),E=b.location.nativeElement,x=b.injector.get(uI,null),O=x&&b.injector.get(lI);return x&&O&&O.registerApplication(E,x),b.onDestroy(()=>{this.detachView(b.hostView),Ms(this.components,b),O&&O.unregisterApplication(E)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Ms(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(J_,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Y(An),Y(Is),Y(Sc),Y(Go),Y(xa))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function Ms(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Bl=!0,_I=!1;function hd(){return _I=!0,Bl}function yI(){if(_I)throw new Error("Cannot enable prod mode after platform setup.");Bl=!1}let rw=(()=>{class s{}return s.__NG_ELEMENT_ID__=iw,s})();function iw(s){return function sw(s,o,l){if(Dd(s)&&!l){const d=Zr(s.index,o);return new co(d,d)}return 47&s.type?new co(o[16],o):null}(hn(),Te(),16==(16&s))}class jl{constructor(){}supports(o){return Op(o)}create(o){return new PA(o)}}const CI=(s,o)=>o;class PA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||CI}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,m=null;for(;l||d;){const v=!d||l&&l.currentIndex<bI(d,h,m)?l:d,b=bI(v,h,m),E=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const x=b-h,O=E-h;if(x!=O){for(let q=0;q<x;q++){const J=q<m.length?m[q]:m[q]=0,ye=J+q;O<=ye&&ye<x&&(m[q]=J+1)}m[v.previousIndex]=O-x}}b!==E&&o(v,b,E)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Op(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],v=this._trackByFn(b,m),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,m,v,b)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,b),d=!0),l=l._next}else h=0,function gM(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Rh()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,b=>{v=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,b,v,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,v,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new kA(l,d),m,h),o}_verifyReinsertion(o,l,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new lg),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lg),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class kA{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class lg{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new lw,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bI(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class cw{constructor(){}supports(o){return o instanceof Map||Lv(o)}create(){return new cg}}class cg{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Lv(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const d=new iy(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class iy{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dg(){return new hg([new jl])}let hg=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||dg()),deps:[[s,new ki,new nn]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Ne(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:dg}),s})();function dw(){return new gd([new cw])}let gd=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||dw()),deps:[[s,new ki,new nn]]}}find(l){const d=this.factories.find(m=>m.supports(l));if(d)return d;throw new Ne(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:dw}),s})();const hw=[new cw],ql=new hg([new jl]),mf=new gd(hw),md=dI(null,"core",[{provide:cf,useValue:"unknown"},{provide:fI,deps:[Is]},{provide:lI,deps:[]},{provide:Q0,deps:[]}]),_d=[{provide:Vl,useClass:Vl,deps:[An,Is,Sc,Go,xa]},{provide:M0,deps:[An],useFactory:function fw(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:xa,useClass:xa,deps:[[new nn,Q_]]},{provide:Ul,useClass:Ul,deps:[]},rI,{provide:hg,useFactory:function RA(){return ql},deps:[]},{provide:gd,useFactory:function _f(){return mf},deps:[]},{provide:sg,useFactory:function II(s){return s||function Hl(){return"undefined"!=typeof $localize&&$localize.locale||Gh}()},deps:[[new Ir(sg),new nn,new ki]]},{provide:J0,useValue:"USD"}];let TI=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Y(Vl))},s.\u0275mod=Qr({type:s}),s.\u0275inj=zr({providers:_d}),s})()},3942:(ze,we,R)=>{R.d(we,{Z:()=>Ne});var a=R(2090),ee=R(4859),F=R(9681),oe=R(1877);class se{constructor(fe,pe){this._delegate=fe,this.firebase=pe,(0,F._addComponent)(fe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(fe,pe=F._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Oe=Ze.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:pe})}_removeServiceInstance(fe,pe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(pe)}_addComponent(fe){(0,F._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,F._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function he(){const Be=function ae(Be){const fe={},pe={__esModule:!0,initializeApp:function Fe(We,Ce={}){const H=F.initializeApp(We,Ce);if((0,a.r3)(fe,H.name))return fe[H.name];const ne=new Be(H,pe);return fe[H.name]=ne,ne},app:Ze,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function De(We){const Ce=We.name,H=Ce.replace("-compat","");if(F._registerComponent(We)&&"PUBLIC"===We.type){const ne=(ce=Ze())=>{if("function"!=typeof ce[H])throw ue.create("invalid-app-argument",{appName:Ce});return ce[H]()};void 0!==We.serviceProps&&(0,a.ZB)(ne,We.serviceProps),pe[H]=ne,Be.prototype[H]=function(...ce){return this._getService.bind(this,Ce).apply(this,We.multipleInstances?ce:[])}}return"PUBLIC"===We.type?pe[H]:null},removeApp:function Oe(We){delete fe[We]},useAsService:function Je(We,Ce){return"serverAuth"===Ce?null:Ce},modularAPIs:F}};function Ze(We){if(!(0,a.r3)(fe,We=We||F._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:We});return fe[We]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function Ke(){return Object.keys(fe).map(We=>fe[We])}}),Ze.App=Be,pe}(se);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function fe(pe){(0,a.ZB)(Be,pe)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Be}(),G=new oe.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=j;!function Ie(Be){(0,F.registerVersion)("@firebase/app-compat","0.1.26",Be)}()},9681:(ze,we,R)=>{R.r(we),R.d(we,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ls,_DEFAULT_ENTRY_NAME:()=>nt,_addComponent:()=>ar,_addOrOverwriteComponent:()=>rn,_apps:()=>Sn,_clearComponents:()=>us,_components:()=>Xt,_getProvider:()=>zr,_registerComponent:()=>ci,_removeServiceInstance:()=>Qn,deleteApp:()=>ut,getApp:()=>Mr,getApps:()=>Pe,initializeApp:()=>di,onLog:()=>Yt,registerVersion:()=>Mn,setLogLevel:()=>Fs});var a=R(5861),ee=R(4859),F=R(1877),oe=R(2090),se=R(8766);class _e{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ae=>{if(function ue($){const X=$.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Ae)){const et=Ae.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Ae=>Ae).join(" ")}}const ae="@firebase/app",j=new F.Yd("@firebase/app"),nt="[DEFAULT]",Et={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Sn=new Map,Xt=new Map;function ar($,X){try{$.container.addComponent(X)}catch(Ae){j.debug(`Component ${X.name} failed to register with FirebaseApp ${$.name}`,Ae)}}function rn($,X){$.container.addOrOverwriteComponent(X)}function ci($){const X=$.name;if(Xt.has(X))return j.debug(`There were multiple attempts to register component ${X}.`),!1;Xt.set(X,$);for(const Ae of Sn.values())ar(Ae,$);return!0}function zr($,X){const Ae=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),$.container.getProvider(X)}function Qn($,X,Ae=nt){zr($,X).clearInstance(Ae)}function us(){Xt.clear()}const Kt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class xn{constructor(X,Ae,et){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw Kt.create("app-deleted",{appName:this._name})}}const ls="9.8.2";function di($,X={}){"object"!=typeof X&&(X={name:X});const Ae=Object.assign({name:nt,automaticDataCollectionEnabled:!1},X),et=Ae.name;if("string"!=typeof et||!et)throw Kt.create("bad-app-name",{appName:String(et)});const Ct=Sn.get(et);if(Ct){if((0,oe.vZ)($,Ct.options)&&(0,oe.vZ)(Ae,Ct.config))return Ct;throw Kt.create("duplicate-app",{appName:et})}const Ot=new ee.H0(et);for(const At of Xt.values())Ot.addComponent(At);const sn=new xn($,Ae,Ot);return Sn.set(et,sn),sn}function Mr($=nt){const X=Sn.get($);if(!X)throw Kt.create("no-app",{appName:$});return X}function Pe(){return Array.from(Sn.values())}function ut($){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,a.Z)(function*($){const X=$.name;Sn.has(X)&&(Sn.delete(X),yield Promise.all($.container.getProviders().map(Ae=>Ae.delete())),$.isDeleted=!0)})).apply(this,arguments)}function Mn($,X,Ae){var et;let Ct=null!==(et=Et[$])&&void 0!==et?et:$;Ae&&(Ct+=`-${Ae}`);const Ot=Ct.match(/\s|\//),sn=X.match(/\s|\//);if(Ot||sn){const At=[`Unable to register library "${Ct}" with version "${X}":`];return Ot&&At.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Ot&&sn&&At.push("and"),sn&&At.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void j.warn(At.join(" "))}ci(new ee.wA(`${Ct}-version`,()=>({library:Ct,version:X}),"VERSION"))}function Yt($,X){if(null!==$&&"function"!=typeof $)throw Kt.create("invalid-log-argument");(0,F.Am)($,X)}function Fs($){(0,F.Ub)($)}const bn="firebase-heartbeat-store";let Kr=null;function Ua(){return Kr||(Kr=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:($,X)=>{0===X&&$.createObjectStore(bn)}}).catch($=>{throw Kt.create("storage-open",{originalErrorMessage:$.message})})),Kr}function at(){return(at=(0,a.Z)(function*($){try{return(yield Ua()).transaction(bn).objectStore(bn).get(Zi($))}catch(X){throw Kt.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function pt($,X){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,a.Z)(function*($,X){try{const et=(yield Ua()).transaction(bn,"readwrite");return yield et.objectStore(bn).put(X,Zi($)),et.done}catch(Ae){throw Kt.create("storage-set",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function Zi($){return`${$.name}!${$.options.appId}`}class zt{constructor(X){this.container=X,this._heartbeatsCache=null;const Ae=this.container.getProvider("app").getImmediate();this._storage=new W(Ae),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var X=this;return(0,a.Z)(function*(){const et=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=Yr();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!X._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Ct))return X._heartbeatsCache.heartbeats.push({date:Ct,agent:et}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Ot=>{const sn=new Date(Ot.date).valueOf();return Date.now()-sn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,a.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ae=Yr(),{heartbeatsToSend:et,unsentEntries:Ct}=function Z($,X=1024){const Ae=[];let et=$.slice();for(const Ct of $){const Ot=Ae.find(sn=>sn.agent===Ct.agent);if(Ot){if(Ot.dates.push(Ct.date),z(Ae)>X){Ot.dates.pop();break}}else if(Ae.push({agent:Ct.agent,dates:[Ct.date]}),z(Ae)>X){Ae.pop();break}et=et.slice(1)}return{heartbeatsToSend:Ae,unsentEntries:et}}(X._heartbeatsCache.heartbeats),Ot=(0,oe.L)(JSON.stringify({version:2,heartbeats:et}));return X._heartbeatsCache.lastSentHeartbeatDate=Ae,Ct.length>0?(X._heartbeatsCache.heartbeats=Ct,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Ot})()}}function Yr(){return(new Date).toISOString().substring(0,10)}class W{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,a.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function Wt($){return at.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ae=this;return(0,a.Z)(function*(){var et;if(yield Ae._canUseIndexedDBPromise){const Ot=yield Ae.read();return pt(Ae.app,{lastSentHeartbeatDate:null!==(et=X.lastSentHeartbeatDate)&&void 0!==et?et:Ot.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ae=this;return(0,a.Z)(function*(){var et;if(yield Ae._canUseIndexedDBPromise){const Ot=yield Ae.read();return pt(Ae.app,{lastSentHeartbeatDate:null!==(et=X.lastSentHeartbeatDate)&&void 0!==et?et:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...X.heartbeats]})}})()}}function z($){return(0,oe.L)(JSON.stringify({version:2,heartbeats:$})).length}!function be($){ci(new ee.wA("platform-logger",X=>new _e(X),"PRIVATE")),ci(new ee.wA("heartbeat",X=>new zt(X),"PRIVATE")),Mn(ae,"0.7.25",$),Mn(ae,"0.7.25","esm2017"),Mn("fire-js","")}("")},4859:(ze,we,R)=>{R.d(we,{wA:()=>F,H0:()=>ae,zt:()=>se});var a=R(5861),ee=R(2090);class F{constructor(j,G,re){this.name=j,this.instanceFactory=G,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class se{constructor(j,G){this.name=j,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const G=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(G)){const re=new ee.BH;if(this.instancesDeferred.set(G,re),this.isInitialized(G)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:G});qe&&re.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(G).promise}getImmediate(j){var G;const re=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),qe=null!==(G=null==j?void 0:j.optional)&&void 0!==G&&G;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Ie){if(qe)return null;throw Ie}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(G){}for(const[G,re]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(G);try{const Ie=this.getOrInitializeService({instanceIdentifier:qe});re.resolve(Ie)}catch(Ie){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,a.Z)(function*(){const G=Array.from(j.instances.values());yield Promise.all([...G.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...G.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:G={}}=j,re=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:re,options:G});for(const[Ie,Ne]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Ie)&&Ne.resolve(qe);return qe}onInit(j,G){var re;const qe=this.normalizeInstanceIdentifier(G),Ie=null!==(re=this.onInitCallbacks.get(qe))&&void 0!==re?re:new Set;Ie.add(j),this.onInitCallbacks.set(qe,Ie);const Ne=this.instances.get(qe);return Ne&&j(Ne,qe),()=>{Ie.delete(j)}}invokeOnInitCallbacks(j,G){const re=this.onInitCallbacks.get(G);if(re)for(const qe of re)try{qe(j,G)}catch(Ie){}}getOrInitializeService({instanceIdentifier:j,options:G={}}){let re=this.instances.get(j);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(he=j,he===oe?void 0:he),options:G}),this.instances.set(j,re),this.instancesOptions.set(j,G),this.invokeOnInitCallbacks(re,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,re)}catch(qe){}var he;return re||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const G=this.getProvider(j.name);if(G.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);G.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const G=new se(j,this);return this.providers.set(j,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ze,we,R)=>{R.d(we,{in:()=>ee,Yd:()=>ue,Ub:()=>ae,Am:()=>he});const a=[];var ee=(()=>{return(j=ee||(ee={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",ee;var j})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},oe=ee.INFO,se={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},_e=(j,G,...re)=>{if(G<j.logLevel)return;const qe=(new Date).toISOString(),Ie=se[G];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ie](`[${qe}]  ${j.name}:`,...re)};class ue{constructor(G){this.name=G,this._logLevel=oe,this._logHandler=_e,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function ae(j){a.forEach(G=>{G.setLogLevel(j)})}function he(j,G){for(const re of a){let qe=null;G&&G.level&&(qe=F[G.level]),re.userLogHandler=null===j?null:(Ie,Ne,...Be)=>{const fe=Be.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch(Oe){return null}}).filter(pe=>pe).join(" ");Ne>=(null!=qe?qe:Ie.logLevel)&&j({level:ee[Ne].toLowerCase(),message:fe,args:Be,type:Ie.name})}}}},8766:(ze,we,R)=>{R.d(we,{Lj:()=>Fe,X3:()=>Ze});var a=R(5861);let F,oe;const ue=new WeakMap,ae=new WeakMap,he=new WeakMap,j=new WeakMap,G=new WeakMap;let Ie={get(Ce,H,ne){if(Ce instanceof IDBTransaction){if("done"===H)return ae.get(Ce);if("objectStoreNames"===H)return Ce.objectStoreNames||he.get(Ce);if("store"===H)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return pe(Ce[H])},set:(Ce,H,ne)=>(Ce[H]=ne,!0),has:(Ce,H)=>Ce instanceof IDBTransaction&&("done"===H||"store"===H)||H in Ce};function fe(Ce){return"function"==typeof Ce?function Be(Ce){return Ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ce)?function(...H){return Ce.apply(Oe(this),H),pe(ue.get(this))}:function(...H){return pe(Ce.apply(Oe(this),H))}:function(H,...ne){const ce=Ce.call(Oe(this),H,...ne);return he.set(ce,H.sort?H.sort():[H]),pe(ce)}}(Ce):(Ce instanceof IDBTransaction&&function qe(Ce){if(ae.has(Ce))return;const H=new Promise((ne,ce)=>{const ge=()=>{Ce.removeEventListener("complete",Me),Ce.removeEventListener("error",ie),Ce.removeEventListener("abort",ie)},Me=()=>{ne(),ge()},ie=()=>{ce(Ce.error||new DOMException("AbortError","AbortError")),ge()};Ce.addEventListener("complete",Me),Ce.addEventListener("error",ie),Ce.addEventListener("abort",ie)});ae.set(Ce,H)}(Ce),((Ce,H)=>H.some(ne=>Ce instanceof ne))(Ce,function se(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ce,Ie):Ce)}function pe(Ce){if(Ce instanceof IDBRequest)return function re(Ce){const H=new Promise((ne,ce)=>{const ge=()=>{Ce.removeEventListener("success",Me),Ce.removeEventListener("error",ie)},Me=()=>{ne(pe(Ce.result)),ge()},ie=()=>{ce(Ce.error),ge()};Ce.addEventListener("success",Me),Ce.addEventListener("error",ie)});return H.then(ne=>{ne instanceof IDBCursor&&ue.set(ne,Ce)}).catch(()=>{}),G.set(H,Ce),H}(Ce);if(j.has(Ce))return j.get(Ce);const H=fe(Ce);return H!==Ce&&(j.set(Ce,H),G.set(H,Ce)),H}const Oe=Ce=>G.get(Ce);function Ze(Ce,H,{blocked:ne,upgrade:ce,blocking:ge,terminated:Me}={}){const ie=indexedDB.open(Ce,H),mt=pe(ie);return ce&&ie.addEventListener("upgradeneeded",Nt=>{ce(pe(ie.result),Nt.oldVersion,Nt.newVersion,pe(ie.transaction))}),ne&&ie.addEventListener("blocked",()=>ne()),mt.then(Nt=>{Me&&Nt.addEventListener("close",()=>Me()),ge&&Nt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),mt}function Fe(Ce,{blocked:H}={}){const ne=indexedDB.deleteDatabase(Ce);return H&&ne.addEventListener("blocked",()=>H()),pe(ne).then(()=>{})}const Ke=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Je=new Map;function We(Ce,H){if(!(Ce instanceof IDBDatabase)||H in Ce||"string"!=typeof H)return;if(Je.get(H))return Je.get(H);const ne=H.replace(/FromIndex$/,""),ce=H!==ne,ge=De.includes(ne);if(!(ne in(ce?IDBIndex:IDBObjectStore).prototype)||!ge&&!Ke.includes(ne))return;const Me=function(){var ie=(0,a.Z)(function*(mt,...Nt){const Cn=this.transaction(mt,ge?"readwrite":"readonly");let nt=Cn.store;return ce&&(nt=nt.index(Nt.shift())),(yield Promise.all([nt[ne](...Nt),ge&&Cn.done]))[0]});return function(Nt){return ie.apply(this,arguments)}}();return Je.set(H,Me),Me}!function Ne(Ce){Ie=Ce(Ie)}(Ce=>aR(oR({},Ce),{get:(H,ne,ce)=>We(H,ne)||Ce.get(H,ne,ce),has:(H,ne)=>!!We(H,ne)||Ce.has(H,ne)}))},5861:(ze,we,R)=>{function a(F,oe,se,_e,ue,ae,he){try{var j=F[ae](he),G=j.value}catch(re){return void se(re)}j.done?oe(G):Promise.resolve(G).then(_e,ue)}function ee(F){return function(){var oe=this,se=arguments;return new Promise(function(_e,ue){var ae=F.apply(oe,se);function he(G){a(ae,_e,ue,he,j,"next",G)}function j(G){a(ae,_e,ue,he,j,"throw",G)}he(void 0)})}}R.d(we,{Z:()=>ee})}},ze=>{ze(ze.s=174)}]);